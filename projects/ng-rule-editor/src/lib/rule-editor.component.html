<lib-calculate-sum-prompt *ngIf="calculateSum" (export)="exportSumOfScores()" [style]="style"></lib-calculate-sum-prompt>
<div *ngIf="!calculateSum">
  <h1 [style]="style.h1">{{titleName}}</h1>

  <section id="uneditable-variables-section" class="mb-3">
    <lib-uneditable-variables></lib-uneditable-variables>
  </section>

  <section id="variables-section" class="mb-3">
    <lib-variables [style]="style"></lib-variables>
  </section>

  <section id="final-expression-section" class="mb-3">
    <h2 [style]="style.h2">{{expressionLabel}}</h2>

    <div class="flex-container">
      <div class="expression-type">
        <select class="form-control" [(ngModel)]="expressionSyntax" aria-label="Expression syntax type" [ngStyle]="style.select">
          <option value="simple">Simple Expression</option>
          <option value="fhirpath">FHIRPath Expression</option>
        </select>
      </div>
      <div class="expression" [ngSwitch]="expressionSyntax">
        <lib-syntax-converter [value]="simpleSyntax" [variables]="variables" *ngSwitchCase="'simple'" (expressionChange)="updateFinalExpression($event)" [style]="style"></lib-syntax-converter>
        <input aria-label="FHIRPath" *ngSwitchCase="'fhirpath'" id="final-expression" class="form-control" [(ngModel)]="finalExpression" [ngStyle]="style.input">
      </div>
    </div>
    <div *ngIf="suggestions.length">{{suggestions|json}}</div>
  </section>

  <button class="primary" (click)="export()" [ngStyle]="style.buttonPrimary">{{submitButtonName}}</button>
</div>
