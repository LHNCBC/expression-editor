!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@angular/core"),require("@angular/common"),require("@angular/cdk/a11y"),require("@angular/cdk/drag-drop"),require("@angular/cdk/clipboard"),require("@angular/material/tooltip"),require("@angular/material/radio"),require("@angular/animations"),require("@angular/animations/browser"),require("@angular/material/snack-bar"),require("autocomplete-lhc"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("ng-rule-editor",["exports","tslib","@angular/core","@angular/common","@angular/cdk/a11y","@angular/cdk/drag-drop","@angular/cdk/clipboard","@angular/material/tooltip","@angular/material/radio","@angular/animations","@angular/animations/browser","@angular/material/snack-bar","autocomplete-lhc","@angular/common/http"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ng-rule-editor"]={},e.tslib,e.ng.core,e.ng.common,e.ng.cdk.a11y,e.ng.cdk.dragDrop,e.ng.cdk.clipboard,e.ng.material.tooltip,e.ng.material.radio,e.ng.animations,e.ng.animations.browser,e.ng.material.snackBar,e.Def,e.ng.common.http)}(this,(function(e,t,n,r,o,i,s,a,l,u,c,p,d,h){"use strict";function f(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var m=y(t),v=y(n),g=f(d);function b(e){return"function"==typeof e}var _=!1,x={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;_=e},get useDeprecatedSynchronousErrorHandling(){return _}};function w(e){setTimeout((function(){throw e}),0)}var C={closed:!0,next:function(e){},error:function(e){if(x.useDeprecatedSynchronousErrorHandling)throw e;w(e)},complete:function(){}},E=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function S(e){return null!==e&&"object"==typeof e}var O=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),I=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,o=n._ctorUnsubscribe,i=n._unsubscribe,s=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a){r[a].remove(this)}if(b(i)){o&&(this._unsubscribe=void 0);try{i.call(this)}catch(e){t=e instanceof O?A(e.errors):[e]}}if(E(s)){a=-1;for(var l=s.length;++a<l;){var u=s[a];if(S(u))try{u.unsubscribe()}catch(e){t=t||[],e instanceof O?t=t.concat(A(e.errors)):t.push(e)}}}if(t)throw new O(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof e){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function A(e){return e.reduce((function(e,t){return e.concat(t instanceof O?t.errors:t)}),[])}var V=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),D=function(e){function t(n,r,o){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=C;break;case 1:if(!n){i.destination=C;break}if("object"==typeof n){n instanceof t?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new T(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new T(i,n,r,o)}return i}return m.__extends(t,e),t.prototype[V]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(I),T=function(e){function t(t,n,r,o){var i,s=e.call(this)||this;s._parentSubscriber=t;var a=s;return b(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==C&&(b((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=i,s._error=r,s._complete=o,s}return m.__extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;x.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=x.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):w(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;w(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};x.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),x.useDeprecatedSynchronousErrorHandling)throw e;w(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!x.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return x.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(w(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(D);function M(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof D?r:null}return!0}var P=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function k(e){return e}function N(e){return 0===e.length?k:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var R=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof D)return e;if(e[V])return e[V]()}return e||t||n?new D(e,t,n):new D(C)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||x.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),x.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){x.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),M(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=j(t))((function(t,r){var o;o=n.subscribe((function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[P]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:N(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=j(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function j(e){if(e||(e=x.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var F=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),U=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return m.__extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(I),L=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return m.__extends(t,e),t}(D),G=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return m.__extends(t,e),t.prototype[V]=function(){return new L(this)},t.prototype.lift=function(e){var t=new q(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new F;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new F;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new F;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new F;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new F;return this.hasError?(e.error(this.thrownError),I.EMPTY):this.isStopped?(e.complete(),I.EMPTY):(this.observers.push(e),new U(this,e))},t.prototype.asObservable=function(){var e=new R;return e.source=this,e},t.create=function(e,t){return new q(e,t)},t}(R),q=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return m.__extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):I.EMPTY},t}(G);var z,H=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function B(e,t){return new R((function(n){var r=new I,o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}z||(z={});function W(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new $(e,t))}}var $=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Q(e,this.project,this.thisArg))},e}(),Q=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return m.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(D);function X(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Z=X(),Y=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function K(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var J=function(e){if(e&&"function"==typeof e[P])return r=e,function(e){var t=r[P]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Y(e))return H(e);if(K(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,w),e};if(e&&"function"==typeof e[Z])return t=e,function(e){for(var n=t[Z]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,o=S(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function ee(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[P]}(e))return function(e,t){return new R((function(n){var r=new I;return r.add(t.schedule((function(){var o=e[P]();r.add(o.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(K(e))return function(e,t){return new R((function(n){var r=new I;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Y(e))return B(e,t);if(function(e){return e&&"function"==typeof e[Z]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new R((function(n){var r,o=new I;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(t.schedule((function(){r=e[Z](),o.add(t.schedule((function(){if(!n.closed){var e,t;try{var o=r.next();e=o.value,t=o.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),o}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function te(e,t){return t?ee(e,t):e instanceof R?e:new R(J(e))}function ne(e,t){return new R((function(n){var r=e.length;if(0!==r)for(var o=new Array(r),i=0,s=0,a=function(a){var l=te(e[a]),u=!1;n.add(l.subscribe({next:function(e){u||(u=!0,s++),o[a]=e},error:function(e){return n.error(e)},complete:function(){++i!==r&&u||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=o[n],e}),{}):o),n.complete())}}))},l=0;l<r;l++)a(l);else n.complete()}))}var re,oe,ie=Function.prototype.toString,se=Object.create,ae=Object.defineProperty,le=Object.getOwnPropertyDescriptor,ue=Object.getOwnPropertyNames,ce=Object.getOwnPropertySymbols,pe=Object.getPrototypeOf,de=Object.prototype,he=de.hasOwnProperty,fe=de.propertyIsEnumerable,ye="function"==typeof ce,me="function"==typeof WeakMap,ve=function(e,t){if(!e.constructor)return se(null);var n=e.constructor,r=e.__proto__||pe(e);if(n===t.Object)return r===t.Object.prototype?{}:se(r);if(~ie.call(n).indexOf("[native code]"))try{return new n}catch(e){}return se(r)},ge=function(e,t,n,r){var o=ve(e,t);for(var i in r.set(e,o),e)he.call(e,i)&&(o[i]=n(e[i],r));if(ye){var s=ce(e),a=s.length;if(a)for(var l=0,u=void 0;l<a;l++)u=s[l],fe.call(e,u)&&(o[u]=n(e[u],r))}return o},be=function(e,t,n,r){var o=ve(e,t);r.set(e,o);var i=ye?ue(e).concat(ce(e)):ue(e),s=i.length;if(s)for(var a=0,l=void 0,u=void 0;a<s;a++)if("callee"!==(l=i[a])&&"caller"!==l)if(u=le(e,l)){u.get||u.set||(u.value=n(e[l],r));try{ae(o,l,u)}catch(e){o[l]=u.value}}else o[l]=n(e[l],r);return o},_e=Array.isArray,xe="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void(console&&console.error&&console.error('Unable to locate global object, returning "this".'));function we(e,t){var n=!(!t||!t.isStrict),r=t&&t.realm||xe,o=n?be:ge,i=function(e,t){if(!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);var s,a,l,u=e.constructor;if(u===r.Object)return o(e,r,i,t);if(_e(e)){if(n)return be(e,r,i,t);var c=e.length;s=new u,t.set(e,s);for(var p=0;p<c;p++)s[p]=i(e[p],t);return s}if(e instanceof r.Date)return new u(e.getTime());if(e instanceof r.RegExp)return(s=new u(e.source,e.flags||(l="",(a=e).global&&(l+="g"),a.ignoreCase&&(l+="i"),a.multiline&&(l+="m"),a.unicode&&(l+="u"),a.sticky&&(l+="y"),l))).lastIndex=e.lastIndex,s;if(r.Map&&e instanceof r.Map)return s=new u,t.set(e,s),e.forEach((function(e,n){s.set(n,i(e,t))})),s;if(r.Set&&e instanceof r.Set)return s=new u,t.set(e,s),e.forEach((function(e){s.add(i(e,t))})),s;if(r.Blob&&e instanceof r.Blob)return e.slice(0,e.size,e.type);if(r.Buffer&&r.Buffer.isBuffer(e))return s=r.Buffer.allocUnsafe?r.Buffer.allocUnsafe(e.length):new u(e.length),t.set(e,s),e.copy(s),s;if(r.ArrayBuffer){if(r.ArrayBuffer.isView(e))return s=new u(e.buffer.slice(0)),t.set(e,s),s;if(e instanceof r.ArrayBuffer)return s=e.slice(0),t.set(e,s),s}return"function"==typeof e.then||e instanceof Error||r.WeakMap&&e instanceof r.WeakMap||r.WeakSet&&e instanceof r.WeakSet?e:o(e,r,i,t)};return i(e,function(){if(me)return new WeakMap;var e=se({has:function(t){return!!~e._keys.indexOf(t)},set:function(t,n){e._keys.push(t),e._values.push(n)},get:function(t){return e._values[e._keys.indexOf(t)]}});return e._keys=[],e._values=[],e}())}we.default=we,we.strict=function(e,t){return we(e,{isStrict:!0,realm:t?t.realm:void 0})},function(e){e.question="Question",e.expression="FHIRPath Expression",e.simple="Easy Path Expression",e.query="FHIR Query",e.queryObservation="FHIR Query (Observation)"}(re||(re={})),function(e){e.question="Question",e.simple="Easy Path Expression",e.queryObservation="FHIR Query (Observation)"}(oe||(oe={}));var Ce=/^\s*iif\s*\((.*)\)\s*$/,Ee={kg:[{unit:"lbs",factor:2.20462}],lbs:[{unit:"kg",factor:.453592}],"[in_i]":[{unit:"cm",factor:2.54},{unit:"m",factor:.0254}]},Se=function(){function e(){this.syntaxType="simple",this.uneditableVariablesChange=new G,this.variablesChange=new G,this.questionsChange=new G,this.mightBeScoreChange=new G,this.finalExpressionChange=new G,this.disableAdvancedChange=new G,this.needsAdvancedInterface=!1,this.LANGUAGE_FHIRPATH="text/fhirpath",this.LANGUAGE_FHIR_QUERY="application/x-fhir-query",this.QUESTION_REGEX=/^%resource\.item\.where\(linkId='(.*)'\)\.answer\.value(?:\*(\d*\.?\d*))?$/,this.QUERY_REGEX=/^Observation\?code=(.+)&date=gt{{today\(\)-(\d+) (.+)}}&patient={{%patient.id}}&_sort=-date&_count=1$/,this.VARIABLE_EXTENSION="http://hl7.org/fhir/StructureDefinition/variable",this.SCORE_VARIABLE_EXTENSION="http://lhcforms.nlm.nih.gov/fhir/ext/rule-editor-score-variable",this.SCORE_EXPRESSION_EXTENSION="http://lhcforms.nlm.nih.gov/fhir/ext/rule-editor-expression",this.SIMPLE_SYNTAX_EXTENSION="http://lhcforms.nlm.nih.gov/fhir/ext/simple-syntax",this.CALCULATED_EXPRESSION="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",this.LAUNCH_CONTEXT_URI="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext",this.linkIdToQuestion={},this.mightBeScore=!1,this.variables=[],this.uneditableVariables=[]}return e.prototype.addVariable=function(){var e=this.variables.map((function(e){return e.label})).concat(this.uneditableVariables.map((function(e){return e.name})));this.variables.push({label:this.getNewLabelName(e),type:"question",expression:""}),this.variablesChange.next(this.variables)},e.prototype.remove=function(e){this.variables.splice(e,1)},e.prototype.update=function(){this.variablesChange.next(this.variables)},e.prototype.checkAdvancedInterface=function(e){if(e)this.needsAdvancedInterface=!0;else{var t=!1;void 0!==this.variables.find((function(e){return"expression"===e.type||"query"===e.type}))&&(t=!0),"fhirpath"===this.syntaxType&&(t=!0),this.needsAdvancedInterface=t}this.disableAdvancedChange.next(this.needsAdvancedInterface)},e.prototype.getUneditableVariables=function(e){var t=this;return Array.isArray(e.extension)?e.extension.reduce((function(e,n){var r,o;if(n.url===t.LAUNCH_CONTEXT_URI&&n.extension){var i={name:n.extension.find((function(e){return"name"===e.url})).valueId,type:null===(r=n.extension.filter((function(e){return"type"===e.url})))||void 0===r?void 0:r.map((function(e){return e.valueCode})).join("|"),description:null===(o=n.extension.find((function(e){return"description"===e.url})))||void 0===o?void 0:o.valueString};e.push(i)}return e}),[]):[]},e.prototype.extractVariables=function(e){var t=this;if(e.extension){var n=[],r=[];return e.extension=e.extension.map((function(e,t){return Object.assign(Object.assign({},e),{__$index:t})})),e.extension.forEach((function(e){if(e.url===t.VARIABLE_EXTENSION&&e.valueExpression)switch(e.valueExpression.language){case t.LANGUAGE_FHIRPATH:var o=t.processVariable(e.valueExpression.name,e.valueExpression.expression,e.__$index,e.valueExpression.extension);"expression"===o.type&&(t.needsAdvancedInterface=!0),n.push(o);break;case t.LANGUAGE_FHIR_QUERY:var i=t.processQueryVariable(e.valueExpression.name,e.valueExpression.expression,e.__$index);"query"===i.type&&(t.needsAdvancedInterface=!0),n.push(i)}else r.push(e)})),e.extension=r,n}return[]},e.prototype.itemHasScore=function(e){return"string"==typeof e&&(e=this.linkIdToQuestion[e]),(e.answerOption||[]).some((function(e){return(e.extension||[]).some((function(e){return"http://hl7.org/fhir/StructureDefinition/ordinalValue"===e.url}))}))},e.prototype.getScoreQuestionCount=function(e,t){var n=this,r=0;return e.item.forEach((function(e){n.itemHasScore(e)&&r++})),r},e.prototype.import=function(e,t,n){this.linkIdContext=n,this.fhir=we(t);var r=!1;if("Questionnaire"===this.fhir.resourceType&&this.fhir.item&&this.fhir.item.length){for(var o in this.mightBeScore=this.getScoreQuestionCount(this.fhir,n)>1,this.mightBeScoreChange.next(this.mightBeScore),this.uneditableVariables=this.getUneditableVariables(this.fhir),this.uneditableVariablesChange.next(this.uneditableVariables),this.linkIdToQuestion={},this.needsAdvancedInterface=!1,this.processItem(this.fhir.item),this.variables=this.extractVariables(this.fhir),this.variablesChange.next(this.variables),this.questions=[],this.linkIdToQuestion){if(!this.linkIdToQuestion.hasOwnProperty(o))return;var i=this.linkIdToQuestion[o],s=i.text;this.questions.push({linkId:i.linkId,text:s.length>60?s.substring(0,60)+"...":s,unit:this.getQuestionUnits(i.linkId)})}this.questionsChange.next(this.questions);var a=this.extractExpression(e,this.fhir.item,n);if(null!==a){this.finalExpression=a.valueExpression.expression,this.caseStatements=null!==this.finalExpression.match(Ce);var l=this.extractSimpleSyntax(a);null===l&&""!==this.finalExpression?(this.syntaxType="fhirpath",this.needsAdvancedInterface=!0):(this.syntaxType="simple",this.simpleExpression=l)}else this.syntaxType="simple",this.simpleExpression="",this.finalExpression="";this.finalExpressionChange.next(this.finalExpression),r=!0}return r},e.prototype.processItem=function(e){var t=this;e.forEach((function(e){t.linkIdToQuestion[e.linkId]=e,e.item&&t.processItem(e.item)}))},e.prototype.extractSimpleSyntax=function(e){var t=this;if(e.valueExpression&&e.valueExpression.extension){var n=e.valueExpression.extension.find((function(e){return e.url===t.SIMPLE_SYNTAX_EXTENSION}));if(void 0!==n)return n.valueString}return null},e.prototype.extractExpression=function(e,n,r){var o,i,s=this;try{for(var a=t.__values(n),l=a.next();!l.done;l=a.next()){var u=l.value;if(u.linkId===r&&u.extension){var c=u.extension.findIndex((function(t){return t.url===e&&t.valueExpression.language===s.LANGUAGE_FHIRPATH&&t.valueExpression.expression}));if(-1!==c){var p=u.extension[c];return u.extension.splice(c,1),p}}else if(u.item)return this.extractExpression(e,u.item,r)}}catch(e){o={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return null},e.prototype.processVariable=function(e,t,n,r){var o=this,i=t.match(this.QUESTION_REGEX),s=r&&r.find((function(e){return e.url===o.SIMPLE_SYNTAX_EXTENSION}));if(null!==i){var a=i[1],l=i[2],u={__$index:n,label:e,type:"question",linkId:a,expression:t};if(l){var c=this.getQuestionUnits(a);if(Ee.hasOwnProperty(c)){var p=Ee[c].find((function(e){return e.factor.toString()===l}));u.unit=p.unit}}return u}return void 0!==s?{__$index:n,label:e,type:"simple",expression:t,simple:s.valueString}:{__$index:n,label:e,type:"expression",expression:t}},e.prototype.processQueryVariable=function(e,t,n){var r=t.match(this.QUERY_REGEX);return null!==r?{__$index:n,label:e,type:"queryObservation",codes:r[1].split("%2C"),timeInterval:parseInt(r[2],10),timeIntervalUnit:r[3],expression:t}:{__$index:n,label:e,type:"query",expression:t}},e.prototype.getQuestionUnits=function(e){var t=this.linkIdToQuestion[e];if(t.extension){var n=t.extension.find((function(e){return"http://hl7.org/fhir/StructureDefinition/questionnaire-unit"===e.url&&e.valueCoding.system&&"http://unitsofmeasure.org"===e.valueCoding.system}));if(n&&n.valueCoding.code)return n.valueCoding.code}return null},e.prototype.getNewLabelName=function(e){var n,r,o,i,s="abcdefghijklmnopqrstuvwxyz".split(""),a=[""].concat(s);try{for(var l=t.__values(a),u=l.next();!u.done;u=l.next()){var c=u.value,p=function(t){var n=c+t;if(0===e.filter((function(e){return e===n})).length)return{value:n}};try{for(var d=(o=void 0,t.__values(s)),h=d.next();!h.done;h=d.next()){var f=p(h.value);if("object"==typeof f)return f.value}}catch(e){o={error:e}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return""},e.prototype.toggleMightBeScore=function(){this.mightBeScore=!this.mightBeScore,this.mightBeScoreChange.next(this.mightBeScore)},e.prototype.export=function(e,n){var r=this,o=we(this.fhir),i=this.variables.map((function(e){var t={__$index:e.__$index,url:r.VARIABLE_EXTENSION,valueExpression:{name:e.label,language:"query"===e.type?r.LANGUAGE_FHIR_QUERY:r.LANGUAGE_FHIRPATH,expression:e.expression}};return"simple"===e.type&&(t.valueExpression.extension=[{url:r.SIMPLE_SYNTAX_EXTENSION,valueString:e.simple}]),t})),s=[],a=[];i.forEach((function(e){void 0===e.__$index?a.push(e):s.push(e)})),o.extension?(o.extension=o.extension.concat(s),o.extension.sort((function(e,t){return e.__$index-t.__$index})),o.extension=o.extension.concat(a)):o.extension=s.concat(a),o.extension=o.extension.map((function(e){e.__$index;return t.__rest(e,["__$index"])}));var l={url:e,valueExpression:{language:this.LANGUAGE_FHIRPATH,expression:n}};if(("simple"===this.syntaxType&&(l.valueExpression.extension=[{url:this.SIMPLE_SYNTAX_EXTENSION,valueString:this.simpleExpression}]),this.insertExtensions(o.item,this.linkIdContext,[l]),void 0!==this.variables.find((function(e){return"queryObservation"===e.type})))&&void 0===o.extension.find((function(e){if(e.url===r.LAUNCH_CONTEXT_URI&&Array.isArray(e.extension)&&void 0!==e.extension.find((function(e){return"name"===e.url&&"patient"===e.valueId})))return!0;return!1}))){Array.isArray(o.extension)||(o.extension=[]);var u="patient",c="Patient",p="For filling in patient information as the subject for the form";o.extension.push({url:this.LAUNCH_CONTEXT_URI,extension:[{url:"name",valueId:u},{url:"type",valueCode:c},{url:"description",valueString:p}]}),this.uneditableVariables.push({name:u,type:c,description:p}),this.uneditableVariablesChange.next(this.uneditableVariables)}return o},e.prototype.addTotalScoreRule=function(e,t){return this.fhir=e,this.linkIdContext=t,this.addSumOfScores()},e.prototype.addSumOfScores=function(){var e=this,t=this.fhir,n=this.linkIdContext,r=[],o=[];t.item.forEach((function(t){t.linkId!==n&&e.itemHasScore(t)&&o.push(t.linkId)})),o.forEach((function(){r.push(e.getNewLabelName(r))}));var i=o.map((function(t,n){return{url:e.VARIABLE_EXTENSION,valueExpression:{name:r[n],language:e.LANGUAGE_FHIRPATH,expression:"%questionnaire.item.where(linkId = '"+t+"').answerOption.where(valueCoding.code=%resource.item.where(linkId = '"+t+"').answer.valueCoding.code).extension.where(url='http://hl7.org/fhir/StructureDefinition/ordinalValue').valueDecimal",extension:[{url:e.SCORE_VARIABLE_EXTENSION}]}}})),s={url:this.VARIABLE_EXTENSION,valueExpression:{name:"any_questions_answered",language:this.LANGUAGE_FHIRPATH,expression:r.map((function(e){return"%"+e+".exists()"})).join(" or "),extension:[{url:this.SCORE_VARIABLE_EXTENSION}]}},a=r.map((function(e){return"iif(%"+e+".exists(), %"+e+", 0)"})).join(" + "),l={url:this.CALCULATED_EXPRESSION,valueExpression:{description:"Total score calculation",language:this.LANGUAGE_FHIRPATH,expression:"iif(%any_questions_answered, "+a+", {})",extension:[{url:this.SCORE_EXPRESSION_EXTENSION}]}};return i.push(s),i.push(l),this.insertExtensions(t.item,n,i),t},e.prototype.isScoreCalculation=function(e,t){var n=this,r=function(e){if(t===e.linkId&&e.extension.find((function(e){return!!n.isScoreExtension(e)})))return!0;if(e.item&&e.item.find((function(e){return r(e)})))return!0;return!1};return!!e.item.find((function(e){return r(e)}))},e.prototype.updateScoreCalculation=function(e,t){return this.removeSumOfScores(e,t),this.addTotalScoreRule(e,t)},e.prototype.removeSumOfScores=function(e,t){var n=this;this.fhir=e;var r=function(e){void 0!==t&&t!==e.linkId||(e.extension=e.extension.filter((function(e){return!n.isScoreExtension(e)}))),e.item&&e.item.forEach((function(e){return r(e)}))};return this.fhir.item.forEach(r),this.fhir},e.prototype.isScoreExtension=function(e){var t=this;return!!(e.valueExpression&&e.valueExpression.extension&&e.valueExpression.extension.length)&&!!e.valueExpression.extension.find((function(e){return e&&(e.url===t.SCORE_VARIABLE_EXTENSION||e.url===t.SCORE_EXPRESSION_EXTENSION)}))},e.prototype.insertExtensions=function(e,n,r){var o,i;try{for(var s=t.__values(e),a=s.next();!a.done;a=s.next()){var l=a.value;if(l.linkId===n){l.extension?l.extension=l.extension.concat(r):l.extension=r;break}l.item&&this.insertExtensions(l.item,n,r)}}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}},e.prototype.valueOrScoreExpression=function(e,t,n,r,o){return t?"%questionnaire.item.where(linkId = '"+e+"').answerOption.where(valueCoding.code=%resource.item.where(linkId = '"+e+"').answer.valueCoding.code).extension.where(url='http://hl7.org/fhir/StructureDefinition/ordinalValue').valueDecimal":n&&r&&o?"%resource.item.where(linkId='"+e+"').answer.value*"+Ee[r].find((function(e){return e.unit===o})).factor:"%resource.item.where(linkId='"+e+"').answer.value"},e}();Se.ɵprov=v.ɵɵdefineInjectable({factory:function(){return new Se},token:Se,providedIn:"root"}),Se.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],Se.ctorParameters=function(){return[]};var Oe=function(){function e(e,t){this.variableService=e,this.liveAnnouncer=t,this.advancedInterface=!1,this.fhirQuestionnaire=null,this.itemLinkId=null,this.submitButtonName="Submit",this.titleName="Rule Editor",this.expressionLabel="Final Expression",this.expressionUri="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",this.lhcStyle={},this.save=new n.EventEmitter,this.errorLoading="Could not detect a FHIR Questionnaire; please try a different file.",this.datePipe=new r.DatePipe("en-US"),this.suggestions=[],this.disableInterfaceToggle=!1,this.loadError=!1}return e.prototype.ngOnInit=function(){var e=this;this.calculateSumSubscription=this.variableService.mightBeScoreChange.subscribe((function(t){e.calculateSum=t})),this.finalExpressionSubscription=this.variableService.finalExpressionChange.subscribe((function(t){e.finalExpression=t})),this.variablesSubscription=this.variableService.variablesChange.subscribe((function(t){e.variables=t.map((function(e){return e.label}))})),this.disableAdvancedSubscription=this.variableService.disableAdvancedChange.subscribe((function(t){e.disableInterfaceToggle=t}))},e.prototype.ngDestroy=function(){this.calculateSumSubscription.unsubscribe(),this.finalExpressionSubscription.unsubscribe(),this.variablesSubscription.unsubscribe(),this.disableAdvancedSubscription.unsubscribe()},e.prototype.ngOnChanges=function(e){this.reload()},e.prototype.reload=function(){null!==this.fhirQuestionnaire&&null!==this.itemLinkId&&(this.loadError=!this.variableService.import(this.expressionUri,this.fhirQuestionnaire,this.itemLinkId),this.loadError&&this.liveAnnouncer.announce(this.errorLoading),this.disableInterfaceToggle=this.variableService.needsAdvancedInterface,this.advancedInterface=this.variableService.needsAdvancedInterface),this.simpleExpression=this.variableService.simpleExpression,this.linkIdContext=this.variableService.linkIdContext,this.expressionSyntax=this.variableService.syntaxType,this.caseStatements=this.variableService.caseStatements,this.calculateSum=this.variableService.mightBeScore,this.finalExpression=this.variableService.finalExpression,this.variables=this.variableService.variables.map((function(e){return e.label}))},e.prototype.export=function(){this.save.emit(this.variableService.export(this.expressionUri,this.finalExpression))},e.prototype.addSumOfScores=function(){this.save.emit(this.variableService.addSumOfScores())},e.prototype.onSyntaxChange=function(e){var t=e.value;"simple"===t&&(this.finalExpression=""),this.variableService.syntaxType=t},e.prototype.updateFinalExpression=function(e){this.finalExpression=e},e.prototype.updateSimpleExpression=function(e){this.simpleExpression=e},e.prototype.onTypeChange=function(e){"fhirpath"===e.target.value?this.variableService.checkAdvancedInterface(!0):this.variableService.checkAdvancedInterface(),this.variableService.needsAdvancedInterface?(this.advancedInterface=!0,this.disableInterfaceToggle=!0):this.disableInterfaceToggle=!1},e}();Oe.decorators=[{type:n.Component,args:[{selector:"lhc-rule-editor",template:'<div *ngIf="loadError" class="error">{{errorLoading}}</div>\n<lhc-calculate-sum-prompt *ngIf="calculateSum && !loadError" (export)="addSumOfScores()" [lhcStyle]="lhcStyle"></lhc-calculate-sum-prompt>\n<div *ngIf="!calculateSum && !loadError">\n  <h1 [style]="lhcStyle.h1">{{titleName}}</h1>\n\n  <span class="checkbox" matTooltip="When in the advanced interface you can edit FHIRPath and x-fhir-query directly. This mode is automatically enabled for complex Questionnaires.">\n    <input type="checkbox" id="advanced-interface" [disabled]="disableInterfaceToggle"\n           [(ngModel)]="advancedInterface">\n    <label for="advanced-interface">Advanced interface</label>\n  </span>\n\n  <section id="uneditable-variables-section" class="mb-3">\n    <lhc-uneditable-variables></lhc-uneditable-variables>\n  </section>\n\n  <section id="variables-section" class="mb-3">\n    <lhc-variables [lhcStyle]="lhcStyle" [advancedInterface]="advancedInterface"></lhc-variables>\n  </section>\n\n  <section id="final-expression-section" class="mb-3">\n    <h2 [style]="lhcStyle.h2">{{expressionLabel}}</h2>\n\n    <div class="checkbox">\n      <input type="checkbox" id="case-statements" [(ngModel)]="caseStatements">\n      <label for="case-statements">Use case statements</label>\n    </div>\n\n    <div class="flex-container">\n      <div class="expression-type" *ngIf="advancedInterface">\n        <select class="form-control" [(ngModel)]="expressionSyntax" (change)="onTypeChange($event)" aria-label="Expression syntax type" [ngStyle]="lhcStyle.select">\n          <option value="simple">Easy Path Expression</option>\n          <option value="fhirpath">FHIRPath Expression</option>\n        </select>\n      </div>\n      <div *ngIf="!caseStatements" class="expression" [ngSwitch]="expressionSyntax">\n        <lhc-syntax-converter\n          *ngSwitchCase="\'simple\'"\n          [simple]="simpleExpression"\n          [variables]="variables"\n          (expressionChange)="updateFinalExpression($event)"\n          (simpleChange)="updateSimpleExpression($event)"\n          [lhcStyle]="lhcStyle"></lhc-syntax-converter>\n        <input type="text" aria-label="FHIRPath" *ngSwitchCase="\'fhirpath\'" id="final-expression" class="form-control" [(ngModel)]="finalExpression" [ngStyle]="lhcStyle.input">\n      </div>\n      <lhc-case-statements\n        *ngIf="caseStatements"\n        [syntax]="expressionSyntax"\n        [simpleExpression]="simpleExpression"\n        [expression]="finalExpression"\n        [lhcStyle]="lhcStyle"\n        (expressionChange)="updateFinalExpression($event)"\n        (simpleChange)="updateSimpleExpression($event)">\n      </lhc-case-statements>\n    </div>\n  </section>\n\n  <button class="primary" (click)="export()" [ngStyle]="lhcStyle.buttonPrimary" id="export">{{submitButtonName}}</button>\n</div>\n',styles:['.toolbar-button{height:2.7rem}.file-import{width:4.6rem;color:transparent}.file-import::-webkit-file-upload-button{visibility:hidden}.file-import:before{content:"Import";display:inline-block;cursor:pointer;color:#fff}mat-radio-button{margin-left:1em}h1{margin-top:0}.flex-container{display:flex;flex-wrap:wrap;flex-direction:row}.expression,.expression-type{display:flex;padding:.5rem}.expression-type{flex:0 0 15em}.expression{flex:1 0 30em;min-width:0}input[type=text],select{height:2rem;font-size:1rem;width:100%;margin-bottom:.5rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}button{height:2.5rem;border:none;border-radius:4px;padding:0 2em;font-size:1rem}.primary{background-color:#00f;color:#fff}lhc-case-statements{flex:100%;padding:.5rem}.checkbox{padding:.5rem}@media (max-width:975px){.flex-container{flex-direction:column}.expression,.expression-type{flex:100%}}']}]}],Oe.ctorParameters=function(){return[{type:Se},{type:o.LiveAnnouncer}]},Oe.propDecorators={advancedInterface:[{type:n.Input}],fhirQuestionnaire:[{type:n.Input}],itemLinkId:[{type:n.Input}],submitButtonName:[{type:n.Input}],titleName:[{type:n.Input}],expressionLabel:[{type:n.Input}],expressionUri:[{type:n.Input}],lhcStyle:[{type:n.Input}],save:[{type:n.Output}]};
/**
     * @license Angular v11.0.9
     * (c) 2010-2020 Google LLC. https://angular.io/
     * License: MIT
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Ie=new n.InjectionToken("NgValueAccessor"),Ae={provide:Ie,useExisting:n.forwardRef((function(){return Ve})),multi:!0},Ve=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */Ve.decorators=[{type:n.Directive,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[Ae]}]}],Ve.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var De={provide:Ie,useExisting:n.forwardRef((function(){return Me})),multi:!0};var Te=new n.InjectionToken("CompositionEventMode"),Me=function(){function e(e,t,n){var o;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(o=r["ɵgetDOM"]()?r["ɵgetDOM"]().getUserAgent():"",!/android (\d+)/.test(o.toLowerCase())))}return e.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function Pe(e){return null==e||0===e.length}function ke(e){return null!=e&&"number"==typeof e.length}Me.decorators=[{type:n.Directive,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[De]}]}],Me.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef},{type:Boolean,decorators:[{type:n.Optional},{type:n.Inject,args:[Te]}]}]};var Ne=new n.InjectionToken("NgValidators"),Re=new n.InjectionToken("NgAsyncValidators"),je=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Fe=function(){function e(){}return e.min=function(e){return function(t){if(Pe(t.value)||Pe(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}},e.max=function(e){return function(t){if(Pe(t.value)||Pe(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}},e.required=function(e){return Pe(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return Pe(e.value)||je.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(t){return Pe(t.value)||!ke(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}},e.maxLength=function(e){return function(t){return ke(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}},e.pattern=function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Pe(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var t=e.filter(Ue);return 0==t.length?null:function(e){return Ge(qe(e,t))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(Ue);return 0==t.length?null:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(E(n))return ne(n,null);if(S(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return ne(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var o=e.pop();return ne(e=1===e.length&&E(e[0])?e[0]:e,null).pipe(W((function(e){return o.apply(void 0,e)})))}return ne(e,null)}(qe(e,t).map(Le)).pipe(W(Ge))}},e}();function Ue(e){return null!=e}function Le(e){var t=n["ɵisPromise"](e)?te(e):e;if(!n["ɵisObservable"](t)&&("undefined"==typeof ngDevMode||ngDevMode))throw new Error("Expected validator to return Promise or Observable.");return t}function Ge(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function qe(e,t){return t.map((function(t){return t(e)}))}function ze(e){return e.map((function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}}))}function He(e){return null!=e?Fe.compose(ze(e)):null}function Be(e){return null!=e?Fe.composeAsync(ze(e)):null}function We(e,n){return null===e?[n]:Array.isArray(e)?t.__spread(e,[n]):[e,n]}function $e(e){return e._rawValidators}function Qe(e){return e._rawAsyncValidators}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var Xe=function(){function e(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype._setValidators=function(e){this._rawValidators=e||[],this._composedValidatorFn=He(this._rawValidators)},e.prototype._setAsyncValidators=function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Be(this._rawAsyncValidators)},Object.defineProperty(e.prototype,"validator",{get:function(){return this._composedValidatorFn||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return this._composedAsyncValidatorFn||null},enumerable:!1,configurable:!0}),e.prototype._registerOnDestroy=function(e){this._onDestroyCallbacks.push(e)},e.prototype._invokeOnDestroyCallbacks=function(){this._onDestroyCallbacks.forEach((function(e){return e()})),this._onDestroyCallbacks=[]},e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},e.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},e}(),Ze=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),Object.defineProperty(n.prototype,"formDirective",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return null},enumerable:!1,configurable:!0}),n}(Xe),Ye=function(e){function n(){var n=e.apply(this,t.__spread(arguments))||this;return n._parent=null,n.name=null,n.valueAccessor=null,n}return t.__extends(n,e),n}(Xe),Ke=function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.untouched)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.touched)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.pristine)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.dirty)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.valid)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.invalid)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.pending)&&void 0!==n&&n},enumerable:!1,configurable:!0}),e}(),Je={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},et=function(e){function n(t){return e.call(this,t)||this}return t.__extends(n,e),n}(Ke);
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */et.decorators=[{type:n.Directive,args:[{selector:"[formControlName],[ngModel],[formControl]",host:Je}]}],et.ctorParameters=function(){return[{type:Ye,decorators:[{type:n.Self}]}]};var tt=function(e){function n(t){return e.call(this,t)||this}return t.__extends(n,e),n}(Ke);tt.decorators=[{type:n.Directive,args:[{selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:Je}]}],tt.ctorParameters=function(){return[{type:Ze,decorators:[{type:n.Optional},{type:n.Self}]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var nt={provide:Ie,useExisting:n.forwardRef((function(){return rt})),multi:!0},rt=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();rt.decorators=[{type:n.Directive,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[nt]}]}],rt.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var ot={provide:Ie,useExisting:n.forwardRef((function(){return st})),multi:!0};var it=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,t){this._accessors.push([e,t])},e.prototype.remove=function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},e.prototype.select=function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))},e.prototype._isSameGroup=function(e,t){return!!e[0].control&&(e[0]._parent===t._control._parent&&e[1].name===t.name)},e}();it.decorators=[{type:n.Injectable}];var st=function(){function e(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(Ye),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&("undefined"==typeof ngDevMode||ngDevMode)&&function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e}();st.decorators=[{type:n.Directive,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[ot]}]}],st.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef},{type:it},{type:n.Injector}]},st.propDecorators={name:[{type:n.Input}],formControlName:[{type:n.Input}],value:[{type:n.Input}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var at={provide:Ie,useExisting:n.forwardRef((function(){return lt})),multi:!0},lt=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();lt.decorators=[{type:n.Directive,args:[{selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[at]}]}],lt.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var ut='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',ct='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',pt='\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',dt='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ht='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ',ft=function(){function e(){}return e.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ut)},e.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+ct+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+dt)},e.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+ut)},e.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+ct)},e.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+pt)},e.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},e.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+".\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},e}(),yt={provide:Ie,useExisting:n.forwardRef((function(){return vt})),multi:!0};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function mt(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var vt=function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Object.is}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e&&("undefined"==typeof ngDevMode||ngDevMode))throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!1,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=mt(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var n,r;try{for(var o=t.__values(Array.from(this._optionMap.keys())),i=o.next();!i.done;i=o.next()){var s=i.value;if(this._compareWith(this._optionMap.get(s),e))return s}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e},e}();vt.decorators=[{type:n.Directive,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[yt]}]}],vt.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]},vt.propDecorators={compareWith:[{type:n.Input}]};var gt=function(){function e(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(mt(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!1,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();gt.decorators=[{type:n.Directive,args:[{selector:"option"}]}],gt.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:vt,decorators:[{type:n.Optional},{type:n.Host}]}]},gt.propDecorators={ngValue:[{type:n.Input,args:["ngValue"]}],value:[{type:n.Input,args:["value"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var bt={provide:Ie,useExisting:n.forwardRef((function(){return xt})),multi:!0};function _t(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var xt=function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Object.is}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e&&("undefined"==typeof ngDevMode||ngDevMode))throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!1,configurable:!0}),e.prototype.writeValue=function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var o=n.selectedOptions,i=0;i<o.length;i++){var s=o.item(i),a=t._getOptionValue(s.value);r.push(a)}else for(o=n.options,i=0;i<o.length;i++){if((s=o.item(i)).selected){a=t._getOptionValue(s.value);r.push(a)}}t.value=r,e(r)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},e.prototype._getOptionId=function(e){var n,r;try{for(var o=t.__values(Array.from(this._optionMap.keys())),i=o.next();!i.done;i=o.next()){var s=i.value;if(this._compareWith(this._optionMap.get(s)._value,e))return s}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e},e}();xt.decorators=[{type:n.Directive,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[bt]}]}],xt.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]},xt.propDecorators={compareWith:[{type:n.Input}]};var wt=function(){function e(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(_t(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(_t(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!1,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function Ct(e,n){return t.__spread(n.path,[e])}function Et(e,t){("undefined"==typeof ngDevMode||ngDevMode)&&(e||Tt(t,"Cannot find control with"),t.valueAccessor||Tt(t,"No value accessor for form control with")),It(e,t,!0),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Vt(e,t)}))}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy((function(){e._unregisterOnChange(n)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Vt(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy((function(){e._unregisterOnDisabledChange(n)}))}}(e,t)}function St(e,t){var n=function(){("undefined"==typeof ngDevMode||ngDevMode)&&function(e){Tt(e,"There is no FormControl instance attached to form control element with")}(t)};t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n),At(e,t,!0),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange((function(){})))}function Ot(e,t){e.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)}))}function It(e,t,n){var r=$e(e);null!==t.validator?e.setValidators(We(r,t.validator)):"function"==typeof r&&e.setValidators([r]);var o=Qe(e);if(null!==t.asyncValidator?e.setAsyncValidators(We(o,t.asyncValidator)):"function"==typeof o&&e.setAsyncValidators([o]),n){var i=function(){return e.updateValueAndValidity()};Ot(t._rawValidators,i),Ot(t._rawAsyncValidators,i)}}function At(e,t,n){if(null!==e){if(null!==t.validator){var r=$e(e);Array.isArray(r)&&r.length>0&&e.setValidators(r.filter((function(e){return e!==t.validator})))}if(null!==t.asyncValidator){var o=Qe(e);Array.isArray(o)&&o.length>0&&e.setAsyncValidators(o.filter((function(e){return e!==t.asyncValidator})))}}if(n){var i=function(){};Ot(t._rawValidators,i),Ot(t._rawAsyncValidators,i)}}function Vt(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Dt(e,t){null!=e||"undefined"!=typeof ngDevMode&&!ngDevMode||Tt(t,"Cannot find control with"),It(e,t,!1)}function Tt(e,t){var n;throw n=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function Mt(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}wt.decorators=[{type:n.Directive,args:[{selector:"option"}]}],wt.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:xt,decorators:[{type:n.Optional},{type:n.Host}]}]},wt.propDecorators={ngValue:[{type:n.Input,args:["ngValue"]}],value:[{type:n.Input,args:["value"]}]};var Pt=[Ve,lt,rt,vt,xt,st];function kt(e,t){e._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}))}function Nt(e,t){if(!t)return null;Array.isArray(t)||"undefined"!=typeof ngDevMode&&!ngDevMode||Tt(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,o=void 0;return t.forEach((function(t){var i;t.constructor===Me?n=t:(i=t,Pt.some((function(e){return i.constructor===e}))?(r&&("undefined"==typeof ngDevMode||ngDevMode)&&Tt(e,"More than one built-in value accessor matches form control with"),r=t):(o&&("undefined"==typeof ngDevMode||ngDevMode)&&Tt(e,"More than one custom value accessor matches form control with"),o=t))})),o||(r||(n||(("undefined"==typeof ngDevMode||ngDevMode)&&Tt(e,"No valid value accessor for form control with"),null)))}function Rt(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function jt(e,t,n,r){"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(ft.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var Ft="VALID",Ut="INVALID",Lt="PENDING",Gt="DISABLED";function qt(e){return(Wt(e)?e.validators:e)||null}function zt(e){return Array.isArray(e)?He(e):e||null}function Ht(e,t){return(Wt(t)?t.asyncValidators:e)||null}function Bt(e){return Array.isArray(e)?Be(e):e||null}function Wt(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var $t=function(){function e(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=zt(this._rawValidators),this._composedAsyncValidatorFn=Bt(this._rawAsyncValidators)}return Object.defineProperty(e.prototype,"validator",{get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.status===Ft},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.status===Ut},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.status==Lt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.status===Gt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.status!==Gt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!1,configurable:!0}),e.prototype.setValidators=function(e){this._rawValidators=e,this._composedValidatorFn=zt(e)},e.prototype.setAsyncValidators=function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Bt(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAllAsTouched=function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status=Lt,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={});var t=this._parentMarkedDirty(e.onlySelf);this.status=Gt,this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))},e.prototype.enable=function(e){void 0===e&&(e={});var t=this._parentMarkedDirty(e.onlySelf);this.status=Ft,this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Ft&&this.status!==Lt||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?Gt:Ft},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var t=this;if(this.asyncValidator){this.status=Lt,this._hasOwnPendingAsyncValidator=!0;var n=Le(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})}))}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)},e.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},e.prototype.get=function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(n)),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach((function(e){r=r instanceof Xt?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Zt&&r.at(e)||null})),r}(this,e,".")},e.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},e.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!1,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new n.EventEmitter,this.statusChanges=new n.EventEmitter},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?Gt:this.errors?Ut:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lt)?Lt:this._anyControlsHaveStatus(Ut)?Ut:Ft},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls((function(t){return t.status===e}))},e.prototype._anyControlsDirty=function(){return this._anyControls((function(e){return e.dirty}))},e.prototype._anyControlsTouched=function(){return this._anyControls((function(e){return e.touched}))},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){Wt(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e.prototype._parentMarkedDirty=function(e){var t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()},e}(),Qt=function(e){function n(t,n,r){void 0===t&&(t=null);var o=e.call(this,qt(n),Ht(r,n))||this;return o._onChange=[],o._applyFormState(t),o._setUpdateStrategy(n),o._initObservables(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!r}),o}return t.__extends(n,e),n.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach((function(e){return e(n.value,!1!==t.emitViewToModelChange)})),this.updateValueAndValidity(t)},n.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},n.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},n.prototype._updateValue=function(){},n.prototype._anyControls=function(e){return!1},n.prototype._allControlsDisabled=function(){return this.disabled},n.prototype.registerOnChange=function(e){this._onChange.push(e)},n.prototype._unregisterOnChange=function(e){Rt(this._onChange,e)},n.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},n.prototype._unregisterOnDisabledChange=function(e){Rt(this._onDisabledChange,e)},n.prototype._forEachChild=function(e){},n.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)},n.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},n}($t),Xt=function(e){function n(t,n,r){var o=e.call(this,qt(n),Ht(r,n))||this;return o.controls=t,o._initObservables(),o._setUpdateStrategy(n),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!r}),o}return t.__extends(n,e),n.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},n.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},n.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){n._throwIfControlMissing(r),n.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this.updateValueAndValidity(t)},n.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),Object.keys(e).forEach((function(r){n.controls[r]&&n.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this.updateValueAndValidity(t)},n.prototype.reset=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)},n.prototype.getRawValue=function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof Qt?t.value:t.getRawValue(),e}))},n.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},n.prototype._forEachChild=function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))},n.prototype._setUpControls=function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))},n.prototype._updateValue=function(){this.value=this._reduceValue()},n.prototype._anyControls=function(e){var n,r;try{for(var o=t.__values(Object.keys(this.controls)),i=o.next();!i.done;i=o.next()){var s=i.value,a=this.controls[s];if(this.contains(s)&&e(a))return!0}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},n.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))},n.prototype._reduceChildren=function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n},n.prototype._allControlsDisabled=function(){var e,n;try{for(var r=t.__values(Object.keys(this.controls)),o=r.next();!o.done;o=r.next()){var i=o.value;if(this.controls[i].enabled)return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},n.prototype._checkAllValuesPresent=function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")}))},n}($t),Zt=function(e){function n(t,n,r){var o=e.call(this,qt(n),Ht(r,n))||this;return o.controls=t,o._initObservables(),o._setUpdateStrategy(n),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!r}),o}return t.__extends(n,e),n.prototype.at=function(e){return this.controls[e]},n.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},n.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()},n.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(n.prototype,"length",{get:function(){return this.controls.length},enumerable:!1,configurable:!0}),n.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),e.forEach((function(e,r){n._throwIfControlMissing(r),n.at(r).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})})),this.updateValueAndValidity(t)},n.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),e.forEach((function(e,r){n.at(r)&&n.at(r).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})})),this.updateValueAndValidity(t)},n.prototype.reset=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)},n.prototype.getRawValue=function(){return this.controls.map((function(e){return e instanceof Qt?e.value:e.getRawValue()}))},n.prototype.clear=function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())},n.prototype._syncPendingControls=function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},n.prototype._forEachChild=function(e){this.controls.forEach((function(t,n){e(t,n)}))},n.prototype._updateValue=function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))},n.prototype._anyControls=function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))},n.prototype._setUpControls=function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))},n.prototype._checkAllValuesPresent=function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: "+n+".")}))},n.prototype._allControlsDisabled=function(){var e,n;try{for(var r=t.__values(this.controls),o=r.next();!o.done;o=r.next()){if(o.value.enabled)return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},n.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},n}($t),Yt={provide:Ze,useExisting:n.forwardRef((function(){return Jt}))},Kt=Promise.resolve(null),Jt=function(e){function r(t,r){var o=e.call(this)||this;return o.submitted=!1,o._directives=[],o.ngSubmit=new n.EventEmitter,o.form=new Xt({},He(t),Be(r)),o}return t.__extends(r,e),r.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(r.prototype,"formDirective",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"control",{get:function(){return this.form},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"path",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controls",{get:function(){return this.form.controls},enumerable:!1,configurable:!0}),r.prototype.addControl=function(e){var t=this;Kt.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Et(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))},r.prototype.getControl=function(e){return this.form.get(e.path)},r.prototype.removeControl=function(e){var t=this;Kt.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),Rt(t._directives,e)}))},r.prototype.addFormGroup=function(e){var t=this;Kt.then((function(){var n=t._findContainer(e.path),r=new Xt({});Dt(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))},r.prototype.removeFormGroup=function(e){var t=this;Kt.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))},r.prototype.getFormGroup=function(e){return this.form.get(e.path)},r.prototype.updateModel=function(e,t){var n=this;Kt.then((function(){n.form.get(e.path).setValue(t)}))},r.prototype.setValue=function(e){this.control.setValue(e)},r.prototype.onSubmit=function(e){return this.submitted=!0,kt(this.form,this._directives),this.ngSubmit.emit(e),!1},r.prototype.onReset=function(){this.resetForm()},r.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},r.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},r.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},r}(Ze);Jt.decorators=[{type:n.Directive,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]",providers:[Yt],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],Jt.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ne]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Re]}]}]},Jt.propDecorators={options:[{type:n.Input,args:["ngFormOptions"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var en=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return Ct(null==this.name?this.name:this.name.toString(),this._parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!1,configurable:!0}),n.prototype._checkParentType=function(){},n}(Ze);en.decorators=[{type:n.Directive}];
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var tn=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+ut+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+ht)},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+ct+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+dt)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+ct+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+dt)},e}(),nn={provide:Ze,useExisting:n.forwardRef((function(){return rn}))},rn=function(e){function n(t,n,r){var o=e.call(this)||this;return o._parent=t,o._setValidators(n),o._setAsyncValidators(r),o}return t.__extends(n,e),n.prototype._checkParentType=function(){this._parent instanceof n||this._parent instanceof Jt||"undefined"!=typeof ngDevMode&&!ngDevMode||tn.modelGroupParentException()},n}(en);
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */rn.decorators=[{type:n.Directive,args:[{selector:"[ngModelGroup]",providers:[nn],exportAs:"ngModelGroup"}]}],rn.ctorParameters=function(){return[{type:Ze,decorators:[{type:n.Host},{type:n.SkipSelf}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ne]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Re]}]}]},rn.propDecorators={name:[{type:n.Input,args:["ngModelGroup"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var on={provide:Ye,useExisting:n.forwardRef((function(){return an}))},sn=Promise.resolve(null),an=function(e){function r(t,r,o,i){var s=e.call(this)||this;return s.control=new Qt,s._registered=!1,s.update=new n.EventEmitter,s._parent=t,s._setValidators(r),s._setAsyncValidators(o),s.valueAccessor=Nt(s,i),s}return t.__extends(r,e),r.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Mt(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},r.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(r.prototype,"path",{get:function(){return this._parent?Ct(this.name,this._parent):[this.name]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!1,configurable:!0}),r.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},r.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},r.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},r.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},r.prototype._setUpStandalone=function(){Et(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},r.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},r.prototype._checkParentType=function(){("undefined"==typeof ngDevMode||ngDevMode)&&(!(this._parent instanceof rn)&&this._parent instanceof en?tn.formGroupNameException():this._parent instanceof rn||this._parent instanceof Jt||tn.modelParentException())},r.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||"undefined"!=typeof ngDevMode&&!ngDevMode||tn.missingNameException()},r.prototype._updateValue=function(e){var t=this;sn.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))},r.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;sn.then((function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()}))},r}(Ye);an.decorators=[{type:n.Directive,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[on],exportAs:"ngModel"}]}],an.ctorParameters=function(){return[{type:Ze,decorators:[{type:n.Optional},{type:n.Host}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ne]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Re]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ie]}]}]},an.propDecorators={name:[{type:n.Input}],isDisabled:[{type:n.Input,args:["disabled"]}],model:[{type:n.Input,args:["ngModel"]}],options:[{type:n.Input,args:["ngModelOptions"]}],update:[{type:n.Output,args:["ngModelChange"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var ln=function(){};ln.decorators=[{type:n.Directive,args:[{selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}}]}];
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var un=new n.InjectionToken("NgModelWithFormControlWarning"),cn={provide:Ye,useExisting:n.forwardRef((function(){return pn}))},pn=function(e){function r(t,r,o,i){var s=e.call(this)||this;return s._ngModelWarningConfig=i,s.update=new n.EventEmitter,s._ngModelWarningSent=!1,s._setValidators(t),s._setAsyncValidators(r),s.valueAccessor=Nt(s,o),s}return t.__extends(r,e),Object.defineProperty(r.prototype,"isDisabled",{set:function(e){("undefined"==typeof ngDevMode||ngDevMode)&&ft.disabledAttrWarning()},enumerable:!1,configurable:!0}),r.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Et(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Mt(e,this.viewModel)&&(("undefined"==typeof ngDevMode||ngDevMode)&&jt("formControl",r,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(r.prototype,"path",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"control",{get:function(){return this.form},enumerable:!1,configurable:!0}),r.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},r.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},r}(Ye);pn._ngModelWarningSentOnce=!1,pn.decorators=[{type:n.Directive,args:[{selector:"[formControl]",providers:[cn],exportAs:"ngForm"}]}],pn.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ne]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Re]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ie]}]},{type:String,decorators:[{type:n.Optional},{type:n.Inject,args:[un]}]}]},pn.propDecorators={form:[{type:n.Input,args:["formControl"]}],isDisabled:[{type:n.Input,args:["disabled"]}],model:[{type:n.Input,args:["ngModel"]}],update:[{type:n.Output,args:["ngModelChange"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var dn={provide:Ze,useExisting:n.forwardRef((function(){return hn}))},hn=function(e){function r(t,r){var o=e.call(this)||this;return o.validators=t,o.asyncValidators=r,o.submitted=!1,o.directives=[],o.form=null,o.ngSubmit=new n.EventEmitter,o._setValidators(t),o._setAsyncValidators(r),o}return t.__extends(r,e),r.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)},Object.defineProperty(r.prototype,"formDirective",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"control",{get:function(){return this.form},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"path",{get:function(){return[]},enumerable:!1,configurable:!0}),r.prototype.addControl=function(e){var t=this.form.get(e.path);return Et(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},r.prototype.getControl=function(e){return this.form.get(e.path)},r.prototype.removeControl=function(e){Rt(this.directives,e)},r.prototype.addFormGroup=function(e){var t=this.form.get(e.path);Dt(t,e),t.updateValueAndValidity({emitEvent:!1})},r.prototype.removeFormGroup=function(e){},r.prototype.getFormGroup=function(e){return this.form.get(e.path)},r.prototype.addFormArray=function(e){var t=this.form.get(e.path);Dt(t,e),t.updateValueAndValidity({emitEvent:!1})},r.prototype.removeFormArray=function(e){},r.prototype.getFormArray=function(e){return this.form.get(e.path)},r.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},r.prototype.onSubmit=function(e){return this.submitted=!0,kt(this.form,this.directives),this.ngSubmit.emit(e),!1},r.prototype.onReset=function(){this.resetForm()},r.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},r.prototype._updateDomValue=function(){var e=this;this.directives.forEach((function(t){var n=e.form.get(t.path);t.control!==n&&(St(t.control||null,t),n&&Et(n,t),t.control=n)})),this.form._updateTreeValidity({emitEvent:!1})},r.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange((function(){return e._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){}))},r.prototype._updateValidators=function(){It(this.form,this,!1),this._oldForm&&At(this._oldForm,this,!1)},r.prototype._checkFormPresent=function(){this.form||"undefined"!=typeof ngDevMode&&!ngDevMode||ft.missingFormException()},r}(Ze);hn.decorators=[{type:n.Directive,args:[{selector:"[formGroup]",providers:[dn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}]}],hn.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ne]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Re]}]}]},hn.propDecorators={form:[{type:n.Input,args:["formGroup"]}],ngSubmit:[{type:n.Output}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var fn={provide:Ze,useExisting:n.forwardRef((function(){return yn}))},yn=function(e){function n(t,n,r){var o=e.call(this)||this;return o._parent=t,o._setValidators(n),o._setAsyncValidators(r),o}return t.__extends(n,e),n.prototype._checkParentType=function(){gn(this._parent)&&("undefined"==typeof ngDevMode||ngDevMode)&&ft.groupParentException()},n}(en);yn.decorators=[{type:n.Directive,args:[{selector:"[formGroupName]",providers:[fn]}]}],yn.ctorParameters=function(){return[{type:Ze,decorators:[{type:n.Optional},{type:n.Host},{type:n.SkipSelf}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ne]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Re]}]}]},yn.propDecorators={name:[{type:n.Input,args:["formGroupName"]}]};var mn={provide:Ze,useExisting:n.forwardRef((function(){return vn}))},vn=function(e){function n(t,n,r){var o=e.call(this)||this;return o._parent=t,o._setValidators(n),o._setAsyncValidators(r),o}return t.__extends(n,e),n.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return Ct(null==this.name?this.name:this.name.toString(),this._parent)},enumerable:!1,configurable:!0}),n.prototype._checkParentType=function(){gn(this._parent)&&("undefined"==typeof ngDevMode||ngDevMode)&&ft.arrayParentException()},n}(Ze);function gn(e){return!(e instanceof yn||e instanceof hn||e instanceof vn)}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */vn.decorators=[{type:n.Directive,args:[{selector:"[formArrayName]",providers:[mn]}]}],vn.ctorParameters=function(){return[{type:Ze,decorators:[{type:n.Optional},{type:n.Host},{type:n.SkipSelf}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ne]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Re]}]}]},vn.propDecorators={name:[{type:n.Input,args:["formArrayName"]}]};var bn={provide:Ye,useExisting:n.forwardRef((function(){return _n}))},_n=function(e){function r(t,r,o,i,s){var a=e.call(this)||this;return a._ngModelWarningConfig=s,a._added=!1,a.update=new n.EventEmitter,a._ngModelWarningSent=!1,a._parent=t,a._setValidators(r),a._setAsyncValidators(o),a.valueAccessor=Nt(a,i),a}return t.__extends(r,e),Object.defineProperty(r.prototype,"isDisabled",{set:function(e){("undefined"==typeof ngDevMode||ngDevMode)&&ft.disabledAttrWarning()},enumerable:!1,configurable:!0}),r.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),Mt(e,this.viewModel)&&(("undefined"==typeof ngDevMode||ngDevMode)&&jt("formControlName",r,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},r.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},r.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(r.prototype,"path",{get:function(){return Ct(null==this.name?this.name:this.name.toString(),this._parent)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!1,configurable:!0}),r.prototype._checkParentType=function(){("undefined"==typeof ngDevMode||ngDevMode)&&(!(this._parent instanceof yn)&&this._parent instanceof en?ft.ngModelGroupException():this._parent instanceof yn||this._parent instanceof hn||this._parent instanceof vn||ft.controlParentException())},r.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},r}(Ye);_n._ngModelWarningSentOnce=!1,_n.decorators=[{type:n.Directive,args:[{selector:"[formControlName]",providers:[bn]}]}],_n.ctorParameters=function(){return[{type:Ze,decorators:[{type:n.Optional},{type:n.Host},{type:n.SkipSelf}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ne]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Re]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ie]}]},{type:String,decorators:[{type:n.Optional},{type:n.Inject,args:[un]}]}]},_n.propDecorators={name:[{type:n.Input,args:["formControlName"]}],isDisabled:[{type:n.Input,args:["disabled"]}],model:[{type:n.Input,args:["ngModel"]}],update:[{type:n.Output,args:["ngModelChange"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var xn={provide:Ne,useExisting:n.forwardRef((function(){return Cn})),multi:!0},wn={provide:Ne,useExisting:n.forwardRef((function(){return En})),multi:!0},Cn=function(){function e(){this._required=!1}return Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!1,configurable:!0}),e.prototype.validate=function(e){return this.required?Fe.required(e):null},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e}();Cn.decorators=[{type:n.Directive,args:[{selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[xn],host:{"[attr.required]":'required ? "" : null'}}]}],Cn.propDecorators={required:[{type:n.Input}]};var En=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.validate=function(e){return this.required?Fe.requiredTrue(e):null},n}(Cn);En.decorators=[{type:n.Directive,args:[{selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[wn],host:{"[attr.required]":'required ? "" : null'}}]}];var Sn={provide:Ne,useExisting:n.forwardRef((function(){return On})),multi:!0},On=function(){function e(){this._enabled=!1}return Object.defineProperty(e.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!1,configurable:!0}),e.prototype.validate=function(e){return this._enabled?Fe.email(e):null},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e}();On.decorators=[{type:n.Directive,args:[{selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[Sn]}]}],On.propDecorators={email:[{type:n.Input}]};var In={provide:Ne,useExisting:n.forwardRef((function(){return An})),multi:!0},An=function(){function e(){this._validator=Fe.nullValidator}return e.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},e.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e.prototype._createValidator=function(){this._validator=Fe.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))},e}();An.decorators=[{type:n.Directive,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[In],host:{"[attr.minlength]":"minlength ? minlength : null"}}]}],An.propDecorators={minlength:[{type:n.Input}]};var Vn={provide:Ne,useExisting:n.forwardRef((function(){return Dn})),multi:!0},Dn=function(){function e(){this._validator=Fe.nullValidator}return e.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},e.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e.prototype._createValidator=function(){this._validator=Fe.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))},e}();Dn.decorators=[{type:n.Directive,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[Vn],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}}]}],Dn.propDecorators={maxlength:[{type:n.Input}]};var Tn={provide:Ne,useExisting:n.forwardRef((function(){return Mn})),multi:!0},Mn=function(){function e(){this._validator=Fe.nullValidator}return e.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},e.prototype.validate=function(e){return this._validator(e)},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e.prototype._createValidator=function(){this._validator=Fe.pattern(this.pattern)},e}();Mn.decorators=[{type:n.Directive,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Tn],host:{"[attr.pattern]":"pattern ? pattern : null"}}]}],Mn.propDecorators={pattern:[{type:n.Input}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Pn=[ln,gt,wt,Me,rt,lt,Ve,vt,xt,st,et,tt,Cn,An,Dn,Mn,En,On],kn=[an,rn,Jt],Nn=[pn,hn,_n,yn,vn],Rn=function(){};Rn.decorators=[{type:n.NgModule,args:[{declarations:Pn,exports:Pn}]}];var jn=function(){function e(){}return e.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),r=null,o=null,i=void 0;return null!=t&&(!
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validator?t.validator:null,o=null!=t.asyncValidator?t.asyncValidator:null):(r=null!=t.validators?t.validators:null,o=null!=t.asyncValidators?t.asyncValidators:null,i=null!=t.updateOn?t.updateOn:void 0)),new Xt(n,{asyncValidators:o,updateOn:i,validators:r})},e.prototype.control=function(e,t,n){return new Qt(e,t,n)},e.prototype.array=function(e,t,n){var r=this,o=e.map((function(e){return r._createControl(e)}));return new Zt(o,t,n)},e.prototype._reduceControls=function(e){var t=this,n={};return Object.keys(e).forEach((function(r){n[r]=t._createControl(e[r])})),n},e.prototype._createControl=function(e){if(e instanceof Qt||e instanceof Xt||e instanceof Zt)return e;if(Array.isArray(e)){var t=e[0],n=e.length>1?e[1]:null,r=e.length>2?e[2]:null;return this.control(t,n,r)}return this.control(e)},e}();jn.decorators=[{type:n.Injectable}];
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
new n.Version("11.0.9");
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var Fn=function(){};Fn.decorators=[{type:n.NgModule,args:[{declarations:kn,providers:[it],exports:[Rn,kn]}]}],(function(){function e(){}return e.withConfig=function(t){return{ngModule:e,providers:[{provide:un,useValue:t.warnOnNgModelWithFormControl}]}},e}()).decorators=[{type:n.NgModule,args:[{declarations:[Nn],providers:[jn,it],exports:[Rn,Nn]}]}];
/**
     * @license Angular v11.0.9
     * (c) 2010-2020 Google LLC. https://angular.io/
     * License: MIT
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Un,Ln=function(e){function n(){return e.call(this)||this}return t.__extends(n,e),n.prototype.supportsDOMEvents=function(){return!0},n}(r["ɵDomAdapter"]),Gn=(function(){if(n["ɵglobal"].Node)n["ɵglobal"].Node.prototype.contains}(),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.makeCurrent=function(){r["ɵsetRootDomAdapter"](new n)},n.prototype.getProperty=function(e,t){return e[t]},n.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},n.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},n.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},n.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},n.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},n.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},n.prototype.getValue=function(e){return e.value},n.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},n.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},n.prototype.getDefaultDocument=function(){return document},n.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},n.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},n.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},n.prototype.getHistory=function(){return window.history},n.prototype.getLocation=function(){return window.location},n.prototype.getBaseHref=function(e){var t=function(){if(!qn&&!(qn=document.querySelector("base")))return null;return qn.getAttribute("href")}();return null==t?null:function(e){Un||(Un=document.createElement("a"));return Un.setAttribute("href",e),"/"===Un.pathname.charAt(0)?Un.pathname:"/"+Un.pathname}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(t)},n.prototype.resetBaseElement=function(){qn=null},n.prototype.getUserAgent=function(){return window.navigator.userAgent},n.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},n.prototype.supportsCookies=function(){return!0},n.prototype.getCookie=function(e){return r["ɵparseCookieValue"](document.cookie,e)},n}(Ln)),qn=null;
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var zn=new n.InjectionToken("TRANSITION_ID");var Hn=[{provide:n.APP_INITIALIZER,useFactory:function(e,t,o){return function(){o.get(n.ApplicationInitStatus).donePromise.then((function(){var n=r["ɵgetDOM"]();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[zn,r.DOCUMENT,n.Injector],multi:!0}],Bn=function(){function e(){}return e.init=function(){n.setTestabilityGetter(new e)},e.prototype.addToWindow=function(e){n["ɵglobal"].getAngularTestability=function(t,n){void 0===n&&(n=!0);var r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},n["ɵglobal"].getAllAngularTestabilities=function(){return e.getAllTestabilities()},n["ɵglobal"].getAllAngularRootElements=function(){return e.getAllRootElements()};n["ɵglobal"].frameworkStabilizers||(n["ɵglobal"].frameworkStabilizers=[]),n["ɵglobal"].frameworkStabilizers.push((function(e){var t=n["ɵglobal"].getAllAngularTestabilities(),r=t.length,o=!1,i=function(t){o=o||t,0==--r&&e(o)};t.forEach((function(e){e.whenStable(i)}))}))},e.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var o=e.getTestability(t);return null!=o?o:n?r["ɵgetDOM"]().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Wn(e,t){"undefined"!=typeof COMPILED&&COMPILED||((n["ɵglobal"].ng=n["ɵglobal"].ng||{})[e]=t)}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var $n={ApplicationRef:n.ApplicationRef,NgZone:n.NgZone};function Qn(e){return n["ɵgetDebugNodeR2"](e)}var Xn=[{provide:n.APP_INITIALIZER,useFactory:function(e){return Wn("probe",Qn),Wn("coreTokens",Object.assign(Object.assign({},$n),(e||[]).reduce((function(e,t){return e[t.name]=t.token,e}),{}))),function(){return Qn}},deps:[[n.NgProbeToken,new n.Optional]],multi:!0}],Zn=new n.InjectionToken("EventManagerPlugins"),Yn=function(){function e(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach((function(e){return e.manager=n})),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},e.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},e}();Yn.decorators=[{type:n.Injectable}],Yn.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Inject,args:[Zn]}]},{type:n.NgZone}]};var Kn=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,t,n){var o=r["ɵgetDOM"]().getGlobalEventTarget(this._doc,e);if(!o)throw new Error("Unsupported event target "+o+" for event "+t);return this.addEventListener(o,t,n)},e}(),Jn=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */Jn.decorators=[{type:n.Injectable}];var er=function(e){function n(t){var n=e.call(this)||this;return n._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return t.__extends(n,e),n.prototype._addStylesToHost=function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))},n.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},n.prototype.removeHost=function(e){this._hostNodes.delete(e)},n.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))},n.prototype.ngOnDestroy=function(){this._styleNodes.forEach((function(e){return r["ɵgetDOM"]().remove(e)}))},n}(Jn);er.decorators=[{type:n.Injectable}],er.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var tr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nr=/%COMP%/g,rr="undefined"==typeof ngDevMode||!!ngDevMode,or="_nghost-%COMP%",ir="_ngcontent-%COMP%";function sr(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?sr(e,o,n):(o=o.replace(nr,e),n.push(o))}return n}function ar(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var lr=!1,ur=function(){function e(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new cr(e)}return e.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case n.ViewEncapsulation.Emulated:var r=this.rendererByCompId.get(t.id);return r||(r=new hr(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,r)),r.applyToHost(e),r;case 1:case n.ViewEncapsulation.ShadowDom:return"undefined"!=typeof ngDevMode&&!ngDevMode||lr||1!==t.encapsulation||(lr=!0,console.warn("ViewEncapsulation.Native is no longer supported. Falling back to ViewEncapsulation.ShadowDom. The fallback will be removed in v12.")),new fr(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var o=sr(t.id,t.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}();ur.decorators=[{type:n.Injectable}],ur.ctorParameters=function(){return[{type:Yn},{type:er},{type:String,decorators:[{type:n.Inject,args:[n.APP_ID]}]}]};var cr=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,t){return t?document.createElementNS(tr[t]||t,e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,t){e.appendChild(t)},e.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},e.prototype.removeChild=function(e,t){e&&e.removeChild(t)},e.prototype.selectRootElement=function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'+e+'" did not match any elements');return t||(n.textContent=""),n},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,t,n,r){if(r){t=r+":"+t;var o=tr[r];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},e.prototype.removeAttribute=function(e,t,n){if(n){var r=tr[n];r?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},e.prototype.addClass=function(e,t){e.classList.add(t)},e.prototype.removeClass=function(e,t){e.classList.remove(t)},e.prototype.setStyle=function(e,t,r,o){o&(n.RendererStyleFlags2.DashCase|n.RendererStyleFlags2.Important)?e.style.setProperty(t,r,o&n.RendererStyleFlags2.Important?"important":""):e.style[t]=r},e.prototype.removeStyle=function(e,t,r){r&n.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},e.prototype.setProperty=function(e,t,n){rr&&dr(t,"property"),e[t]=n},e.prototype.setValue=function(e,t){e.nodeValue=t},e.prototype.listen=function(e,t,n){return rr&&dr(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ar(n)):this.eventManager.addEventListener(e,t,ar(n))},e}(),pr="@".charCodeAt(0);function dr(e,t){if(e.charCodeAt(0)===pr)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var hr=function(e){function n(t,n,r,o){var i=e.call(this,t)||this;i.component=r;var s,a=sr(o+"-"+r.id,r.styles,[]);return n.addStyles(a),i.contentAttr=(s=o+"-"+r.id,ir.replace(nr,s)),i.hostAttr=function(e){return or.replace(nr,e)}(o+"-"+r.id),i}return t.__extends(n,e),n.prototype.applyToHost=function(t){e.prototype.setAttribute.call(this,t,this.hostAttr,"")},n.prototype.createElement=function(t,n){var r=e.prototype.createElement.call(this,t,n);return e.prototype.setAttribute.call(this,r,this.contentAttr,""),r},n}(cr),fr=function(e){function n(t,n,r,o){var i=e.call(this,t)||this;i.sharedStylesHost=n,i.hostEl=r,i.shadowRoot=r.attachShadow({mode:"open"}),i.sharedStylesHost.addHost(i.shadowRoot);for(var s=sr(o.id,o.styles,[]),a=0;a<s.length;a++){var l=document.createElement("style");l.textContent=s[a],i.shadowRoot.appendChild(l)}return i}return t.__extends(n,e),n.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},n.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},n.prototype.appendChild=function(t,n){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(t),n)},n.prototype.insertBefore=function(t,n,r){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(t),n,r)},n.prototype.removeChild=function(t,n){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(t),n)},n.prototype.parentNode=function(t){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(t)))},n}(cr),yr=function(e){function n(t){return e.call(this,t)||this}return t.__extends(n,e),n.prototype.supports=function(e){return!0},n.prototype.addEventListener=function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}},n.prototype.removeEventListener=function(e,t,n){return e.removeEventListener(t,n)},n}(Kn);yr.decorators=[{type:n.Injectable}],yr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var mr={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},vr=new n.InjectionToken("HammerGestureConfig"),gr=new n.InjectionToken("HammerLoader"),br=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},e}();br.decorators=[{type:n.Injectable}];var _r=function(e){function n(t,n,r,o){var i=e.call(this,t)||this;return i._config=n,i.console=r,i.loader=o,i}return t.__extends(n,e),n.prototype.supports=function(e){return!(!mr.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))&&(!(!window.Hammer&&!this.loader)||(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),!1))},n.prototype.addEventListener=function(e,t,n){var r=this,o=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var i=!1,s=function(){i=!0};return this.loader().then((function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=function(){});i||(s=r.addEventListener(e,t,n))})).catch((function(){r.console.warn('The "'+t+'" event cannot be bound because the custom Hammer.JS loader failed.'),s=function(){}})),function(){s()}}return o.runOutsideAngular((function(){var i=r._config.buildHammer(e),s=function(e){o.runGuarded((function(){n(e)}))};return i.on(t,s),function(){i.off(t,s),"function"==typeof i.destroy&&i.destroy()}}))},n.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},n}(Kn);_r.decorators=[{type:n.Injectable}],_r.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]},{type:br,decorators:[{type:n.Inject,args:[vr]}]},{type:n["ɵConsole"]},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[gr]}]}]};var xr=[{provide:Zn,useClass:_r,multi:!0,deps:[r.DOCUMENT,vr,n["ɵConsole"],[new n.Optional,gr]]},{provide:vr,useClass:br,deps:[]}],wr=xr;n.NgModule;
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Cr=["alt","control","meta","shift"],Er={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"},Or={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Ir=function(e){function n(t){return e.call(this,t)||this}return t.__extends(n,e),n.prototype.supports=function(e){return null!=n.parseEventName(e)},n.prototype.addEventListener=function(e,t,o){var i=n.parseEventName(t),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return r["ɵgetDOM"]().onAndCancel(e,i.domEventName,s)}))},n.parseEventName=function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var o=n._normalizeKey(t.pop()),i="";if(Cr.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),i+=e+".")})),i+=o,0!=t.length||0===o.length)return null;var s={};return s.domEventName=r,s.fullKey=i,s},n.getEventFullKey=function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Sr.hasOwnProperty(t)&&(t=Sr[t]))}return Er[t]||t}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Cr.forEach((function(r){r!=n&&((0,Or[r])(e)&&(t+=r+"."))})),t+=n},n.eventCallback=function(e,t,r){return function(o){n.getEventFullKey(o)===e&&r.runGuarded((function(){return t(o)}))}},n._normalizeKey=function(e){return"esc"===e?"escape":e},n}(Kn);Ir.decorators=[{type:n.Injectable}],Ir.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};var Ar=function(){};function Vr(e){return new Dr(e.get(r.DOCUMENT))}Ar.ɵprov=n["ɵɵdefineInjectable"]({factory:function(){return n["ɵɵinject"](Dr)},token:Ar,providedIn:"root"}),Ar.decorators=[{type:n.Injectable,args:[{providedIn:"root",useExisting:n.forwardRef((function(){return Dr}))}]}];var Dr=function(e){function r(t){var n=e.call(this)||this;return n._doc=t,n}return t.__extends(r,e),r.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case n.SecurityContext.NONE:return t;case n.SecurityContext.HTML:return n["ɵallowSanitizationBypassAndThrow"](t,"HTML")?n["ɵunwrapSafeValue"](t):n["ɵ_sanitizeHtml"](this._doc,String(t));case n.SecurityContext.STYLE:return n["ɵallowSanitizationBypassAndThrow"](t,"Style")?n["ɵunwrapSafeValue"](t):t;case n.SecurityContext.SCRIPT:if(n["ɵallowSanitizationBypassAndThrow"](t,"Script"))return n["ɵunwrapSafeValue"](t);throw new Error("unsafe value used in a script context");case n.SecurityContext.URL:n["ɵgetSanitizationBypassType"](t);return n["ɵallowSanitizationBypassAndThrow"](t,"URL")?n["ɵunwrapSafeValue"](t):n["ɵ_sanitizeUrl"](String(t));case n.SecurityContext.RESOURCE_URL:if(n["ɵallowSanitizationBypassAndThrow"](t,"ResourceURL"))return n["ɵunwrapSafeValue"](t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see https://g.co/ng/security#xss)")}},r.prototype.bypassSecurityTrustHtml=function(e){return n["ɵbypassSanitizationTrustHtml"](e)},r.prototype.bypassSecurityTrustStyle=function(e){return n["ɵbypassSanitizationTrustStyle"](e)},r.prototype.bypassSecurityTrustScript=function(e){return n["ɵbypassSanitizationTrustScript"](e)},r.prototype.bypassSecurityTrustUrl=function(e){return n["ɵbypassSanitizationTrustUrl"](e)},r.prototype.bypassSecurityTrustResourceUrl=function(e){return n["ɵbypassSanitizationTrustResourceUrl"](e)},r}(Ar);Dr.ɵprov=n["ɵɵdefineInjectable"]({factory:function(){return Vr(n["ɵɵinject"](n.INJECTOR))},token:Dr,providedIn:"root"}),Dr.decorators=[{type:n.Injectable,args:[{providedIn:"root",useFactory:Vr,deps:[n.Injector]}]}],Dr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};var Tr=r["ɵPLATFORM_BROWSER_ID"],Mr=[{provide:n.PLATFORM_ID,useValue:Tr},{provide:n.PLATFORM_INITIALIZER,useValue:
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function(){Gn.makeCurrent(),Bn.init()},multi:!0},{provide:r.DOCUMENT,useFactory:function(){return n["ɵsetDocument"](document),document},deps:[]}],Pr=[{provide:n.Sanitizer,useExisting:Ar},{provide:Ar,useClass:Dr,deps:[r.DOCUMENT]}],kr=(n.createPlatformFactory(n.platformCore,"browser",Mr),[Pr,{provide:n["ɵINJECTOR_SCOPE"],useValue:"root"},{provide:n.ErrorHandler,useFactory:function(){return new n.ErrorHandler},deps:[]},{provide:Zn,useClass:yr,multi:!0,deps:[r.DOCUMENT,n.NgZone,n.PLATFORM_ID]},{provide:Zn,useClass:Ir,multi:!0,deps:[r.DOCUMENT]},wr,{provide:ur,useClass:ur,deps:[Yn,er,n.APP_ID]},{provide:n.RendererFactory2,useExisting:ur},{provide:Jn,useExisting:er},{provide:er,useClass:er,deps:[r.DOCUMENT]},{provide:n.Testability,useClass:n.Testability,deps:[n.NgZone]},{provide:Yn,useClass:Yn,deps:[Zn,n.NgZone]},Xn]),Nr=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return e.withServerTransition=function(t){return{ngModule:e,providers:[{provide:n.APP_ID,useValue:t.appId},{provide:zn,useExisting:n.APP_ID},Hn]}},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function Rr(){return new jr(n["ɵɵinject"](r.DOCUMENT))}Nr.decorators=[{type:n.NgModule,args:[{providers:kr,exports:[r.CommonModule,n.ApplicationModule]}]}],Nr.ctorParameters=function(){return[{type:Nr,decorators:[{type:n.Optional},{type:n.SkipSelf},{type:n.Inject,args:[Nr]}]}]};var jr=function(){function e(e){this._doc=e,this._dom=r["ɵgetDOM"]()}return e.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},e.prototype.addTags=function(e,t){var n=this;return void 0===t&&(t=!1),e?e.reduce((function(e,r){return r&&e.push(n._getOrCreateElement(r,t)),e}),[]):[]},e.prototype.getTag=function(e){return e&&this._doc.querySelector("meta["+e+"]")||null},e.prototype.getTags=function(e){if(!e)return[];var t=this._doc.querySelectorAll("meta["+e+"]");return t?[].slice.call(t):[]},e.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);var n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)},e.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},e.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},e.prototype._getOrCreateElement=function(e,t){if(void 0===t&&(t=!1),!t){var n=this._parseSelector(e),r=this.getTag(n);if(r&&this._containsAttributes(e,r))return r}var o=this._dom.createElement("meta");return this._setMetaElementAttributes(e,o),this._doc.getElementsByTagName("head")[0].appendChild(o),o},e.prototype._setMetaElementAttributes=function(e,t){var n=this;return Object.keys(e).forEach((function(r){return t.setAttribute(n._getMetaKeyMap(r),e[r])})),t},e.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},e.prototype._containsAttributes=function(e,t){var n=this;return Object.keys(e).every((function(r){return t.getAttribute(n._getMetaKeyMap(r))===e[r]}))},e.prototype._getMetaKeyMap=function(e){return Fr[e]||e},e}();jr.ɵprov=n["ɵɵdefineInjectable"]({factory:Rr,token:jr,providedIn:"root"}),jr.decorators=[{type:n.Injectable,args:[{providedIn:"root",useFactory:Rr,deps:[]}]}],jr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};var Fr={httpEquiv:"http-equiv"};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Ur(){return new Lr(n["ɵɵinject"](r.DOCUMENT))}var Lr=function(){function e(e){this._doc=e}return e.prototype.getTitle=function(){return this._doc.title},e.prototype.setTitle=function(e){this._doc.title=e||""},e}();Lr.ɵprov=n["ɵɵdefineInjectable"]({factory:Ur,token:Lr,providedIn:"root"}),Lr.decorators=[{type:n.Injectable,args:[{providedIn:"root",useFactory:Ur,deps:[]}]}],Lr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Gr="undefined"!=typeof window&&window||{},qr=function(e,t){this.msPerTick=e,this.numTicks=t};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */!function(){function e(e){this.appRef=e.injector.get(n.ApplicationRef)}e.prototype.timeChangeDetection=function(e){var t=e&&e.record,n="Change Detection",o=null!=Gr.console.profile;t&&o&&Gr.console.profile(n);for(var i=r["ɵgetDOM"]().performanceNow(),s=0;s<5||r["ɵgetDOM"]().performanceNow()-i<500;)this.appRef.tick(),s++;var a=r["ɵgetDOM"]().performanceNow();t&&o&&Gr.console.profileEnd(n);var l=(a-i)/s;return Gr.console.log("ran "+s+" change detection cycles"),Gr.console.log(l.toFixed(2)+" ms per check"),new qr(l,s)}}();var zr=function(){function e(){this.store={},this.onSerializeCallbacks={}}return e.init=function(t){var n=new e;return n.store=t,n},e.prototype.get=function(e,t){return void 0!==this.store[e]?this.store[e]:t},e.prototype.set=function(e,t){this.store[e]=t},e.prototype.remove=function(e){delete this.store[e]},e.prototype.hasKey=function(e){return this.store.hasOwnProperty(e)},e.prototype.onSerialize=function(e,t){this.onSerializeCallbacks[e]=t},e.prototype.toJson=function(){for(var e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)},e}();zr.decorators=[{type:n.Injectable}],n.NgModule,r.DOCUMENT,n.APP_ID;
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
!function(){function e(){}e.all=function(){return function(){return!0}},e.css=function(e){return function(t){return null!=t.nativeElement&&function(e,t){if(r["ɵgetDOM"]().isElementNode(e))return e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t);return!1}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(t.nativeElement,e)}},e.directive=function(e){return function(t){return-1!==t.providerTokens.indexOf(e)}}}();new n.Version("11.0.9");
/**
     * @license Angular v11.0.9
     * (c) 2010-2020 Google LLC. https://angular.io/
     * License: MIT
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var Hr=function(e){function r(t,r){var o=e.call(this)||this;o._nextAnimationId=0;var i={id:"0",encapsulation:n.ViewEncapsulation.None,styles:[],data:{animation:[]}};return o._renderer=t.createRenderer(r.body,i),o}return t.__extends(r,e),r.prototype.build=function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?u.sequence(e):e;return $r(this._renderer,null,t,"register",[n]),new Br(t,this._renderer)},r}(u.AnimationBuilder);Hr.decorators=[{type:n.Injectable}],Hr.ctorParameters=function(){return[{type:n.RendererFactory2},{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};var Br=function(e){function n(t,n){var r=e.call(this)||this;return r._id=t,r._renderer=n,r}return t.__extends(n,e),n.prototype.create=function(e,t){return new Wr(this._id,e,t||{},this._renderer)},n}(u.AnimationFactory),Wr=function(){function e(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return e.prototype._listen=function(e,t){return this._renderer.listen(this.element,"@@"+this.id+":"+e,t)},e.prototype._command=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return $r(this._renderer,this.element,this.id,e,t)},e.prototype.onDone=function(e){this._listen("done",e)},e.prototype.onStart=function(e){this._listen("start",e)},e.prototype.onDestroy=function(e){this._listen("destroy",e)},e.prototype.init=function(){this._command("init")},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this._command("play"),this._started=!0},e.prototype.pause=function(){this._command("pause")},e.prototype.restart=function(){this._command("restart")},e.prototype.finish=function(){this._command("finish")},e.prototype.destroy=function(){this._command("destroy")},e.prototype.reset=function(){this._command("reset")},e.prototype.setPosition=function(e){this._command("setPosition",e)},e.prototype.getPosition=function(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0},e}();function $r(e,t,n,r,o){return e.setProperty(t,"@@"+n+":"+r,o)}var Qr="@",Xr="@.disabled",Zr=function(){function e(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return e.prototype.createRenderer=function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var o=this._rendererCache.get(r);return o||(o=new Yr("",r,this.engine),this._rendererCache.set(r,o)),o}var i=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);var a=function(t){Array.isArray(t)?t.forEach(a):n.engine.registerTrigger(i,s,e,t.name,t)};return t.data.animation.forEach(a),new Kr(this,s,r,this.engine)},e.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},e.prototype._scheduleCountTask=function(){var e=this;this.promise.then((function(){e._microtaskId++}))},e.prototype.scheduleListenerCallback=function(e,n,r){var o=this;e>=0&&e<this._microtaskId?this._zone.run((function(){return n(r)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){o._zone.run((function(){o._animationCallbacksBuffer.forEach((function(e){var n=t.__read(e,2);(0,n[0])(n[1])})),o._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([n,r]))},e.prototype.end=function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)})),this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},e}();Zr.decorators=[{type:n.Injectable}],Zr.ctorParameters=function(){return[{type:n.RendererFactory2},{type:c["ɵAnimationEngine"]},{type:n.NgZone}]};var Yr=function(){function e(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(e){return t.destroyNode(e)}:null}return Object.defineProperty(e.prototype,"data",{get:function(){return this.delegate.data},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},e.prototype.createElement=function(e,t){return this.delegate.createElement(e,t)},e.prototype.createComment=function(e){return this.delegate.createComment(e)},e.prototype.createText=function(e){return this.delegate.createText(e)},e.prototype.appendChild=function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)},e.prototype.insertBefore=function(e,t,n,r){void 0===r&&(r=!0),this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)},e.prototype.removeChild=function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)},e.prototype.selectRootElement=function(e,t){return this.delegate.selectRootElement(e,t)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setAttribute=function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)},e.prototype.removeAttribute=function(e,t,n){this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,r){this.delegate.setStyle(e,t,n,r)},e.prototype.removeStyle=function(e,t,n){this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){t.charAt(0)==Qr&&t==Xr?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)},e.prototype.setValue=function(e,t){this.delegate.setValue(e,t)},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.disableAnimations=function(e,t){this.engine.disableAnimations(e,t)},e}(),Kr=function(e){function n(t,n,r,o){var i=e.call(this,n,r,o)||this;return i.factory=t,i.namespaceId=n,i}return t.__extends(n,e),n.prototype.setProperty=function(e,t,n){t.charAt(0)==Qr?"."==t.charAt(1)&&t==Xr?(n=void 0===n||!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)},n.prototype.listen=function(e,n,r){var o,i=this;if(n.charAt(0)==Qr){var s=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),a=n.substr(1),l="";return a.charAt(0)!=Qr&&(o=t.__read(function(e){var t=e.indexOf("."),n=e.substring(0,t),r=e.substr(t+1);return[n,r]}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(a),2),a=o[0],l=o[1]),this.engine.listen(this.namespaceId,s,a,l,(function(e){var t=e._data||-1;i.factory.scheduleListenerCallback(t,r,e)}))}return this.delegate.listen(e,n,r)},n}(Yr);var Jr=function(e){function n(t,n,r){return e.call(this,t.body,n,r)||this}return t.__extends(n,e),n}(c["ɵAnimationEngine"]);Jr.decorators=[{type:n.Injectable}],Jr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]},{type:c.AnimationDriver},{type:c["ɵAnimationStyleNormalizer"]}]};var eo=new n.InjectionToken("AnimationModuleType"),to=[{provide:u.AnimationBuilder,useClass:Hr},{provide:c["ɵAnimationStyleNormalizer"],useFactory:function(){return new c["ɵWebAnimationsStyleNormalizer"]}},{provide:c["ɵAnimationEngine"],useClass:Jr},{provide:n.RendererFactory2,useFactory:function(e,t,n){return new Zr(e,t,n)},deps:[ur,c["ɵAnimationEngine"],n.NgZone]}],no=t.__spread([{provide:c.AnimationDriver,useFactory:function(){return c["ɵsupportsWebAnimations"]()?new c["ɵWebAnimationsDriver"]:new c["ɵCssKeyframesDriver"]}},{provide:eo,useValue:"BrowserAnimations"}],to),ro=(t.__spread([{provide:c.AnimationDriver,useClass:c["ɵNoopAnimationDriver"]},{provide:eo,useValue:"NoopAnimations"}],to),function(){});ro.decorators=[{type:n.NgModule,args:[{exports:[Nr],providers:no}]}],n.NgModule;var oo=function(){function e(e){this.ruleEditorService=e,this.lhcStyle={},this.variableType=oe,this.levels=[{level:0,name:"Top Level Scope"}]}return e.prototype.ngOnInit=function(){var e=this;this.variables=this.ruleEditorService.variables,this.variableSubscription=this.ruleEditorService.variablesChange.subscribe((function(t){e.variables=t}))},e.prototype.ngOnChanges=function(e){var t=this;if(e.advancedInterface&&(this.variableType=this.advancedInterface?re:oe,this.variables)){var n=[];this.variables.forEach((function(e,t){n[t]=e.type,e.type=""})),setTimeout((function(){n.forEach((function(e,n){t.variables[n].type=e}))}),10)}},e.prototype.ngDestroy=function(){this.variableSubscription.unsubscribe()},e.prototype.onAdd=function(){this.ruleEditorService.addVariable()},e.prototype.onRemove=function(e){this.ruleEditorService.remove(e)},e.prototype.drop=function(e){i.moveItemInArray(this.variables,e.previousIndex,e.currentIndex)},e.prototype.onNameChange=function(){this.ruleEditorService.update()},e.prototype.onTypeChange=function(e){"query"===e.target.value||"expression"===e.target.value?this.ruleEditorService.checkAdvancedInterface(!0):this.ruleEditorService.checkAdvancedInterface()},e.prototype.getAvailableVariables=function(e){var t=this.ruleEditorService.uneditableVariables.map((function(e){return e.name})),n=this.variables.map((function(e){return e.label})).slice(0,e);return t.concat(n)},e.prototype.updateExpression=function(e,t){this.variables[e].expression=t},e.prototype.updateSimpleExpression=function(e,t){this.variables[e].simple=t},e}();oo.decorators=[{type:n.Component,args:[{selector:"lhc-variables",template:'<h2 [style]="lhcStyle.h2">Variables</h2>\n\n<div class="container">\n  <div class="variable-header" [style]="lhcStyle.variableHeader" aria-hidden="true">\n    <div class="variable-column-label">Label</div>\n    <div class="variable-column-type">Variable Type</div>\n    <div class="variable-column-details">Question/FHIRPath Expression/FHIR Query</div>\n  </div>\n  <div cdkDropList (cdkDropListDropped)="drop($event)">\n    <div class="variable-row drag-variable" [style]="lhcStyle.variableRow" *ngFor="let variable of variables; index as i" [id]="\'row-\' + i" cdkDrag>\n      <div class="variable-column-label">\n        \x3c!-- Inline SVG for the row drag and drop handle --\x3e\n        <svg cdkDragHandle xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="handle" viewBox="0 0 16 16">\n          <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n        </svg>\n        <input [id]="\'variable-label-\' + i" [(ngModel)]="variable.label" (change)="onNameChange()" [style]="lhcStyle.input" class="label" aria-label="Variable label" />\n      </div>\n      <div class="variable-column-type">\n        <select [id]="\'variable-type-\' + i" [(ngModel)]="variable.type" (change)="onTypeChange($event)" [style]="lhcStyle.select" aria-label="Variable type">\n          <option value="" disabled hidden>Select...</option>\n          <option *ngFor="let type of variableType | keyvalue" value="{{type.key}}">{{type.value}}</option>\n        </select>\n      </div>\n      <div class="variable-column-details" [ngSwitch]="variable.type">\n        <lhc-question [variable]="variable" *ngSwitchCase="\'question\'" [lhcStyle]="lhcStyle"></lhc-question>\n        <lhc-query-observation [variable]="variable" [index]="i" *ngSwitchCase="\'queryObservation\'" [lhcStyle]="lhcStyle"></lhc-query-observation>\n        <div class="form-inline" *ngSwitchCase="\'simple\'">\n          <lhc-syntax-converter\n            [id]="\'variable-expression-\' + i"\n            [simple]="variable.simple"\n            [variables]="getAvailableVariables(i)"\n            [lhcStyle]="lhcStyle"\n            (simpleChange)="updateSimpleExpression(i, $event)"\n            (expressionChange)="updateExpression(i, $event)">\n          </lhc-syntax-converter>\n        </div>\n        <div class="form-inline" *ngSwitchCase="\'expression\'">\n          <input [id]="\'variable-expression-\' + i" [(ngModel)]="variable.expression" [style]="lhcStyle.input" aria-label="FHIRPath Expression" />\n        </div>\n        <div class="form-inline" *ngSwitchCase="\'query\'">\n          <input [id]="\'variable-expression-\' + i" [(ngModel)]="variable.expression" [style]="lhcStyle.input"\n                 aria-label="FHIR Query" placeholder="x-fhir-query" />\n        </div>\n      </div>\n      <div class="variable-column-actions">\n        <button class="btn btn-danger remove-variable" aria-label="Remove variable" title="Remove variable" [style]="lhcStyle.buttonDanger" (click)="onRemove(i)">x</button>\n      </div>\n    </div>\n    <div *ngIf="!variables.length" class="no-variables">No variables, please <a href="#" (click)="onAdd()">add one</a>.</div>\n  </div>\n</div>\n\n<button id="add-variable" class="btn btn-secondary mt-2" (click)="onAdd()" [ngStyle]="lhcStyle.buttonSecondary">Add variable</button>\n',styles:["*{box-sizing:border-box}.variable-header,.variable-row{display:flex;flex-direction:row;flex-wrap:wrap}.variable-header>.variable-column-label{padding-left:1.6em}.variable-column-label>input,.variable-column-type select{width:100%;height:2rem;font-size:1rem}.variable-column-details,.variable-column-label,.variable-column-type{padding:.5rem}.variable-column-label{display:flex;flex:0 0 12em}.label{flex-grow:100}.variable-column-type{flex:0 0 15em}.variable-column-details{flex:1 0 25em;min-width:0}.variable-column-actions button{height:2rem;width:2rem;background-color:#8b0000;color:#fff;padding:0}.variable-column-actions{flex:0 0 auto;padding-top:.5rem;padding-left:.5rem}@media (max-width:975px){.variable-row{flex-direction:column}.variable-column-label,.variable-column-type{flex:100%}.variable-column-details{flex:20 0 10em}.variable-column-actions{flex:auto}}.drag-variable{padding:.75rem 0;border-top:1px solid rgba(0,0,0,.1);color:rgba(0,0,0,.87);display:flex;flex-direction:row;justify-content:space-between;box-sizing:border-box;background:#fff}.handle{cursor:move;margin-top:.4rem}.no-variables{padding:2rem}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}input,select{height:2rem;font-size:1rem;width:100%;margin-bottom:1rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}button{height:2.5rem;border:none;border-radius:4px;padding:0 2em;font-size:1rem}"]}]}],oo.ctorParameters=function(){return[{type:Se}]},oo.propDecorators={lhcStyle:[{type:n.Input}],advancedInterface:[{type:n.Input}]};var io=function(){function e(e){this.variableService=e}return e.prototype.ngOnInit=function(){var e=this;this.uneditableVariables=this.variableService.uneditableVariables,this.uneditableVariablesSubscription=this.variableService.uneditableVariablesChange.subscribe((function(t){e.uneditableVariables=t}))},e.prototype.ngDestroy=function(){this.uneditableVariablesSubscription.unsubscribe()},e}();io.decorators=[{type:n.Component,args:[{selector:"lhc-uneditable-variables",template:'<div *ngIf="uneditableVariables.length">\n  <h2>Variables in Scope for This Item</h2>\n\n  <div class="container">\n    <div class="variable-header">\n      <div class="variable-column-label">Label</div>\n      <div class="variable-column-type">Variable Type</div>\n      <div class="variable-column-details">Description</div>\n    </div>\n    <div class="variable-row" *ngFor="let variable of uneditableVariables">\n      <div class="variable-column-label">{{variable.name}}</div>\n      <div class="variable-column-type">{{variable.type}}</div>\n      <div class="variable-column-details">{{variable.description}}</div>\n    </div>\n  </div>\n</div>\n',styles:["*{box-sizing:border-box}.variable-header,.variable-row{display:flex;flex-direction:row;flex-wrap:wrap}.variable-row{border-top:1px solid rgba(0,0,0,.1)}.variable-column-details,.variable-column-label,.variable-column-type{padding:.5rem}.variable-column-label{display:flex;flex:0 0 12em}.variable-column-type{flex:0 0 15em}.variable-column-details{flex:1 0 25em;min-width:0}@media (max-width:975px){.variable-row{flex-direction:column}.variable-column-label,.variable-column-type{flex:100%}.variable-column-details{flex:auto}}"]}]}],io.ctorParameters=function(){return[{type:Se}]};var so=function(){function e(e){this.variableService=e,this.lhcStyle={},this.linkId="",this.itemHasScore=!1,this.isNonConvertibleUnit=!1}return e.prototype.ngOnInit=function(){var e=this;this.linkId=this.variable.linkId?this.variable.linkId:"",this.toUnit=this.variable.unit?this.variable.unit:"",this.questions=this.variableService.questions,this.onChange(!1),this.variableService.questionsChange.subscribe((function(t){e.questions=t}))},e.prototype.getQuestion=function(e){return this.questions.find((function(t){return t.linkId===e}))},e.prototype.getConversionOptions=function(e){return Ee[e]},e.prototype.onChange=function(e){if(e&&(this.toUnit=""),this.linkId){var t=this.getQuestion(this.linkId);this.unit=null==t?void 0:t.unit,this.conversionOptions=this.getConversionOptions(this.unit),this.isNonConvertibleUnit=this.unit&&!this.conversionOptions,this.conversionOptions||this.isNonConvertibleUnit?this.itemHasScore=!1:this.itemHasScore=this.variableService.itemHasScore(this.linkId),this.variable.expression=this.variableService.valueOrScoreExpression(this.linkId,this.itemHasScore,!this.isNonConvertibleUnit,this.unit,this.toUnit)}},e}();so.decorators=[{type:n.Component,args:[{selector:"lhc-question",template:'<div class="form-inline question">\n  <div class="question-select">\n    <select [(ngModel)]="linkId" (change)="onChange(true)" [style]="lhcStyle.select" aria-label="Question">\n      <option value="" disabled hidden>Select...</option>\n      <option *ngFor="let question of questions" [value]="question.linkId">\n        {{question.text + \' (\' + question.linkId + \')\'}}\n      </option>\n    </select>\n  </div>\n\n  <div class="unit-select">\n    <select *ngIf="conversionOptions" [(ngModel)]="toUnit" [style]="lhcStyle.select"\n            (change)="onChange(false)" aria-label="Unit conversion">\n      <option value="">Keep form units ({{unit}})</option>\n      <option *ngFor="let u of conversionOptions" value="{{u.unit}}">Convert to {{u.unit}}</option>\n    </select>\n\n    <div *ngIf="isNonConvertibleUnit" class="detail">{{unit}}</div>\n    <div *ngIf="itemHasScore" class="detail">Score</div>\n  </div>\n</div>\n\n<lhc-syntax-preview [syntax]="variable.expression" [lhcStyle]="lhcStyle"></lhc-syntax-preview>\n',styles:[".question{display:flex;flex-wrap:wrap;flex-direction:row}.detail{margin-top:.5rem}.question-select,.unit-select{box-sizing:border-box;margin-bottom:.5rem}.question-select{flex:50%;padding-right:.5rem}.unit-select{flex:50%;padding-left:.5rem}select{width:100%;font-size:1rem;height:2rem}@media (max-width:975px){.question{flex-direction:column}.question-select,.unit-select{flex:100%;padding:0}}input,select{height:2rem;font-size:1rem;width:100%;margin-bottom:.5rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}"]}]}],so.ctorParameters=function(){return[{type:Se}]},so.propDecorators={variable:[{type:n.Input}],lhcStyle:[{type:n.Input}]};var ao=function(){function e(e){this.ruleEditorService=e,this.lhcStyle={},this.export=new n.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.onCloseClick=function(){this.ruleEditorService.toggleMightBeScore()},e.prototype.onExportClick=function(){this.export.emit()},e}();function lo(e,t){return function(e,t){for(var n=e.length,r="",o=0;o<n;o++)if(/[a-zA-Z0-9.,\s()\\-]/.test(e[o]))if(r.length>0){if(!uo.includes(r))return!1;for(var i=!0,s=o-r.length-1;i;)if(/[\s]/.test(e[s]))s-=1;else{if(!/[a-zA-Z0-9.,)\\-]/.test(e[s]))return!1;i=!1}var a=!0,l=o;if(l>n-1)return!1;for(;a;)if(/[\s]/.test(e[l]))l+=1;else{if(!/[a-zA-Z0-9.(\\-]/.test(e[l]))return!1;a=!1}r=""}else r="";else if(r+=e[o],o==n-1||0==o)return!1;for(var u=0,c=0,p="",d=0;d<n;d++){if("("==e[d]&&(u+=1),")"==e[d]&&(c+=1),c>u)return!1;if(/[a-zA-Z0-9]/.test(e[d])&&(p+=e[d]),null==e[d+1]||!/[[a-zA-Z0-9]/.test(e[d+1]))if(co.includes(p)&&"("==e[d+1]||""==p)p="";else{if(!t.includes(p)&&!uo.includes(p)&&isNaN(p))return!1;p=""}}return u==c}(e,t)?function(e,t){var n=!1,r=0,o=0,i="";for(;!n;)null==e[r]?n=!0:(/[a-zA-Z0-9]/.test(e[r])?i+=e[r]:(o=r-i.length,t.includes(i)&&(e=e.slice(0,o)+"%"+e.slice(o),r+=1),i=""),null==e[r+1]&&(o=r-i.length+1,t.includes(i)&&(e=e.slice(0,o)+"%"+e.slice(o),r+=1)),r+=1);return e}(ho(e),t):null}ao.decorators=[{type:n.Component,args:[{selector:"lhc-calculate-sum-prompt",template:'<div class="score-modal">\n  <p [style]="lhcStyle.description">It looks like this might be a score calculation.</p>\n\n  <p [style]="lhcStyle.description">Would you like to calculate the sum of scores?</p>\n\n  <button class="primary" (click)="onExportClick()" [style]="lhcStyle.buttonPrimary" id="export-score">Yes</button>\n  <button (click)="onCloseClick()" id="skip-export-score">No</button>\n</div>\n',styles:["*{font-size:1rem}.score-modal{text-align:center}button{margin:0 .5em;height:2.5rem;border:none;border-radius:4px;padding:0 2em;font-size:1rem}"]}]}],ao.ctorParameters=function(){return[{type:Se}]},ao.propDecorators={lhcStyle:[{type:n.Input}],export:[{type:n.Output}]};var uo=["+","-","*","/","^","**","||","&&","<",">","=","!=","!~",">=","<=","xor","XOR","implies","IMPLIES","and","or","AND","OR"],co=["CEILING","FLOOR","ABS","TRUNCATE","EXP","SQRT","LN","LOG","ceiling","floor","abs","truncate","exp","sqrt","ln","log","NOT","not"],po=["CEILING","FLOOR","ABS","TRUNCATE","EXP","SQRT","LN","NOT","ceiling","floor","abs","truncate","exp","sqrt","ln","not"];function ho(e){var t=0;if(e.includes("^")){var n=e.indexOf("^"),r=mo(e,n),o=vo(e,n);e=e.slice(0,n-r.length)+r.trim()+".power("+o.trim()+")"+e.slice(n+o.length+1),t+=1}if(e.includes("**")){n=e.indexOf("**"),r=mo(e,n),o=vo(e,n+1);e=e.slice(0,n-r.length)+r.trim()+".power("+o.trim()+")"+e.slice(n+o.length+2),t+=1}for(var i=0;i<po.length;i++)e.includes(po[i])&&"."!=e[e.indexOf(po[i])-1]&&(e=fo(e,po[i]),t+=1);return e.includes("LOG")&&(e=yo(e,"LOG"),t+=1),e.includes("log")&&"."!=e[e.indexOf("log")-1]&&(e=yo(e,"log"),t+=1),e.includes("OR")&&(e=e.replace("OR","or"),t+=1),e.includes("AND")&&(e=e.replace("AND","and"),t+=1),e.includes("||")&&(e=e.replace("||","or"),t+=1),e.includes("&&")&&(e=e.replace("&&","and"),t+=1),0!=t?ho(e):e}function fo(e,t){for(var n=e.indexOf(t),r=n+t.length,o=r,i=!1,s=0,a=0;!i;)"("==e[o]&&(s+=1),")"==e[o]&&(a+=1),s==a?i=!0:o+=1;return e.slice(0,n).trim()+e.slice(r,o+1).trim()+"."+t.toLowerCase()+"()"+e.slice(o+1).trim()}function yo(e,t){for(var n=e.indexOf(t),r=n+3,o=r,i=-1,s=!1,a=0,l=0;!s;)"("==e[o]&&(a+=1),")"==e[o]&&(l+=1),a==l+1&&o!=r&&","==e[o]&&(i=o),a==l?s=!0:o+=1;return e.slice(0,n).trim()+"("+e.slice(i+1,o).trim()+").log("+e.slice(r+1,i).trim()+")"+e.slice(o+1).trim()}function mo(e,t){if(")"!=e[t-1]){for(var n=!0,r="";n;)t<2&&(n=!1),/[a-zA-Z0-9.-\s]/.test(e[t-1])?(r=e[t-1]+r,t-=1):n=!1;return r}for(var o=!1,i=0,s=0,a=t-1;!o;)"("==e[a]&&(i+=1),")"==e[a]&&(s+=1),i==s?o=!0:a-=1;return e.slice(a,t)}function vo(e,t){if("("!=e[t+1]){for(var n=!0,r="";n;)null==e[t+2]&&(n=!1),/[a-zA-Z0-9.\s()\\-]/.test(e[t+1])?(r+=e[t+1],t+=1):n=!1;return r}return e.slice(t+1,e.slice(t).indexOf(")")+t+1)}var go=function(){function e(){}return e.prototype.transform=function(e,t){if(void 0!==e){var n=lo(e,t);if(null!==n)return n}return"Not valid"},e}();go.decorators=[{type:n.Pipe,args:[{name:"easyPathExpressions"}]}];var bo=function(){function e(){this.lhcStyle={},this.simpleChange=new n.EventEmitter,this.expressionChange=new n.EventEmitter,this.jsToFhirPathPipe=new go}return e.prototype.ngOnChanges=function(){this.onExpressionChange(this.simple)},e.prototype.onExpressionChange=function(e){var t=this.jsToFhirPathPipe.transform(e,this.variables);this.fhirPathExpression=t,this.simpleChange.emit(e),this.expressionChange.emit(t)},e}();bo.decorators=[{type:n.Component,args:[{selector:"lhc-syntax-converter",template:'<input [(ngModel)]="simple" (ngModelChange)="onExpressionChange($event)" class="simple-expression"\n       aria-label="Easy Path Expression" [style]="lhcStyle.input" />\n<lhc-syntax-preview [syntax]="fhirPathExpression"></lhc-syntax-preview>\n',styles:[":host{width:100%}input,select{height:2rem;font-size:1rem;width:100%;margin-bottom:.5rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}"]}]}],bo.ctorParameters=function(){return[]},bo.propDecorators={simple:[{type:n.Input}],variables:[{type:n.Input}],lhcStyle:[{type:n.Input}],simpleChange:[{type:n.Output}],expressionChange:[{type:n.Output}]};var _o=function(){function e(e){this.snackBar=e,this.showWhenEmpty=!1}return e.prototype.ngOnInit=function(){},e.prototype.copyNotification=function(){this.snackBar.open("Copied to clipboard",null,{duration:2e3})},e}();_o.decorators=[{type:n.Component,args:[{selector:"lhc-syntax-preview",template:'<div class="text-muted syntax-preview" [ngStyle]="lhcStyle" *ngIf="syntax || showWhenEmpty">\n  <div class="fhirpath">\n    FHIRPath:\n    <pre class="d-inline text-muted syntax" matTooltip="{{syntax}}">\n      {{syntax}}\n    </pre>\n  </div>\n  <button class="copy" #toolTip="matTooltip" matTooltip="Copy to clipboard"\n          [cdkCopyToClipboard]="syntax" (click)="copyNotification(toolTip)" aria-label="Copy to clipboard">\n    \x3c!-- Copy icon https://fonts.google.com/icons?icon.query=copy --\x3e\n    <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 24 24" width="24px" fill="#000000">\n      <path d="M0 0h24v24H0V0z" fill="none"/>\n      <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>\n    </svg>\n  </button>\n</div>\n',styles:[".syntax,:host{overflow:hidden}.syntax{white-space:nowrap;text-overflow:ellipsis}.text-muted{margin:0;color:#555;font-size:.8rem}.syntax-preview{display:flex;width:100%}.fhirpath{flex:1 0 10em;min-width:0;padding-right:1em}.copy{margin-top:1em;flex:0 0 3em;border:none;background:transparent}::ng-deep .mat-tooltip{overflow-wrap:break-word}"]}]}],_o.ctorParameters=function(){return[{type:p.MatSnackBar}]},_o.propDecorators={syntax:[{type:n.Input}],lhcStyle:[{type:n.Input}],showWhenEmpty:[{type:n.Input}]};var xo=function(){function e(e){this.http=e,this.queryUrl="https://clinicaltables.nlm.nih.gov/api/loinc_items/v3/search?df=text,LOINC_NUM",this.lhcStyle={}}return e.prototype.ngOnInit=function(){void 0!==this.variable?(this.codes=void 0!==this.variable.codes?this.variable.codes:[],this.timeInterval=this.variable.timeInterval||1,this.timeIntervalUnit=this.variable.timeIntervalUnit||"months",this.expression=this.variable.expression):this.codes=[]},e.prototype.ngAfterViewInit=function(){var e=this;this.autoComplete=new g.default.Autocompleter.Search(this.autoCompleteElement.nativeElement,this.queryUrl,{tableFormat:!0,valueCols:[0,1],colHeaders:["Text","LOINC Number"],maxSelect:"*"}),this.codes.forEach((function(t){var n=t.match(/http:\/\/loinc.org\|(.+)/);if(null!==n){var r=n[1];e.http.get(e.queryUrl+"&terms="+r).subscribe((function(t){var n=[t[3][0][0],r].join(" - ");e.autoComplete.storeSelectedItem(n,r),e.autoComplete.addToSelectedArea(n)}))}else e.autoComplete.storeSelectedItem(t,void 0),e.autoComplete.addToSelectedArea(t)})),g.default.Autocompleter.Event.observeListSelections("autocomplete-"+this.index,(function(){var t=e.autoComplete.getSelectedItemData();e.codes=e.autoComplete.getSelectedCodes().map((function(e,n){return void 0===e?t[n].text:"http://loinc.org|"+e})),e.onChange()}))},e.prototype.ngOnDestroy=function(){void 0!==this.autoComplete&&this.autoComplete.destroy()},e.prototype.onChange=function(){var e=this.codes.join("%2C");this.variable.expression=this.expression="Observation?code="+e+"&date=gt{{today()-"+this.timeInterval+" "+this.timeIntervalUnit+"}}&patient={{%patient.id}}&_sort=-date&_count=1"},e}();xo.decorators=[{type:n.Component,args:[{selector:"lhc-query-observation",template:'<div class="form-inline query">\n  <div class="query-select">\n    <input [style]="lhcStyle.input" placeholder="LOINC Name / LOINC Number / Other Code"\n           class="query-autocomplete" #autoComplete id="autocomplete-{{index}}" />\n  </div>\n  <div class="time-input">\n    <input [style]="lhcStyle.input" [(ngModel)]="timeInterval" (change)="onChange()"\n           aria-label="Time interval" type="number" min="1" />\n  </div>\n  <div class="time-select">\n    <select [style]="lhcStyle.input" [(ngModel)]="timeIntervalUnit"\n            (change)="onChange()" aria-label="Time interval units">\n      <option value="days">Day(s)</option>\n      <option value="weeks">Week(s)</option>\n      <option value="months">Month(s)</option>\n      <option value="years">Year(s)</option>\n    </select>\n  </div>\n</div>\n<div class="syntax-preview text-muted" [ngStyle]="lhcStyle" *ngIf="codes.length">\n  x-fhir-query: <pre class="d-inline text-muted" title="{{expression}}">{{expression}}</pre>\n</div>\n',styles:[".query{display:flex;flex-wrap:wrap;flex-direction:row}.detail{margin-top:.5rem}.question-select,.unit-select{box-sizing:border-box;margin-bottom:.5rem}.query-select{flex:1 0 6em;padding-right:.5rem}.time-input,.time-select{flex:0 0 7em;padding-left:.5rem}select{width:100%;font-size:1rem;height:2rem}@media (max-width:975px){.question{flex-direction:column}.question-select,.unit-select{flex:100%;padding:0}}input,select{height:2rem;font-size:1rem;width:100%;margin-bottom:.5rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}.text-muted{margin:0;color:#555;font-size:.8rem}.syntax-preview{margin-top:1em}.syntax-preview>pre{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}]}],xo.ctorParameters=function(){return[{type:h.HttpClient}]},xo.propDecorators={variable:[{type:n.Input}],index:[{type:n.Input}],lhcStyle:[{type:n.Input}],autoCompleteElement:[{type:n.ViewChild,args:["autoComplete"]}]};var wo=function(){function e(e){this.ruleEditorService=e,this.lhcStyle={},this.expressionChange=new n.EventEmitter,this.simpleChange=new n.EventEmitter,this.STRING_REGEX=/^'(.*)'$/,this.pipe=new go,this.outputExpressions=!0,this.cases=[{condition:"",simpleCondition:"",output:"",simpleOutput:""}],this.output=""}return e.prototype.ngOnInit=function(){"fhirpath"===this.syntax&&void 0!==this.expression?this.parseIif(this.expression,0):"simple"===this.syntax&&void 0!==this.simpleExpression&&this.parseSimpleCases(),this.output=this.getIif(0)},e.prototype.parseSimpleCases=function(){var e=this;this.parseIif(this.simpleExpression,0);var t=this.cases.find((function(t){return!e.isString(t.simpleOutput)})),n=this.isString(this.simpleDefaultCase);void 0===t&&n&&(this.outputExpressions=!1,this.cases.forEach((function(t){t.simpleOutput=e.removeQuotes(t.simpleOutput)})),this.simpleDefaultCase=this.removeQuotes(this.simpleDefaultCase))},e.prototype.isString=function(e){return this.STRING_REGEX.test(e)},e.prototype.removeQuotes=function(e){return e.match(this.STRING_REGEX)[1]},e.prototype.ngOnChanges=function(e){e.syntax&&"simple"===this.syntax&&!1===e.syntax.firstChange?(this.parseSimpleCases(),this.onChange()):e.syntax&&"fhirpath"===this.syntax&&!1===e.syntax.firstChange&&(this.outputExpressions=!0,this.parseIif(this.expression,0),this.onChange())},e.prototype.onAdd=function(){this.cases.push({condition:"",simpleCondition:"",output:"",simpleOutput:""}),this.onChange()},e.prototype.onRemove=function(e){this.cases.splice(e,1),this.onChange()},e.prototype.onChange=function(){this.output=this.getIif(0),this.expressionChange.emit(this.output),this.simpleChange.emit(this.simpleExpression)},e.prototype.parseIif=function(e,t){var n=e.match(Ce);if(null!==n){for(var r=n[1],o=0,i=0,s=-1,a=-1,l=0;l<r.length;l++)switch(r[l]){case"(":i++;break;case")":i--;break;case",":0===i&&(o++,-1===s?s=l:-1===a&&(a=l))}if(2===o&&0===i){0===t&&(this.cases=[]);var u=r.substring(0,s).trim(),c=r.substring(s+1,a).trim(),p=r.substring(a+1,r.length).trim();if("simple"===this.syntax){var d=this.ruleEditorService.variables.map((function(e){return e.label}));this.cases.push({simpleCondition:u,simpleOutput:c,condition:this.pipe.transform(u,d),output:this.pipe.transform(c,d)})}else this.cases.push({condition:u,output:c});var h=this.parseIif(p,t+1);return!1===h&&"simple"!==this.syntax?this.defaultCase=p:!1===h&&"simple"===this.syntax&&(this.simpleDefaultCase=p),!0}}return!1},e.prototype.getIif=function(e){var t="simple"===this.syntax,n=this.transformIfSimple(t?this.cases[e].simpleOutput:this.cases[e].output,!0),r=this.transformIfSimple(t?this.cases[e].simpleCondition:this.cases[e].condition,!1);return e===this.cases.length-1?"iif("+r+","+n+","+this.transformIfSimple(t?this.simpleDefaultCase:this.defaultCase,!0)+")":"iif("+r+","+n+","+this.getIif(e+1)+")"},e.prototype.transformIfSimple=function(e,t){if(void 0===e)return"";var n=e;return t&&!this.outputExpressions&&(n="'"+n+"'"),"simple"!==this.syntax||t&&!this.outputExpressions?n:this.pipe.transform(n,this.ruleEditorService.variables.map((function(e){return e.label})))},e.prototype.drop=function(e){i.moveItemInArray(this.cases,e.previousIndex,e.currentIndex),this.onChange()},e}();wo.decorators=[{type:n.Component,args:[{selector:"lhc-case-statements",template:'<div class="container">\n  <div class="case-header" [style]="lhcStyle.variableHeader" aria-hidden="true">\n    <div class="case-condition-column">When expression is true</div>\n    <div class="case-output-column">\n      Output\n      <input type="checkbox" id="output-expressions" [(ngModel)]="outputExpressions" (change)="onChange()">\n      <label for="output-expressions">Use expressions (strings if unchecked)</label>\n    </div>\n  </div>\n  <div cdkDropList (cdkDropListDropped)="drop($event)">\n    <div class="case-row drag-case" [style]="lhcStyle.variableRow" *ngFor="let caseStatement of cases; index as i" [id]="\'row-\' + i" cdkDrag>\n      <div class="case-condition-column">\n        \x3c!-- Inline SVG for the row drag and drop handle --\x3e\n        <svg cdkDragHandle xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="handle" viewBox="0 0 16 16">\n          <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n        </svg>\n        <input *ngIf="syntax !== \'simple\'" type="text" [id]="\'case-condition-\' + i" [(ngModel)]="caseStatement.condition" (ngModelChange)="onChange()" [style]="lhcStyle.input" class="condition" aria-label="Case condition" />\n        <input *ngIf="syntax === \'simple\'" type="text" [id]="\'case-condition-\' + i" [(ngModel)]="caseStatement.simpleCondition" (ngModelChange)="onChange()" [style]="lhcStyle.input" class="condition" aria-label="Case condition" />\n        <span class="arrow">→</span>\n      </div>\n      <div class="case-output-column">\n        <input *ngIf="syntax !== \'simple\'" type="text" [id]="\'case-output-\' + i" [(ngModel)]="caseStatement.output" (ngModelChange)="onChange()" [style]="lhcStyle.input" class="output" aria-label="Case output" />\n        <input *ngIf="syntax === \'simple\'" type="text" [id]="\'case-output-\' + i" [(ngModel)]="caseStatement.simpleOutput" (ngModelChange)="onChange()" [style]="lhcStyle.input" class="output" aria-label="Case output" />\n      </div>\n      <div class="case-column-actions" *ngIf="cases.length > 1">\n        <button class="btn btn-danger remove-case" aria-label="Remove case" title="Remove case" [style]="lhcStyle.buttonDanger" (click)="onRemove(i)">x</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<button id="add-case" class="btn btn-secondary mt-2" (click)="onAdd()" [ngStyle]="lhcStyle.buttonSecondary">Add case</button>\n\n<div class="case-row">\n  <div class="case-condition-column"></div>\n  <div class="case-output-column">\n    <label>\n      Default output value:\n      <input *ngIf="syntax !== \'simple\'" type="text" [(ngModel)]="defaultCase" (ngModelChange)="onChange()" [style]="lhcStyle.input" class="default" />\n      <input *ngIf="syntax === \'simple\'" type="text" [(ngModel)]="simpleDefaultCase" (ngModelChange)="onChange()" [style]="lhcStyle.input" class="default" />\n    </label>\n  </div>\n</div>\n<lhc-syntax-preview [lhcStyle]="lhcStyle" [syntax]="output"></lhc-syntax-preview>\n',styles:["*{box-sizing:border-box}.case-header,.case-row{display:flex;flex-direction:row;flex-wrap:wrap}.case-header>.case-column-label{padding-left:1.6em}.case-condition-column>input,.case-output-column select{width:100%;height:2rem;font-size:1rem}.case-condition-column,.case-output-column{padding:.5rem}.case-condition-column{display:flex;flex:0 0 50%}.condition,.output{flex-grow:100}.case-actions-column{flex:auto}.case-output-column{flex:1 0 40%;min-width:0}.case-column-actions button{height:2rem;width:2rem;background-color:#8b0000;color:#fff;padding:0}.case-column-actions{flex:0 0 auto;padding-top:.5rem;padding-left:.5rem}@media (max-width:975px){.case-row{flex-direction:column}.case-condition-column{flex:100%}.case-output-column{flex:20 0 10em}.case-actions-column{flex:auto}}.drag-case{padding:.75rem 0;border-top:1px solid rgba(0,0,0,.1);color:rgba(0,0,0,.87);display:flex;flex-direction:row;justify-content:space-between;box-sizing:border-box;background:#fff}.handle{cursor:move;margin-top:.4rem}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}#output-expressions{margin-left:2em}input[type=text],select{height:2rem;font-size:1rem;width:100%;margin-bottom:1rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}button{height:2.5rem;border:none;border-radius:4px;padding:0 2em;font-size:1rem}.arrow{font-size:1.6em;padding-left:.5em}.default{margin-top:.5rem}.syntax{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.text-muted{margin:0;color:#555;font-size:.8rem}.copy{margin-top:1em;flex:0 0 3em;border:none;background:transparent}::ng-deep .mat-tooltip{overflow-wrap:break-word}"]}]}],wo.ctorParameters=function(){return[{type:Se}]},wo.propDecorators={lhcStyle:[{type:n.Input}],syntax:[{type:n.Input}],simpleExpression:[{type:n.Input}],expression:[{type:n.Input}],expressionChange:[{type:n.Output}],simpleChange:[{type:n.Output}]};var Co=function(){};Co.decorators=[{type:n.NgModule,args:[{declarations:[Oe,oo,io,so,ao,go,bo,_o,xo,wo],imports:[Fn,ro,i.DragDropModule,l.MatRadioModule,s.ClipboardModule,a.MatTooltipModule,p.MatSnackBarModule],exports:[Oe]}]}],e.RuleEditorComponent=Oe,e.RuleEditorModule=Co,e.RuleEditorService=Se,e["ɵa"]=oo,e["ɵb"]=io,e["ɵc"]=so,e["ɵd"]=ao,e["ɵe"]=go,e["ɵf"]=bo,e["ɵg"]=_o,e["ɵh"]=xo,e["ɵi"]=wo,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-rule-editor.umd.min.js.map