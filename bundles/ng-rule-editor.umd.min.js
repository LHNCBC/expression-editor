!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tslib"),require("@angular/core"),require("@angular/common"),require("@angular/cdk/drag-drop"),require("@angular/animations"),require("@angular/animations/browser"),require("@angular/material/radio")):"function"==typeof define&&define.amd?define("ng-rule-editor",["exports","tslib","@angular/core","@angular/common","@angular/cdk/drag-drop","@angular/animations","@angular/animations/browser","@angular/material/radio"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ng-rule-editor"]={},e.tslib,e.ng.core,e.ng.common,e.ng.cdk.dragDrop,e.ng.animations,e.ng.animations.browser,e.ng.material.radio)}(this,(function(e,t,n,r,o,i,s,a){"use strict";function u(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var l=u(t),c=u(n);function p(e){return"function"==typeof e}var d=!1,h={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;d=e},get useDeprecatedSynchronousErrorHandling(){return d}};function f(e){setTimeout((function(){throw e}),0)}var y={closed:!0,next:function(e){},error:function(e){if(h.useDeprecatedSynchronousErrorHandling)throw e;f(e)},complete:function(){}},v=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function m(e){return null!==e&&"object"==typeof e}var g=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),b=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,o=n._ctorUnsubscribe,i=n._unsubscribe,s=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var a=0;a<r.length;++a){r[a].remove(this)}if(p(i)){o&&(this._unsubscribe=void 0);try{i.call(this)}catch(e){t=e instanceof g?_(e.errors):[e]}}if(v(s)){a=-1;for(var u=s.length;++a<u;){var l=s[a];if(m(l))try{l.unsubscribe()}catch(e){t=t||[],e instanceof g?t=t.concat(_(e.errors)):t.push(e)}}}if(t)throw new g(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var o=n._parentOrParents;if(null===o)n._parentOrParents=this;else if(o instanceof e){if(o===this)return n;n._parentOrParents=[o,this]}else{if(-1!==o.indexOf(this))return n;o.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function _(e){return e.reduce((function(e,t){return e.concat(t instanceof g?t.errors:t)}),[])}var w=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),E=function(e){function t(n,r,o){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=y;break;case 1:if(!n){i.destination=y;break}if("object"==typeof n){n instanceof t?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new x(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new x(i,n,r,o)}return i}return l.__extends(t,e),t.prototype[w]=function(){return this},t.create=function(e,n,r){var o=new t(e,n,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(b),x=function(e){function t(t,n,r,o){var i,s=e.call(this)||this;s._parentSubscriber=t;var a=s;return p(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==y&&(p((a=Object.create(n)).unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=i,s._error=r,s._complete=o,s}return l.__extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;h.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=h.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):f(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;f(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};h.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),h.useDeprecatedSynchronousErrorHandling)throw e;f(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!h.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return h.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(f(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(E);function C(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof E?r:null}return!0}var S=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function O(e){return e}function A(e){return 0===e.length?O:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var I=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=function(e,t,n){if(e){if(e instanceof E)return e;if(e[w])return e[w]()}return e||t||n?new E(e,t,n):new E(y)}(e,t,n);if(r?o.add(r.call(o,this.source)):o.add(this.source||h.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),h.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){h.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),C(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=V(t))((function(t,r){var o;o=n.subscribe((function(t){try{e(t)}catch(e){r(e),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[S]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:A(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=V(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function V(e){if(e||(e=h.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var D=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),P=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return l.__extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(b),M=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return l.__extends(t,e),t}(E),T=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return l.__extends(t,e),t.prototype[w]=function(){return new M(this)},t.prototype.lift=function(e){var t=new N(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new D;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},t.prototype.error=function(e){if(this.closed)throw new D;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new D;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new D;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new D;return this.hasError?(e.error(this.thrownError),b.EMPTY):this.isStopped?(e.complete(),b.EMPTY):(this.observers.push(e),new P(this,e))},t.prototype.asObservable=function(){var e=new I;return e.source=this,e},t.create=function(e,t){return new N(e,t)},t}(I),N=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return l.__extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):b.EMPTY},t}(T);var k,j=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function R(e,t){return new I((function(n){var r=new b,o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}k||(k={});function F(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new U(e,t))}}var U=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new L(e,this.project,this.thisArg))},e}(),L=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=r||o,o}return l.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(E);function G(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var H=G(),z=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function q(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var B=function(e){if(e&&"function"==typeof e[S])return r=e,function(e){var t=r[S]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(z(e))return j(e);if(q(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,f),e};if(e&&"function"==typeof e[H])return t=e,function(e){for(var n=t[H]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,o=m(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function W(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[S]}(e))return function(e,t){return new I((function(n){var r=new b;return r.add(t.schedule((function(){var o=e[S]();r.add(o.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(q(e))return function(e,t){return new I((function(n){var r=new b;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(z(e))return R(e,t);if(function(e){return e&&"function"==typeof e[H]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new I((function(n){var r,o=new b;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(t.schedule((function(){r=e[H](),o.add(t.schedule((function(){if(!n.closed){var e,t;try{var o=r.next();e=o.value,t=o.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),o}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Z(e,t){return t?W(e,t):e instanceof I?e:new I(B(e))}function X(e,t){return new I((function(n){var r=e.length;if(0!==r)for(var o=new Array(r),i=0,s=0,a=function(a){var u=Z(e[a]),l=!1;n.add(u.subscribe({next:function(e){l||(l=!0,s++),o[a]=e},error:function(e){return n.error(e)},complete:function(){++i!==r&&l||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=o[n],e}),{}):o),n.complete())}}))},u=0;u<r;u++)a(u);else n.complete()}))}var Q=Function.prototype.toString,$=Object.create,K=Object.defineProperty,Y=Object.getOwnPropertyDescriptor,J=Object.getOwnPropertyNames,ee=Object.getOwnPropertySymbols,te=Object.getPrototypeOf,ne=Object.prototype,re=ne.hasOwnProperty,oe=ne.propertyIsEnumerable,ie="function"==typeof ee,se="function"==typeof WeakMap,ae=function(e,t){if(!e.constructor)return $(null);var n=e.constructor,r=e.__proto__||te(e);if(n===t.Object)return r===t.Object.prototype?{}:$(r);if(~Q.call(n).indexOf("[native code]"))try{return new n}catch(e){}return $(r)},ue=function(e,t,n,r){var o=ae(e,t);for(var i in r.set(e,o),e)re.call(e,i)&&(o[i]=n(e[i],r));if(ie){var s=ee(e),a=s.length;if(a)for(var u=0,l=void 0;u<a;u++)l=s[u],oe.call(e,l)&&(o[l]=n(e[l],r))}return o},le=function(e,t,n,r){var o=ae(e,t);r.set(e,o);var i=ie?J(e).concat(ee(e)):J(e),s=i.length;if(s)for(var a=0,u=void 0,l=void 0;a<s;a++)if("callee"!==(u=i[a])&&"caller"!==u)if(l=Y(e,u)){l.get||l.set||(l.value=n(e[u],r));try{K(o,u,l)}catch(e){o[u]=l.value}}else o[u]=n(e[u],r);return o},ce=Array.isArray,pe="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void(console&&console.error&&console.error('Unable to locate global object, returning "this".'));function de(e,t){var n=!(!t||!t.isStrict),r=t&&t.realm||pe,o=n?le:ue,i=function(e,t){if(!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);var s,a,u,l=e.constructor;if(l===r.Object)return o(e,r,i,t);if(ce(e)){if(n)return le(e,r,i,t);var c=e.length;s=new l,t.set(e,s);for(var p=0;p<c;p++)s[p]=i(e[p],t);return s}if(e instanceof r.Date)return new l(e.getTime());if(e instanceof r.RegExp)return(s=new l(e.source,e.flags||(u="",(a=e).global&&(u+="g"),a.ignoreCase&&(u+="i"),a.multiline&&(u+="m"),a.unicode&&(u+="u"),a.sticky&&(u+="y"),u))).lastIndex=e.lastIndex,s;if(r.Map&&e instanceof r.Map)return s=new l,t.set(e,s),e.forEach((function(e,n){s.set(n,i(e,t))})),s;if(r.Set&&e instanceof r.Set)return s=new l,t.set(e,s),e.forEach((function(e){s.add(i(e,t))})),s;if(r.Blob&&e instanceof r.Blob)return e.slice(0,e.size,e.type);if(r.Buffer&&r.Buffer.isBuffer(e))return s=r.Buffer.allocUnsafe?r.Buffer.allocUnsafe(e.length):new l(e.length),t.set(e,s),e.copy(s),s;if(r.ArrayBuffer){if(r.ArrayBuffer.isView(e))return s=new l(e.buffer.slice(0)),t.set(e,s),s;if(e instanceof r.ArrayBuffer)return s=e.slice(0),t.set(e,s),s}return"function"==typeof e.then||e instanceof Error||r.WeakMap&&e instanceof r.WeakMap||r.WeakSet&&e instanceof r.WeakSet?e:o(e,r,i,t)};return i(e,function(){if(se)return new WeakMap;var e=$({has:function(t){return!!~e._keys.indexOf(t)},set:function(t,n){e._keys.push(t),e._values.push(n)},get:function(t){return e._values[e._keys.indexOf(t)]}});return e._keys=[],e._values=[],e}())}de.default=de,de.strict=function(e,t){return de(e,{isStrict:!0,realm:t?t.realm:void 0})};var he={kg:[{unit:"lbs",factor:2.20462}],lbs:[{unit:"kg",factor:.453592}],"[in_i]":[{unit:"cm",factor:2.54},{unit:"m",factor:.0254}]},fe=function(){function e(){this.syntaxType="simple",this.uneditableVariablesChange=new T,this.variablesChange=new T,this.questionsChange=new T,this.mightBeScoreChange=new T,this.finalExpressionChange=new T,this.LANGUAGE_FHIRPATH="text/fhirpath",this.QUESTION_REGEX=/^%resource\.item\.where\(linkId='(.*)'\)\.answer\.value(?:\*(\d*\.?\d*))?$/,this.VARIABLE_EXTENSION="http://hl7.org/fhir/StructureDefinition/variable",this.SCORE_VARIABLE_EXTENSION="http://lhcforms.nlm.nih.gov/fhir/ext/rule-editor-score-variable",this.SCORE_EXPRESSION_EXTENSION="http://lhcforms.nlm.nih.gov/fhir/ext/rule-editor-expression",this.SIMPLE_SYNTAX_EXTENSION="http://lhcforms.nlm.nih.gov/fhir/ext/simple-syntax",this.CALCULATED_EXPRESSION="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",this.linkIdToQuestion={},this.mightBeScore=!1,this.variables=[],this.uneditableVariables=[]}return e.prototype.addVariable=function(){var e=this.variables.map((function(e){return e.label})).concat(this.uneditableVariables.map((function(e){return e.name})));this.variables.push({label:this.getNewLabelName(e),type:"question",expression:""}),this.variablesChange.next(this.variables)},e.prototype.remove=function(e){this.variables.splice(e,1)},e.prototype.getUneditableVariables=function(e){return Array.isArray(e.extension)?e.extension.reduce((function(e,t){var n,r;if("http://hl7.org/fhir/StructureDefinition/questionnaire-launchContext"===t.url&&t.extension){var o={name:t.extension.find((function(e){return"name"===e.url})).valueId,type:null===(n=t.extension.filter((function(e){return"type"===e.url})))||void 0===n?void 0:n.map((function(e){return e.valueCode})).join("|"),description:null===(r=t.extension.find((function(e){return"description"===e.url})))||void 0===r?void 0:r.valueString};e.push(o)}return e}),[]):[]},e.prototype.extractVariables=function(e){var t=this;if(e.extension){var n=[],r=[];return e.extension=e.extension.map((function(e,t){return Object.assign(Object.assign({},e),{_index:t})})),e.extension.forEach((function(e){e.url===t.VARIABLE_EXTENSION&&e.valueExpression&&e.valueExpression.language===t.LANGUAGE_FHIRPATH?n.push(t.processVariable(e.valueExpression.name,e.valueExpression.expression,e._index)):r.push(e)})),e.extension=r,n}return[]},e.prototype.itemHasScore=function(e){return"string"==typeof e&&(e=this.linkIdToQuestion[e]),(e.answerOption||[]).some((function(e){return(e.extension||[]).some((function(e){return"http://hl7.org/fhir/StructureDefinition/ordinalValue"===e.url}))}))},e.prototype.getScoreQuestionCount=function(e,t){var n=this,r=0;return e.item.forEach((function(e){n.itemHasScore(e)&&r++})),r},e.prototype.import=function(e,t,n){if(this.linkIdContext=n,this.fhir=de(t),"Questionnaire"===this.fhir.resourceType&&this.fhir.item&&this.fhir.item.length){for(var r in this.mightBeScore=this.getScoreQuestionCount(this.fhir,n)>1,this.mightBeScoreChange.next(this.mightBeScore),this.uneditableVariables=this.getUneditableVariables(this.fhir),this.uneditableVariablesChange.next(this.uneditableVariables),this.linkIdToQuestion={},this.processItem(this.fhir.item),this.variables=this.extractVariables(this.fhir),this.variablesChange.next(this.variables),this.questions=[],this.linkIdToQuestion){if(!this.linkIdToQuestion.hasOwnProperty(r))return;var o=this.linkIdToQuestion[r],i=o.text;this.questions.push({linkId:o.linkId,text:i.length>60?i.substring(0,60)+"...":i,unit:this.getQuestionUnits(o.linkId)})}this.questionsChange.next(this.questions);var s=this.extractExpression(e,this.fhir.item,n);if(null!==s){this.finalExpression=s.valueExpression.expression,this.finalExpressionChange.next(this.finalExpression);var a=this.extractSimpleSyntax(s);null===a&&""!==this.finalExpression?this.syntaxType="fhirpath":(this.syntaxType="simple",this.simpleExpression=a)}}},e.prototype.processItem=function(e){var t=this;e.forEach((function(e){t.linkIdToQuestion[e.linkId]=e,e.item&&t.processItem(e.item)}))},e.prototype.extractSimpleSyntax=function(e){var t=this;if(e.extension){var n=e.extension.find((function(e){return e.url===t.SIMPLE_SYNTAX_EXTENSION}));if(void 0!==n)return n.valueString}return null},e.prototype.extractExpression=function(e,n,r){var o,i,s=this;try{for(var a=t.__values(n),u=a.next();!u.done;u=a.next()){var l=u.value;if(l.extension){var c=l.extension.findIndex((function(t){return t.url===e&&t.valueExpression.language===s.LANGUAGE_FHIRPATH&&t.valueExpression.expression}));if(-1!==c){var p=l.extension[c];return l.extension.splice(c,1),p}}else if(l.item)return this.extractExpression(e,l.item,r)}}catch(e){o={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return null},e.prototype.processVariable=function(e,t,n){var r=t.match(this.QUESTION_REGEX);if(null!==r){var o=r[1],i=r[2],s={_index:n,label:e,type:"question",linkId:o,expression:t};if(i){var a=this.getQuestionUnits(o);if(he.hasOwnProperty(a)){var u=he[a].find((function(e){return e.factor.toString()===i}));s.unit=u.unit}}return s}return{_index:n,label:e,type:"expression",expression:t}},e.prototype.getQuestionUnits=function(e){var t=this.linkIdToQuestion[e];if(t.extension){var n=t.extension.find((function(e){return"http://hl7.org/fhir/StructureDefinition/questionnaire-unit"===e.url&&e.valueCoding.system&&"http://unitsofmeasure.org"===e.valueCoding.system}));if(n&&n.valueCoding.code)return n.valueCoding.code}return null},e.prototype.getNewLabelName=function(e){var n,r,o,i,s="abcdefghijklmnopqrstuvwxyz".split(""),a=[""].concat(s);try{for(var u=t.__values(a),l=u.next();!l.done;l=u.next()){var c=l.value,p=function(t){var n=c+t;if(0===e.filter((function(e){return e===n})).length)return{value:n}};try{for(var d=(o=void 0,t.__values(s)),h=d.next();!h.done;h=d.next()){var f=p(h.value);if("object"==typeof f)return f.value}}catch(e){o={error:e}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return""},e.prototype.toggleMightBeScore=function(){this.mightBeScore=!this.mightBeScore,this.mightBeScoreChange.next(this.mightBeScore)},e.prototype.export=function(e,n){var r=this,o=de(this.fhir),i=this.variables.map((function(e){return{_index:e._index,url:r.VARIABLE_EXTENSION,valueExpression:{name:e.label,language:r.LANGUAGE_FHIRPATH,expression:e.expression}}})),s=[],a=[];i.forEach((function(e){void 0===e._index?a.push(e):s.push(e)})),o.extension?(o.extension=o.extension.concat(s),o.extension.sort((function(e,t){return e._index-t._index})),o.extension=o.extension.concat(a)):o.extension=s.concat(a),o.extension=o.extension.map((function(e){e._index;return t.__rest(e,["_index"])}));var u={url:e,valueExpression:{language:this.LANGUAGE_FHIRPATH,expression:n}};return"simple"===this.syntaxType&&(u.extension=[{url:this.SIMPLE_SYNTAX_EXTENSION,valueString:this.simpleExpression}]),this.insertExtensions(o.item,this.linkIdContext,[u]),o},e.prototype.addTotalScoreRule=function(e,t){return this.fhir=e,this.linkIdContext=t,this.addSumOfScores()},e.prototype.addSumOfScores=function(){var e=this,t=this.fhir,n=this.linkIdContext,r=[],o=[];t.item.forEach((function(t){t.linkId!==n&&e.itemHasScore(t)&&o.push(t.linkId)})),o.forEach((function(){r.push(e.getNewLabelName(r))}));var i=o.map((function(t,n){return{url:e.VARIABLE_EXTENSION,valueExpression:{name:r[n],language:e.LANGUAGE_FHIRPATH,expression:"%questionnaire.item.where(linkId = '"+t+"').answerOption.where(valueCoding.code=%resource.item.where(linkId = '"+t+"').answer.valueCoding.code).extension.where(url='http://hl7.org/fhir/StructureDefinition/ordinalValue').valueDecimal",extension:[{url:e.SCORE_VARIABLE_EXTENSION}]}}})),s={url:this.VARIABLE_EXTENSION,valueExpression:{name:"any_questions_answered",language:this.LANGUAGE_FHIRPATH,expression:r.map((function(e){return"%"+e+".exists()"})).join(" or "),extension:[{url:this.SCORE_VARIABLE_EXTENSION}]}},a=r.map((function(e){return"iif(%"+e+".exists(), %"+e+", 0)"})).join(" + "),u={url:this.CALCULATED_EXPRESSION,valueExpression:{description:"Total score calculation",language:this.LANGUAGE_FHIRPATH,expression:"iif(%any_questions_answered, "+a+", {})",extension:[{url:this.SCORE_EXPRESSION_EXTENSION}]}};return i.push(s),i.push(u),this.insertExtensions(t.item,n,i),t},e.prototype.removeSumOfScores=function(e){var t=this,n=de(e),r=function(e){e.extension=e.extension.filter((function(e){return!t.isScoreExtension(e)})),e.item&&e.item.forEach((function(e){return r(e)}))};return n.item.forEach(r),n},e.prototype.isScoreExtension=function(e){var t=this;return!!(e.valueExpression&&e.valueExpression.extension&&e.valueExpression.extension.length)&&!!e.valueExpression.extension.find((function(e){return e&&(e.url===t.SCORE_VARIABLE_EXTENSION||e.url===t.SCORE_EXPRESSION_EXTENSION)}))},e.prototype.insertExtensions=function(e,n,r){var o,i;try{for(var s=t.__values(e),a=s.next();!a.done;a=s.next()){var u=a.value;if(u.linkId===n){u.extension?u.extension=u.extension.concat(r):u.extension=r;break}u.item&&this.insertExtensions(u.item,n,r)}}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}},e.prototype.valueOrScoreExpression=function(e,t,n,r,o){return t?"%questionnaire.item.where(linkId = '"+e+"').answerOption.where(valueCoding.code=%resource.item.where(linkId = '"+e+"').answer.valueCoding.code).extension.where(url='http://hl7.org/fhir/StructureDefinition/ordinalValue').valueDecimal":n&&r&&o?"%resource.item.where(linkId='"+e+"').answer.value*"+he[r].find((function(e){return e.unit===o})).factor:"%resource.item.where(linkId='"+e+"').answer.value"},e}();fe.ɵprov=c.ɵɵdefineInjectable({factory:function(){return new fe},token:fe,providedIn:"root"}),fe.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],fe.ctorParameters=function(){return[]};var ye=function(){function e(e){this.variableService=e,this.fhirQuestionnaire=null,this.itemLinkId=null,this.submitButtonName="Submit",this.titleName="Rule Editor",this.expressionLabel="Final Expression",this.expressionUri="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",this.lhcStyle={},this.save=new n.EventEmitter,this.datePipe=new r.DatePipe("en-US"),this.suggestions=[]}return e.prototype.ngDestroy=function(){this.calculateSumSubscription.unsubscribe(),this.finalExpressionSubscription.unsubscribe(),this.variablesSubscription.unsubscribe()},e.prototype.ngOnChanges=function(e){this.reload()},e.prototype.reload=function(){var e=this;null!==this.fhirQuestionnaire&&null!==this.itemLinkId&&this.variableService.import(this.expressionUri,this.fhirQuestionnaire,this.itemLinkId),this.simpleExpression=this.variableService.simpleExpression,this.linkIdContext=this.variableService.linkIdContext,this.expressionSyntax=this.variableService.syntaxType,this.calculateSum=this.variableService.mightBeScore,this.calculateSumSubscription=this.variableService.mightBeScoreChange.subscribe((function(t){e.calculateSum=t})),this.finalExpression=this.variableService.finalExpression,this.finalExpressionSubscription=this.variableService.finalExpressionChange.subscribe((function(t){e.finalExpression=t})),this.variables=this.variableService.variables.map((function(e){return e.label})),this.variablesSubscription=this.variableService.variablesChange.subscribe((function(t){e.variables=t.map((function(e){return e.label}))}))},e.prototype.export=function(){this.save.emit(this.variableService.export(this.expressionUri,this.finalExpression))},e.prototype.addSumOfScores=function(){this.save.emit(this.variableService.addSumOfScores())},e.prototype.onSyntaxChange=function(e){var t=e.value;"simple"===t&&(this.finalExpression=""),this.variableService.syntaxType=t},e.prototype.updateFinalExpression=function(e){this.finalExpression=e},e}();ye.decorators=[{type:n.Component,args:[{selector:"lhc-rule-editor",template:'<lhc-calculate-sum-prompt *ngIf="calculateSum" (export)="addSumOfScores()" [lhcStyle]="lhcStyle"></lhc-calculate-sum-prompt>\n<div *ngIf="!calculateSum">\n  <h1 [style]="lhcStyle.h1">{{titleName}}</h1>\n\n  <section id="uneditable-variables-section" class="mb-3">\n    <lhc-uneditable-variables></lhc-uneditable-variables>\n  </section>\n\n  <section id="variables-section" class="mb-3">\n    <lhc-variables [lhcStyle]="lhcStyle"></lhc-variables>\n  </section>\n\n  <section id="final-expression-section" class="mb-3">\n    <h2 [style]="lhcStyle.h2">{{expressionLabel}}</h2>\n\n    <div class="flex-container">\n      <div class="expression-type">\n        <select class="form-control" [(ngModel)]="expressionSyntax" aria-label="Expression syntax type" [ngStyle]="lhcStyle.select">\n          <option value="simple">Simple Expression</option>\n          <option value="fhirpath">FHIRPath Expression</option>\n        </select>\n      </div>\n      <div class="expression" [ngSwitch]="expressionSyntax">\n        <lhc-syntax-converter [expression]="simpleExpression" [variables]="variables" *ngSwitchCase="\'simple\'" (expressionChange)="updateFinalExpression($event)" [lhcStyle]="lhcStyle"></lhc-syntax-converter>\n        <input aria-label="FHIRPath" *ngSwitchCase="\'fhirpath\'" id="final-expression" class="form-control" [(ngModel)]="finalExpression" [ngStyle]="lhcStyle.input">\n      </div>\n    </div>\n    <div *ngIf="suggestions.length">{{suggestions|json}}</div>\n  </section>\n\n  <button class="primary" (click)="export()" [ngStyle]="lhcStyle.buttonPrimary" id="export">{{submitButtonName}}</button>\n</div>\n',styles:['.toolbar-button{height:2.7rem}.file-import{width:4.6rem;color:transparent}.file-import::-webkit-file-upload-button{visibility:hidden}.file-import:before{content:"Import";display:inline-block;cursor:pointer;color:#fff}mat-radio-button{margin-left:1em}h1{margin-top:0}.flex-container{display:flex;flex-wrap:wrap;flex-direction:row}.expression,.expression-type{padding:.5rem}.expression-type{flex:0 0 15em}.expression{flex:1 0 auto}input,select{height:2rem;font-size:1rem;width:100%;margin-bottom:.5rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}button{height:2.5rem;border:none;border-radius:4px;padding:0 2em;font-size:1rem}.primary{background-color:#00f;color:#fff}@media (max-width:975px){.flex-container{flex-direction:column}.expression,.expression-type{flex:100%}}']}]}],ye.ctorParameters=function(){return[{type:fe}]},ye.propDecorators={fhirQuestionnaire:[{type:n.Input}],itemLinkId:[{type:n.Input}],submitButtonName:[{type:n.Input}],titleName:[{type:n.Input}],expressionLabel:[{type:n.Input}],expressionUri:[{type:n.Input}],lhcStyle:[{type:n.Input}],save:[{type:n.Output}]};
/**
     * @license Angular v11.0.9
     * (c) 2010-2020 Google LLC. https://angular.io/
     * License: MIT
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var ve=new n.InjectionToken("NgValueAccessor"),me={provide:ve,useExisting:n.forwardRef((function(){return ge})),multi:!0},ge=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */ge.decorators=[{type:n.Directive,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[me]}]}],ge.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var be={provide:ve,useExisting:n.forwardRef((function(){return we})),multi:!0};var _e=new n.InjectionToken("CompositionEventMode"),we=function(){function e(e,t,n){var o;this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(o=r.ɵgetDOM()?r.ɵgetDOM().getUserAgent():"",!/android (\d+)/.test(o.toLowerCase())))}return e.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._handleInput=function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)},e.prototype._compositionStart=function(){this._composing=!0},e.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function Ee(e){return null==e||0===e.length}function xe(e){return null!=e&&"number"==typeof e.length}we.decorators=[{type:n.Directive,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[be]}]}],we.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef},{type:Boolean,decorators:[{type:n.Optional},{type:n.Inject,args:[_e]}]}]};var Ce=new n.InjectionToken("NgValidators"),Se=new n.InjectionToken("NgAsyncValidators"),Oe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ae=function(){function e(){}return e.min=function(e){return function(t){if(Ee(t.value)||Ee(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}},e.max=function(e){return function(t){if(Ee(t.value)||Ee(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}},e.required=function(e){return Ee(e.value)?{required:!0}:null},e.requiredTrue=function(e){return!0===e.value?null:{required:!0}},e.email=function(e){return Ee(e.value)||Oe.test(e.value)?null:{email:!0}},e.minLength=function(e){return function(t){return Ee(t.value)||!xe(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}},e.maxLength=function(e){return function(t){return xe(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}},e.pattern=function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(Ee(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r},e.nullValidator=function(e){return null},e.compose=function(e){if(!e)return null;var t=e.filter(Ie);return 0==t.length?null:function(e){return De(Pe(e,t))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(Ie);return 0==t.length?null:function(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(v(n))return X(n,null);if(m(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return X(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var o=e.pop();return X(e=1===e.length&&v(e[0])?e[0]:e,null).pipe(F((function(e){return o.apply(void 0,e)})))}return X(e,null)}(Pe(e,t).map(Ve)).pipe(F(De))}},e}();function Ie(e){return null!=e}function Ve(e){var t=n.ɵisPromise(e)?Z(e):e;if(!n.ɵisObservable(t)&&("undefined"==typeof ngDevMode||ngDevMode))throw new Error("Expected validator to return Promise or Observable.");return t}function De(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function Pe(e,t){return t.map((function(t){return t(e)}))}function Me(e){return e.map((function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}}))}function Te(e){return null!=e?Ae.compose(Me(e)):null}function Ne(e){return null!=e?Ae.composeAsync(Me(e)):null}function ke(e,n){return null===e?[n]:Array.isArray(e)?t.__spread(e,[n]):[e,n]}function je(e){return e._rawValidators}function Re(e){return e._rawAsyncValidators}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var Fe=function(){function e(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return Object.defineProperty(e.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype._setValidators=function(e){this._rawValidators=e||[],this._composedValidatorFn=Te(this._rawValidators)},e.prototype._setAsyncValidators=function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ne(this._rawAsyncValidators)},Object.defineProperty(e.prototype,"validator",{get:function(){return this._composedValidatorFn||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return this._composedAsyncValidatorFn||null},enumerable:!1,configurable:!0}),e.prototype._registerOnDestroy=function(e){this._onDestroyCallbacks.push(e)},e.prototype._invokeOnDestroyCallbacks=function(){this._onDestroyCallbacks.forEach((function(e){return e()})),this._onDestroyCallbacks=[]},e.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},e.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},e.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},e}(),Ue=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),Object.defineProperty(n.prototype,"formDirective",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return null},enumerable:!1,configurable:!0}),n}(Fe),Le=function(e){function n(){var n=e.apply(this,t.__spread(arguments))||this;return n._parent=null,n.name=null,n.valueAccessor=null,n}return t.__extends(n,e),n}(Fe),Ge=function(){function e(e){this._cd=e}return Object.defineProperty(e.prototype,"ngClassUntouched",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.untouched)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassTouched",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.touched)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPristine",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.pristine)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassDirty",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.dirty)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassValid",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.valid)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassInvalid",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.invalid)&&void 0!==n&&n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ngClassPending",{get:function(){var e,t,n;return null!==(n=null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t?void 0:t.pending)&&void 0!==n&&n},enumerable:!1,configurable:!0}),e}(),He={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},ze=function(e){function n(t){return e.call(this,t)||this}return t.__extends(n,e),n}(Ge);
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */ze.decorators=[{type:n.Directive,args:[{selector:"[formControlName],[ngModel],[formControl]",host:He}]}],ze.ctorParameters=function(){return[{type:Le,decorators:[{type:n.Self}]}]};var qe=function(e){function n(t){return e.call(this,t)||this}return t.__extends(n,e),n}(Ge);qe.decorators=[{type:n.Directive,args:[{selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:He}]}],qe.ctorParameters=function(){return[{type:Ue,decorators:[{type:n.Optional},{type:n.Self}]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Be={provide:ve,useExisting:n.forwardRef((function(){return We})),multi:!0},We=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){var t=null==e?"":e;this._renderer.setProperty(this._elementRef.nativeElement,"value",t)},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();We.decorators=[{type:n.Directive,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[Be]}]}],We.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Ze={provide:ve,useExisting:n.forwardRef((function(){return Qe})),multi:!0};var Xe=function(){function e(){this._accessors=[]}return e.prototype.add=function(e,t){this._accessors.push([e,t])},e.prototype.remove=function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},e.prototype.select=function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))},e.prototype._isSameGroup=function(e,t){return!!e[0].control&&(e[0]._parent===t._control._parent&&e[1].name===t.name)},e}();Xe.decorators=[{type:n.Injectable}];var Qe=function(){function e(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){this._control=this._injector.get(Le),this._checkName(),this._registry.add(this._control,this)},e.prototype.ngOnDestroy=function(){this._registry.remove(this)},e.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},e.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},e.prototype.fireUncheck=function(e){this.writeValue(e)},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&("undefined"==typeof ngDevMode||ngDevMode)&&function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}(),!this.name&&this.formControlName&&(this.name=this.formControlName)},e}();Qe.decorators=[{type:n.Directive,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[Ze]}]}],Qe.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef},{type:Xe},{type:n.Injector}]},Qe.propDecorators={name:[{type:n.Input}],formControlName:[{type:n.Input}],value:[{type:n.Input}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var $e={provide:ve,useExisting:n.forwardRef((function(){return Ke})),multi:!0},Ke=function(){function e(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},e.prototype.registerOnChange=function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e}();Ke.decorators=[{type:n.Directive,args:[{selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[$e]}]}],Ke.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Ye='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Je='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',et='\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',tt='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',nt='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ',rt=function(){function e(){}return e.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ye)},e.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Je+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+tt)},e.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Ye)},e.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Je)},e.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+et)},e.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},e.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+".\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},e}(),ot={provide:ve,useExisting:n.forwardRef((function(){return st})),multi:!0};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function it(e,t){return null==e?""+t:(t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var st=function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Object.is}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e&&("undefined"==typeof ngDevMode||ngDevMode))throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!1,configurable:!0}),e.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=it(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(){return(this._idCounter++).toString()},e.prototype._getOptionId=function(e){var n,r;try{for(var o=t.__values(Array.from(this._optionMap.keys())),i=o.next();!i.done;i=o.next()){var s=i.value;if(this._compareWith(this._optionMap.get(s),e))return s}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e},e}();st.decorators=[{type:n.Directive,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[ot]}]}],st.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]},st.propDecorators={compareWith:[{type:n.Input}]};var at=function(){function e(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(it(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!1,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();at.decorators=[{type:n.Directive,args:[{selector:"option"}]}],at.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:st,decorators:[{type:n.Optional},{type:n.Host}]}]},at.propDecorators={ngValue:[{type:n.Input,args:["ngValue"]}],value:[{type:n.Input,args:["value"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var ut={provide:ve,useExisting:n.forwardRef((function(){return ct})),multi:!0};function lt(e,t){return null==e?""+t:("string"==typeof t&&(t="'"+t+"'"),t&&"object"==typeof t&&(t="Object"),(e+": "+t).slice(0,50))}var ct=function(){function e(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=Object.is}return Object.defineProperty(e.prototype,"compareWith",{set:function(e){if("function"!=typeof e&&("undefined"==typeof ngDevMode||ngDevMode))throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!1,configurable:!0}),e.prototype.writeValue=function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)},e.prototype.registerOnChange=function(e){var t=this;this.onChange=function(n){var r=[];if(void 0!==n.selectedOptions)for(var o=n.selectedOptions,i=0;i<o.length;i++){var s=o.item(i),a=t._getOptionValue(s.value);r.push(a)}else for(o=n.options,i=0;i<o.length;i++){if((s=o.item(i)).selected){a=t._getOptionValue(s.value);r.push(a)}}t.value=r,e(r)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},e.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},e.prototype._getOptionId=function(e){var n,r;try{for(var o=t.__values(Array.from(this._optionMap.keys())),i=o.next();!i.done;i=o.next()){var s=i.value;if(this._compareWith(this._optionMap.get(s)._value,e))return s}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null},e.prototype._getOptionValue=function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e},e}();ct.decorators=[{type:n.Directive,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[ut]}]}],ct.ctorParameters=function(){return[{type:n.Renderer2},{type:n.ElementRef}]},ct.propDecorators={compareWith:[{type:n.Input}]};var pt=function(){function e(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}return Object.defineProperty(e.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(lt(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(lt(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!1,configurable:!0}),e.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},e.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},e.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function dt(e,n){return t.__spread(n.path,[e])}function ht(e,t){("undefined"==typeof ngDevMode||ngDevMode)&&(e||_t(t,"Cannot find control with"),t.valueAccessor||_t(t,"No value accessor for form control with")),vt(e,t,!0),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&gt(e,t)}))}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy((function(){e._unregisterOnChange(n)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&gt(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy((function(){e._unregisterOnDisabledChange(n)}))}}(e,t)}function ft(e,t){var n=function(){("undefined"==typeof ngDevMode||ngDevMode)&&function(e){_t(e,"There is no FormControl instance attached to form control element with")}(t)};t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n),mt(e,t,!0),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange((function(){})))}function yt(e,t){e.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)}))}function vt(e,t,n){var r=je(e);null!==t.validator?e.setValidators(ke(r,t.validator)):"function"==typeof r&&e.setValidators([r]);var o=Re(e);if(null!==t.asyncValidator?e.setAsyncValidators(ke(o,t.asyncValidator)):"function"==typeof o&&e.setAsyncValidators([o]),n){var i=function(){return e.updateValueAndValidity()};yt(t._rawValidators,i),yt(t._rawAsyncValidators,i)}}function mt(e,t,n){if(null!==e){if(null!==t.validator){var r=je(e);Array.isArray(r)&&r.length>0&&e.setValidators(r.filter((function(e){return e!==t.validator})))}if(null!==t.asyncValidator){var o=Re(e);Array.isArray(o)&&o.length>0&&e.setAsyncValidators(o.filter((function(e){return e!==t.asyncValidator})))}}if(n){var i=function(){};yt(t._rawValidators,i),yt(t._rawAsyncValidators,i)}}function gt(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function bt(e,t){null!=e||"undefined"!=typeof ngDevMode&&!ngDevMode||_t(t,"Cannot find control with"),vt(e,t,!1)}function _t(e,t){var n;throw n=e.path.length>1?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+n)}function wt(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}pt.decorators=[{type:n.Directive,args:[{selector:"option"}]}],pt.ctorParameters=function(){return[{type:n.ElementRef},{type:n.Renderer2},{type:ct,decorators:[{type:n.Optional},{type:n.Host}]}]},pt.propDecorators={ngValue:[{type:n.Input,args:["ngValue"]}],value:[{type:n.Input,args:["value"]}]};var Et=[ge,Ke,We,st,ct,Qe];function xt(e,t){e._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}))}function Ct(e,t){if(!t)return null;Array.isArray(t)||"undefined"!=typeof ngDevMode&&!ngDevMode||_t(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,o=void 0;return t.forEach((function(t){var i;t.constructor===we?n=t:(i=t,Et.some((function(e){return i.constructor===e}))?(r&&("undefined"==typeof ngDevMode||ngDevMode)&&_t(e,"More than one built-in value accessor matches form control with"),r=t):(o&&("undefined"==typeof ngDevMode||ngDevMode)&&_t(e,"More than one custom value accessor matches form control with"),o=t))})),o||(r||(n||(("undefined"==typeof ngDevMode||ngDevMode)&&_t(e,"No valid value accessor for form control with"),null)))}function St(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ot(e,t,n,r){"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(rt.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var At="VALID",It="INVALID",Vt="PENDING",Dt="DISABLED";function Pt(e){return(kt(e)?e.validators:e)||null}function Mt(e){return Array.isArray(e)?Te(e):e||null}function Tt(e,t){return(kt(t)?t.asyncValidators:e)||null}function Nt(e){return Array.isArray(e)?Ne(e):e||null}function kt(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var jt=function(){function e(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Mt(this._rawValidators),this._composedAsyncValidatorFn=Nt(this._rawAsyncValidators)}return Object.defineProperty(e.prototype,"validator",{get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asyncValidator",{get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.status===At},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"invalid",{get:function(){return this.status===It},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pending",{get:function(){return this.status==Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.status===Dt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.status!==Dt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"untouched",{get:function(){return!this.touched},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateOn",{get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"},enumerable:!1,configurable:!0}),e.prototype.setValidators=function(e){this._rawValidators=e,this._composedValidatorFn=Mt(e)},e.prototype.setAsyncValidators=function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Nt(e)},e.prototype.clearValidators=function(){this.validator=null},e.prototype.clearAsyncValidators=function(){this.asyncValidator=null},e.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},e.prototype.markAllAsTouched=function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))},e.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},e.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype.markAsPending=function(e){void 0===e&&(e={}),this.status=Vt,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},e.prototype.disable=function(e){void 0===e&&(e={});var t=this._parentMarkedDirty(e.onlySelf);this.status=Dt,this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))},e.prototype.enable=function(e){void 0===e&&(e={});var t=this._parentMarkedDirty(e.onlySelf);this.status=At,this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))},e.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())},e.prototype.setParent=function(e){this._parent=e},e.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==At&&this.status!==Vt||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},e.prototype._updateTreeValidity=function(e){void 0===e&&(e={emitEvent:!0}),this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})},e.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?Dt:At},e.prototype._runValidator=function(){return this.validator?this.validator(this):null},e.prototype._runAsyncValidator=function(e){var t=this;if(this.asyncValidator){this.status=Vt,this._hasOwnPendingAsyncValidator=!0;var n=Ve(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})}))}},e.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)},e.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},e.prototype.get=function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(n)),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach((function(e){r=r instanceof Ft?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Ut&&r.at(e)||null})),r}(this,e,".")},e.prototype.getError=function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null},e.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(e.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!1,configurable:!0}),e.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},e.prototype._initObservables=function(){this.valueChanges=new n.EventEmitter,this.statusChanges=new n.EventEmitter},e.prototype._calculateStatus=function(){return this._allControlsDisabled()?Dt:this.errors?It:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vt)?Vt:this._anyControlsHaveStatus(It)?It:At},e.prototype._anyControlsHaveStatus=function(e){return this._anyControls((function(t){return t.status===e}))},e.prototype._anyControlsDirty=function(){return this._anyControls((function(e){return e.dirty}))},e.prototype._anyControlsTouched=function(){return this._anyControls((function(e){return e.touched}))},e.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},e.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},e.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},e.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},e.prototype._setUpdateStrategy=function(e){kt(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},e.prototype._parentMarkedDirty=function(e){var t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()},e}(),Rt=function(e){function n(t,n,r){void 0===t&&(t=null);var o=e.call(this,Pt(n),Tt(r,n))||this;return o._onChange=[],o._applyFormState(t),o._setUpdateStrategy(n),o._initObservables(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!r}),o}return t.__extends(n,e),n.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach((function(e){return e(n.value,!1!==t.emitViewToModelChange)})),this.updateValueAndValidity(t)},n.prototype.patchValue=function(e,t){void 0===t&&(t={}),this.setValue(e,t)},n.prototype.reset=function(e,t){void 0===e&&(e=null),void 0===t&&(t={}),this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},n.prototype._updateValue=function(){},n.prototype._anyControls=function(e){return!1},n.prototype._allControlsDisabled=function(){return this.disabled},n.prototype.registerOnChange=function(e){this._onChange.push(e)},n.prototype._unregisterOnChange=function(e){St(this._onChange,e)},n.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},n.prototype._unregisterOnDisabledChange=function(e){St(this._onDisabledChange,e)},n.prototype._forEachChild=function(e){},n.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)},n.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},n}(jt),Ft=function(e){function n(t,n,r){var o=e.call(this,Pt(n),Tt(r,n))||this;return o.controls=t,o._initObservables(),o._setUpdateStrategy(n),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!r}),o}return t.__extends(n,e),n.prototype.registerControl=function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},n.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},n.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){n._throwIfControlMissing(r),n.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this.updateValueAndValidity(t)},n.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),Object.keys(e).forEach((function(r){n.controls[r]&&n.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this.updateValueAndValidity(t)},n.prototype.reset=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)},n.prototype.getRawValue=function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof Rt?t.value:t.getRawValue(),e}))},n.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},n.prototype._forEachChild=function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))},n.prototype._setUpControls=function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))},n.prototype._updateValue=function(){this.value=this._reduceValue()},n.prototype._anyControls=function(e){var n,r;try{for(var o=t.__values(Object.keys(this.controls)),i=o.next();!i.done;i=o.next()){var s=i.value,a=this.controls[s];if(this.contains(s)&&e(a))return!0}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},n.prototype._reduceValue=function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))},n.prototype._reduceChildren=function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n},n.prototype._allControlsDisabled=function(){var e,n;try{for(var r=t.__values(Object.keys(this.controls)),o=r.next();!o.done;o=r.next()){var i=o.value;if(this.controls[i].enabled)return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return Object.keys(this.controls).length>0||this.disabled},n.prototype._checkAllValuesPresent=function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '"+n+"'.")}))},n}(jt),Ut=function(e){function n(t,n,r){var o=e.call(this,Pt(n),Tt(r,n))||this;return o.controls=t,o._initObservables(),o._setUpdateStrategy(n),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!r}),o}return t.__extends(n,e),n.prototype.at=function(e){return this.controls[e]},n.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},n.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},n.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()},n.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(n.prototype,"length",{get:function(){return this.controls.length},enumerable:!1,configurable:!0}),n.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this._checkAllValuesPresent(e),e.forEach((function(e,r){n._throwIfControlMissing(r),n.at(r).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})})),this.updateValueAndValidity(t)},n.prototype.patchValue=function(e,t){var n=this;void 0===t&&(t={}),e.forEach((function(e,r){n.at(r)&&n.at(r).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})})),this.updateValueAndValidity(t)},n.prototype.reset=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)},n.prototype.getRawValue=function(){return this.controls.map((function(e){return e instanceof Rt?e.value:e.getRawValue()}))},n.prototype.clear=function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())},n.prototype._syncPendingControls=function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},n.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},n.prototype._forEachChild=function(e){this.controls.forEach((function(t,n){e(t,n)}))},n.prototype._updateValue=function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))},n.prototype._anyControls=function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))},n.prototype._setUpControls=function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))},n.prototype._checkAllValuesPresent=function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: "+n+".")}))},n.prototype._allControlsDisabled=function(){var e,n;try{for(var r=t.__values(this.controls),o=r.next();!o.done;o=r.next()){if(o.value.enabled)return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this.controls.length>0||this.disabled},n.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},n}(jt),Lt={provide:Ue,useExisting:n.forwardRef((function(){return Ht}))},Gt=Promise.resolve(null),Ht=function(e){function r(t,r){var o=e.call(this)||this;return o.submitted=!1,o._directives=[],o.ngSubmit=new n.EventEmitter,o.form=new Ft({},Te(t),Ne(r)),o}return t.__extends(r,e),r.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(r.prototype,"formDirective",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"control",{get:function(){return this.form},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"path",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controls",{get:function(){return this.form.controls},enumerable:!1,configurable:!0}),r.prototype.addControl=function(e){var t=this;Gt.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ht(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))},r.prototype.getControl=function(e){return this.form.get(e.path)},r.prototype.removeControl=function(e){var t=this;Gt.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),St(t._directives,e)}))},r.prototype.addFormGroup=function(e){var t=this;Gt.then((function(){var n=t._findContainer(e.path),r=new Ft({});bt(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))},r.prototype.removeFormGroup=function(e){var t=this;Gt.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))},r.prototype.getFormGroup=function(e){return this.form.get(e.path)},r.prototype.updateModel=function(e,t){var n=this;Gt.then((function(){n.form.get(e.path).setValue(t)}))},r.prototype.setValue=function(e){this.control.setValue(e)},r.prototype.onSubmit=function(e){return this.submitted=!0,xt(this.form,this._directives),this.ngSubmit.emit(e),!1},r.prototype.onReset=function(){this.resetForm()},r.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},r.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},r.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},r}(Ue);Ht.decorators=[{type:n.Directive,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]",providers:[Lt],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],Ht.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ce]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Se]}]}]},Ht.propDecorators={options:[{type:n.Input,args:["ngFormOptions"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var zt=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return dt(null==this.name?this.name:this.name.toString(),this._parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!1,configurable:!0}),n.prototype._checkParentType=function(){},n}(Ue);zt.decorators=[{type:n.Directive}];
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var qt=function(){function e(){}return e.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Ye+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+nt)},e.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Je+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+tt)},e.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},e.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Je+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+tt)},e}(),Bt={provide:Ue,useExisting:n.forwardRef((function(){return Wt}))},Wt=function(e){function n(t,n,r){var o=e.call(this)||this;return o._parent=t,o._setValidators(n),o._setAsyncValidators(r),o}return t.__extends(n,e),n.prototype._checkParentType=function(){this._parent instanceof n||this._parent instanceof Ht||"undefined"!=typeof ngDevMode&&!ngDevMode||qt.modelGroupParentException()},n}(zt);
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */Wt.decorators=[{type:n.Directive,args:[{selector:"[ngModelGroup]",providers:[Bt],exportAs:"ngModelGroup"}]}],Wt.ctorParameters=function(){return[{type:Ue,decorators:[{type:n.Host},{type:n.SkipSelf}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ce]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Se]}]}]},Wt.propDecorators={name:[{type:n.Input,args:["ngModelGroup"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Zt={provide:Le,useExisting:n.forwardRef((function(){return Qt}))},Xt=Promise.resolve(null),Qt=function(e){function r(t,r,o,i){var s=e.call(this)||this;return s.control=new Rt,s._registered=!1,s.update=new n.EventEmitter,s._parent=t,s._setValidators(r),s._setAsyncValidators(o),s.valueAccessor=Ct(s,i),s}return t.__extends(r,e),r.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),wt(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},r.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(r.prototype,"path",{get:function(){return this._parent?dt(this.name,this._parent):[this.name]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!1,configurable:!0}),r.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},r.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},r.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},r.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},r.prototype._setUpStandalone=function(){ht(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},r.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},r.prototype._checkParentType=function(){("undefined"==typeof ngDevMode||ngDevMode)&&(!(this._parent instanceof Wt)&&this._parent instanceof zt?qt.formGroupNameException():this._parent instanceof Wt||this._parent instanceof Ht||qt.modelParentException())},r.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||"undefined"!=typeof ngDevMode&&!ngDevMode||qt.missingNameException()},r.prototype._updateValue=function(e){var t=this;Xt.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))},r.prototype._updateDisabled=function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;Xt.then((function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()}))},r}(Le);Qt.decorators=[{type:n.Directive,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[Zt],exportAs:"ngModel"}]}],Qt.ctorParameters=function(){return[{type:Ue,decorators:[{type:n.Optional},{type:n.Host}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ce]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Se]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[ve]}]}]},Qt.propDecorators={name:[{type:n.Input}],isDisabled:[{type:n.Input,args:["disabled"]}],model:[{type:n.Input,args:["ngModel"]}],options:[{type:n.Input,args:["ngModelOptions"]}],update:[{type:n.Output,args:["ngModelChange"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var $t=function(){};$t.decorators=[{type:n.Directive,args:[{selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}}]}];
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Kt=new n.InjectionToken("NgModelWithFormControlWarning"),Yt={provide:Le,useExisting:n.forwardRef((function(){return Jt}))},Jt=function(e){function r(t,r,o,i){var s=e.call(this)||this;return s._ngModelWarningConfig=i,s.update=new n.EventEmitter,s._ngModelWarningSent=!1,s._setValidators(t),s._setAsyncValidators(r),s.valueAccessor=Ct(s,o),s}return t.__extends(r,e),Object.defineProperty(r.prototype,"isDisabled",{set:function(e){("undefined"==typeof ngDevMode||ngDevMode)&&rt.disabledAttrWarning()},enumerable:!1,configurable:!0}),r.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(ht(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),wt(e,this.viewModel)&&(("undefined"==typeof ngDevMode||ngDevMode)&&Ot("formControl",r,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(r.prototype,"path",{get:function(){return[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"control",{get:function(){return this.form},enumerable:!1,configurable:!0}),r.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},r.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},r}(Le);Jt._ngModelWarningSentOnce=!1,Jt.decorators=[{type:n.Directive,args:[{selector:"[formControl]",providers:[Yt],exportAs:"ngForm"}]}],Jt.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ce]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Se]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[ve]}]},{type:String,decorators:[{type:n.Optional},{type:n.Inject,args:[Kt]}]}]},Jt.propDecorators={form:[{type:n.Input,args:["formControl"]}],isDisabled:[{type:n.Input,args:["disabled"]}],model:[{type:n.Input,args:["ngModel"]}],update:[{type:n.Output,args:["ngModelChange"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var en={provide:Ue,useExisting:n.forwardRef((function(){return tn}))},tn=function(e){function r(t,r){var o=e.call(this)||this;return o.validators=t,o.asyncValidators=r,o.submitted=!1,o.directives=[],o.form=null,o.ngSubmit=new n.EventEmitter,o._setValidators(t),o._setAsyncValidators(r),o}return t.__extends(r,e),r.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)},Object.defineProperty(r.prototype,"formDirective",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"control",{get:function(){return this.form},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"path",{get:function(){return[]},enumerable:!1,configurable:!0}),r.prototype.addControl=function(e){var t=this.form.get(e.path);return ht(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},r.prototype.getControl=function(e){return this.form.get(e.path)},r.prototype.removeControl=function(e){St(this.directives,e)},r.prototype.addFormGroup=function(e){var t=this.form.get(e.path);bt(t,e),t.updateValueAndValidity({emitEvent:!1})},r.prototype.removeFormGroup=function(e){},r.prototype.getFormGroup=function(e){return this.form.get(e.path)},r.prototype.addFormArray=function(e){var t=this.form.get(e.path);bt(t,e),t.updateValueAndValidity({emitEvent:!1})},r.prototype.removeFormArray=function(e){},r.prototype.getFormArray=function(e){return this.form.get(e.path)},r.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},r.prototype.onSubmit=function(e){return this.submitted=!0,xt(this.form,this.directives),this.ngSubmit.emit(e),!1},r.prototype.onReset=function(){this.resetForm()},r.prototype.resetForm=function(e){void 0===e&&(e=void 0),this.form.reset(e),this.submitted=!1},r.prototype._updateDomValue=function(){var e=this;this.directives.forEach((function(t){var n=e.form.get(t.path);t.control!==n&&(ft(t.control||null,t),n&&ht(n,t),t.control=n)})),this.form._updateTreeValidity({emitEvent:!1})},r.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange((function(){return e._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){}))},r.prototype._updateValidators=function(){vt(this.form,this,!1),this._oldForm&&mt(this._oldForm,this,!1)},r.prototype._checkFormPresent=function(){this.form||"undefined"!=typeof ngDevMode&&!ngDevMode||rt.missingFormException()},r}(Ue);tn.decorators=[{type:n.Directive,args:[{selector:"[formGroup]",providers:[en],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}]}],tn.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ce]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Se]}]}]},tn.propDecorators={form:[{type:n.Input,args:["formGroup"]}],ngSubmit:[{type:n.Output}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var nn={provide:Ue,useExisting:n.forwardRef((function(){return rn}))},rn=function(e){function n(t,n,r){var o=e.call(this)||this;return o._parent=t,o._setValidators(n),o._setAsyncValidators(r),o}return t.__extends(n,e),n.prototype._checkParentType=function(){an(this._parent)&&("undefined"==typeof ngDevMode||ngDevMode)&&rt.groupParentException()},n}(zt);rn.decorators=[{type:n.Directive,args:[{selector:"[formGroupName]",providers:[nn]}]}],rn.ctorParameters=function(){return[{type:Ue,decorators:[{type:n.Optional},{type:n.Host},{type:n.SkipSelf}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ce]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Se]}]}]},rn.propDecorators={name:[{type:n.Input,args:["formGroupName"]}]};var on={provide:Ue,useExisting:n.forwardRef((function(){return sn}))},sn=function(e){function n(t,n,r){var o=e.call(this)||this;return o._parent=t,o._setValidators(n),o._setAsyncValidators(r),o}return t.__extends(n,e),n.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},n.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(n.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return dt(null==this.name?this.name:this.name.toString(),this._parent)},enumerable:!1,configurable:!0}),n.prototype._checkParentType=function(){an(this._parent)&&("undefined"==typeof ngDevMode||ngDevMode)&&rt.arrayParentException()},n}(Ue);function an(e){return!(e instanceof rn||e instanceof tn||e instanceof sn)}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */sn.decorators=[{type:n.Directive,args:[{selector:"[formArrayName]",providers:[on]}]}],sn.ctorParameters=function(){return[{type:Ue,decorators:[{type:n.Optional},{type:n.Host},{type:n.SkipSelf}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ce]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Se]}]}]},sn.propDecorators={name:[{type:n.Input,args:["formArrayName"]}]};var un={provide:Le,useExisting:n.forwardRef((function(){return ln}))},ln=function(e){function r(t,r,o,i,s){var a=e.call(this)||this;return a._ngModelWarningConfig=s,a._added=!1,a.update=new n.EventEmitter,a._ngModelWarningSent=!1,a._parent=t,a._setValidators(r),a._setAsyncValidators(o),a.valueAccessor=Ct(a,i),a}return t.__extends(r,e),Object.defineProperty(r.prototype,"isDisabled",{set:function(e){("undefined"==typeof ngDevMode||ngDevMode)&&rt.disabledAttrWarning()},enumerable:!1,configurable:!0}),r.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),wt(e,this.viewModel)&&(("undefined"==typeof ngDevMode||ngDevMode)&&Ot("formControlName",r,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},r.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},r.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(r.prototype,"path",{get:function(){return dt(null==this.name?this.name:this.name.toString(),this._parent)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!1,configurable:!0}),r.prototype._checkParentType=function(){("undefined"==typeof ngDevMode||ngDevMode)&&(!(this._parent instanceof rn)&&this._parent instanceof zt?rt.ngModelGroupException():this._parent instanceof rn||this._parent instanceof tn||this._parent instanceof sn||rt.controlParentException())},r.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},r}(Le);ln._ngModelWarningSentOnce=!1,ln.decorators=[{type:n.Directive,args:[{selector:"[formControlName]",providers:[un]}]}],ln.ctorParameters=function(){return[{type:Ue,decorators:[{type:n.Optional},{type:n.Host},{type:n.SkipSelf}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Ce]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[Se]}]},{type:Array,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[ve]}]},{type:String,decorators:[{type:n.Optional},{type:n.Inject,args:[Kt]}]}]},ln.propDecorators={name:[{type:n.Input,args:["formControlName"]}],isDisabled:[{type:n.Input,args:["disabled"]}],model:[{type:n.Input,args:["ngModel"]}],update:[{type:n.Output,args:["ngModelChange"]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var cn={provide:Ce,useExisting:n.forwardRef((function(){return dn})),multi:!0},pn={provide:Ce,useExisting:n.forwardRef((function(){return hn})),multi:!0},dn=function(){function e(){this._required=!1}return Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!1,configurable:!0}),e.prototype.validate=function(e){return this.required?Ae.required(e):null},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e}();dn.decorators=[{type:n.Directive,args:[{selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[cn],host:{"[attr.required]":'required ? "" : null'}}]}],dn.propDecorators={required:[{type:n.Input}]};var hn=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.validate=function(e){return this.required?Ae.requiredTrue(e):null},n}(dn);hn.decorators=[{type:n.Directive,args:[{selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[pn],host:{"[attr.required]":'required ? "" : null'}}]}];var fn={provide:Ce,useExisting:n.forwardRef((function(){return yn})),multi:!0},yn=function(){function e(){this._enabled=!1}return Object.defineProperty(e.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!1,configurable:!0}),e.prototype.validate=function(e){return this._enabled?Ae.email(e):null},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e}();yn.decorators=[{type:n.Directive,args:[{selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[fn]}]}],yn.propDecorators={email:[{type:n.Input}]};var vn={provide:Ce,useExisting:n.forwardRef((function(){return mn})),multi:!0},mn=function(){function e(){this._validator=Ae.nullValidator}return e.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},e.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e.prototype._createValidator=function(){this._validator=Ae.minLength("number"==typeof this.minlength?this.minlength:parseInt(this.minlength,10))},e}();mn.decorators=[{type:n.Directive,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[vn],host:{"[attr.minlength]":"minlength ? minlength : null"}}]}],mn.propDecorators={minlength:[{type:n.Input}]};var gn={provide:Ce,useExisting:n.forwardRef((function(){return bn})),multi:!0},bn=function(){function e(){this._validator=Ae.nullValidator}return e.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},e.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e.prototype._createValidator=function(){this._validator=Ae.maxLength("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))},e}();bn.decorators=[{type:n.Directive,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[gn],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}}]}],bn.propDecorators={maxlength:[{type:n.Input}]};var _n={provide:Ce,useExisting:n.forwardRef((function(){return wn})),multi:!0},wn=function(){function e(){this._validator=Ae.nullValidator}return e.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},e.prototype.validate=function(e){return this._validator(e)},e.prototype.registerOnValidatorChange=function(e){this._onChange=e},e.prototype._createValidator=function(){this._validator=Ae.pattern(this.pattern)},e}();wn.decorators=[{type:n.Directive,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[_n],host:{"[attr.pattern]":"pattern ? pattern : null"}}]}],wn.propDecorators={pattern:[{type:n.Input}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var En=[$t,at,pt,we,We,Ke,ge,st,ct,Qe,ze,qe,dn,mn,bn,wn,hn,yn],xn=[Qt,Wt,Ht],Cn=[Jt,tn,ln,rn,sn],Sn=function(){};Sn.decorators=[{type:n.NgModule,args:[{declarations:En,exports:En}]}];var On=function(){function e(){}return e.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),r=null,o=null,i=void 0;return null!=t&&(!
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validator?t.validator:null,o=null!=t.asyncValidator?t.asyncValidator:null):(r=null!=t.validators?t.validators:null,o=null!=t.asyncValidators?t.asyncValidators:null,i=null!=t.updateOn?t.updateOn:void 0)),new Ft(n,{asyncValidators:o,updateOn:i,validators:r})},e.prototype.control=function(e,t,n){return new Rt(e,t,n)},e.prototype.array=function(e,t,n){var r=this,o=e.map((function(e){return r._createControl(e)}));return new Ut(o,t,n)},e.prototype._reduceControls=function(e){var t=this,n={};return Object.keys(e).forEach((function(r){n[r]=t._createControl(e[r])})),n},e.prototype._createControl=function(e){if(e instanceof Rt||e instanceof Ft||e instanceof Ut)return e;if(Array.isArray(e)){var t=e[0],n=e.length>1?e[1]:null,r=e.length>2?e[2]:null;return this.control(t,n,r)}return this.control(e)},e}();On.decorators=[{type:n.Injectable}];
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
new n.Version("11.0.9");
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var An,In=function(){};In.decorators=[{type:n.NgModule,args:[{declarations:xn,providers:[Xe],exports:[Sn,xn]}]}],(function(){function e(){}return e.withConfig=function(t){return{ngModule:e,providers:[{provide:Kt,useValue:t.warnOnNgModelWithFormControl}]}},e}()).decorators=[{type:n.NgModule,args:[{declarations:[Cn],providers:[On,Xe],exports:[Sn,Cn]}]}],function(e){e.question="Question",e.expression="FHIRPath Expression",e.simple="Simple Expression"}(An||(An={}));var Vn=function(){function e(e){this.ruleEditorService=e,this.lhcStyle={},this.variableType=An,this.levels=[{level:0,name:"Top Level Scope"}]}return e.prototype.ngOnInit=function(){var e=this;this.variables=this.ruleEditorService.variables,this.variableSubscription=this.ruleEditorService.variablesChange.subscribe((function(t){e.variables=t}))},e.prototype.ngDestroy=function(){this.variableSubscription.unsubscribe()},e.prototype.onAdd=function(){this.ruleEditorService.addVariable()},e.prototype.onRemove=function(e){this.ruleEditorService.remove(e)},e.prototype.drop=function(e){o.moveItemInArray(this.variables,e.previousIndex,e.currentIndex)},e.prototype.getAvailableVariables=function(e){var t=this.ruleEditorService.uneditableVariables.map((function(e){return e.name})),n=this.variables.map((function(e){return e.label})).slice(0,e);return t.concat(n)},e}();Vn.decorators=[{type:n.Component,args:[{selector:"lhc-variables",template:'<h2 [style]="lhcStyle.h2">Variables</h2>\n\n<div class="container">\n  <div class="variable-header" [style]="lhcStyle.variableHeader" aria-hidden="true">\n    <div class="variable-column-label">Label</div>\n    <div class="variable-column-type">Type</div>\n    <div class="variable-column-details">Question/FHIRPath Expression</div>\n    <div class="variable-column-actions">Actions</div>\n  </div>\n  <div cdkDropList (cdkDropListDropped)="drop($event)">\n    <div class="variable-row drag-variable" [style]="lhcStyle.variableRow" *ngFor="let variable of variables; index as i" [id]="\'row-\' + i" cdkDrag>\n      <div class="variable-column-label">\n        \x3c!-- Inline SVG for the row drag and drop handle --\x3e\n        <svg cdkDragHandle xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="handle" viewBox="0 0 16 16">\n          <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n        </svg>\n        <input [id]="\'variable-label-\' + i" [(ngModel)]="variable.label" [style]="lhcStyle.input" class="label" aria-label="Variable label" />\n      </div>\n      <div class="variable-column-type">\n        <select [id]="\'variable-type-\' + i" [(ngModel)]="variable.type" [style]="lhcStyle.select" aria-label="Variable type">\n          <option value="" disabled hidden>Select...</option>\n          <option *ngFor="let type of variableType | keyvalue" value="{{type.key}}">{{type.value}}</option>\n        </select>\n      </div>\n      <div class="variable-column-details" [ngSwitch]="variable.type">\n        <lhc-question [variable]="variable" *ngSwitchCase="\'question\'" [lhcStyle]="lhcStyle"></lhc-question>\n        <div class="form-inline" *ngSwitchCase="\'simple\'">\n          <input [id]="\'variable-expression-\' + i" [(ngModel)]="variable.simple" [style]="lhcStyle.input"\n                 aria-label="Simple Expression" />\n          <lhc-syntax-preview [syntax]="variable.simple | mathToFhirpath:getAvailableVariables(i)" [lhcStyle]="lhcStyle"></lhc-syntax-preview>\n        </div>\n        <div class="form-inline" *ngSwitchCase="\'expression\'">\n          <input [id]="\'variable-expression-\' + i" [(ngModel)]="variable.expression" [style]="lhcStyle.input" aria-label="FHIRPath Expression" />\n        </div>\n      </div>\n      <div class="variable-column-actions">\n        <button class="btn btn-danger remove-variable" aria-label="Remove Line" [style]="lhcStyle.buttonDanger" (click)="onRemove(i)">x</button>\n      </div>\n    </div>\n    <div *ngIf="!variables.length" class="no-variables">No variables, please <a href="#" (click)="onAdd()">add one</a>.</div>\n  </div>\n</div>\n\n<button id="add-variable" class="btn btn-secondary mt-2" (click)="onAdd()" [ngStyle]="lhcStyle.buttonSecondary">Add variable</button>\n',styles:["*{box-sizing:border-box}.variable-header,.variable-row{display:flex;flex-direction:row;flex-wrap:wrap}.variable-column-label>input,.variable-column-type select{width:100%;height:2rem;font-size:1rem}.variable-column-details,.variable-column-label,.variable-column-type{padding:.5rem}.variable-column-label{display:flex;flex:0 0 12em}.label{flex-grow:100}.variable-column-type{flex:0 0 13em}.variable-column-details{flex:1 0 25em;min-width:0}.variable-column-actions button{height:2rem;width:2rem;background-color:#8b0000;color:#fff;padding:0}.variable-column-actions{flex:0 0 auto;padding-top:.5rem;padding-left:.5rem}@media (max-width:975px){.variable-row{flex-direction:column}.variable-column-label,.variable-column-type{flex:100%}.variable-column-details{flex:20 0 10em}.variable-column-actions{flex:auto}}.drag-variable{padding:.75rem 0;border-top:1px solid rgba(0,0,0,.1);color:rgba(0,0,0,.87);display:flex;flex-direction:row;justify-content:space-between;box-sizing:border-box;background:#fff}.handle{cursor:move;margin-top:.4rem}.no-variables{padding:2rem}.cdk-drag-preview{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder{opacity:0}.cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}input,select{height:2rem;font-size:1rem;width:100%;margin-bottom:.5rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}button{height:2.5rem;border:none;border-radius:4px;padding:0 2em;font-size:1rem}"]}]}],Vn.ctorParameters=function(){return[{type:fe}]},Vn.propDecorators={lhcStyle:[{type:n.Input}]};var Dn=function(){function e(e){this.variableService=e}return e.prototype.ngOnInit=function(){var e=this;this.uneditableVariables=this.variableService.uneditableVariables,this.uneditableVariablesSubscription=this.variableService.uneditableVariablesChange.subscribe((function(t){e.uneditableVariables=t}))},e.prototype.ngDestroy=function(){this.uneditableVariablesSubscription.unsubscribe()},e}();Dn.decorators=[{type:n.Component,args:[{selector:"lhc-uneditable-variables",template:'<div *ngIf="uneditableVariables.length">\n  <h2>Un-editable Variables</h2>\n\n  <div class="container mb-4">\n    <div class="row font-weight-bold" aria-hidden="true">\n      <div class="col-2">Label</div>\n      <div class="col-2">Type</div>\n      <div class="col-8">Description</div>\n    </div>\n    <hr>\n    <div class="row" *ngFor="let variable of uneditableVariables">\n      <div class="col-2"><span class="sr-only">Label</span>{{variable.name}}</div>\n      <div class="col-2"><span class="sr-only">Label</span>{{variable.type}}</div>\n      <div class="col-8"><span class="sr-only">Description</span>{{variable.description}}</div>\n    </div>\n  </div>\n</div>\n'}]}],Dn.ctorParameters=function(){return[{type:fe}]};var Pn=function(){function e(e){this.variableService=e,this.lhcStyle={},this.linkId="",this.itemHasScore=!1,this.isNonConvertibleUnit=!1}return e.prototype.ngOnInit=function(){var e=this;this.linkId=this.variable.linkId?this.variable.linkId:"",this.toUnit=this.variable.unit?this.variable.unit:"",this.questions=this.variableService.questions,this.onChange(!1),this.variableService.questionsChange.subscribe((function(t){e.questions=t}))},e.prototype.getQuestion=function(e){return this.questions.find((function(t){return t.linkId===e}))},e.prototype.getConversionOptions=function(e){return he[e]},e.prototype.onChange=function(e){if(e&&(this.toUnit=""),this.linkId){var t=this.getQuestion(this.linkId);this.unit=null==t?void 0:t.unit,this.conversionOptions=this.getConversionOptions(this.unit),this.isNonConvertibleUnit=this.unit&&!this.conversionOptions,this.conversionOptions||this.isNonConvertibleUnit?this.itemHasScore=!1:this.itemHasScore=this.variableService.itemHasScore(this.linkId),this.variable.expression=this.variableService.valueOrScoreExpression(this.linkId,this.itemHasScore,!this.isNonConvertibleUnit,this.unit,this.toUnit)}},e}();Pn.decorators=[{type:n.Component,args:[{selector:"lhc-question",template:'<div class="form-inline question">\n  <div class="question-select">\n    <select [(ngModel)]="linkId" (change)="onChange(true)" [style]="lhcStyle.select" aria-label="Question">\n      <option value="" disabled hidden>Select...</option>\n      <option *ngFor="let question of questions" [value]="question.linkId">\n        {{question.text + \' (\' + question.linkId + \')\'}}\n      </option>\n    </select>\n  </div>\n\n  <div class="unit-select">\n    <select *ngIf="conversionOptions" [(ngModel)]="toUnit" [style]="lhcStyle.select"\n            (change)="onChange(false)" aria-label="Unit conversion">\n      <option value="">Keep form units ({{unit}})</option>\n      <option *ngFor="let u of conversionOptions" value="{{u.unit}}">Convert to {{u.unit}}</option>\n    </select>\n\n    <div *ngIf="isNonConvertibleUnit" class="detail">{{unit}}</div>\n    <div *ngIf="itemHasScore" class="detail">Score</div>\n  </div>\n</div>\n\n<lhc-syntax-preview [syntax]="variable.expression" [lhcStyle]="lhcStyle"></lhc-syntax-preview>\n',styles:[".question{display:flex;flex-wrap:wrap;flex-direction:row}.detail{margin-top:.5rem}.question-select,.unit-select{box-sizing:border-box;margin-bottom:.5rem}.question-select{flex:50%;padding-right:.5rem}.unit-select{flex:50%;padding-left:.5rem}select{width:100%;font-size:1rem;height:2rem}@media (max-width:975px){.question{flex-direction:column}.question-select,.unit-select{flex:100%;padding:0}}input,select{height:2rem;font-size:1rem;width:100%;margin-bottom:.5rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}"]}]}],Pn.ctorParameters=function(){return[{type:fe}]},Pn.propDecorators={variable:[{type:n.Input}],lhcStyle:[{type:n.Input}]};
/**
     * @license Angular v11.0.9
     * (c) 2010-2020 Google LLC. https://angular.io/
     * License: MIT
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Mn,Tn=function(e){function n(){return e.call(this)||this}return t.__extends(n,e),n.prototype.supportsDOMEvents=function(){return!0},n}(r.ɵDomAdapter),Nn=(function(){if(n.ɵglobal.Node)n.ɵglobal.Node.prototype.contains}(),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.makeCurrent=function(){r.ɵsetRootDomAdapter(new n)},n.prototype.getProperty=function(e,t){return e[t]},n.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},n.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},n.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},n.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},n.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},n.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},n.prototype.getValue=function(e){return e.value},n.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},n.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},n.prototype.getDefaultDocument=function(){return document},n.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},n.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},n.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},n.prototype.getHistory=function(){return window.history},n.prototype.getLocation=function(){return window.location},n.prototype.getBaseHref=function(e){var t=function(){if(!kn&&!(kn=document.querySelector("base")))return null;return kn.getAttribute("href")}();return null==t?null:function(e){Mn||(Mn=document.createElement("a"));return Mn.setAttribute("href",e),"/"===Mn.pathname.charAt(0)?Mn.pathname:"/"+Mn.pathname}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(t)},n.prototype.resetBaseElement=function(){kn=null},n.prototype.getUserAgent=function(){return window.navigator.userAgent},n.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},n.prototype.supportsCookies=function(){return!0},n.prototype.getCookie=function(e){return r.ɵparseCookieValue(document.cookie,e)},n}(Tn)),kn=null;
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var jn=new n.InjectionToken("TRANSITION_ID");var Rn=[{provide:n.APP_INITIALIZER,useFactory:function(e,t,o){return function(){o.get(n.ApplicationInitStatus).donePromise.then((function(){var n=r.ɵgetDOM();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[jn,r.DOCUMENT,n.Injector],multi:!0}],Fn=function(){function e(){}return e.init=function(){n.setTestabilityGetter(new e)},e.prototype.addToWindow=function(e){n.ɵglobal.getAngularTestability=function(t,n){void 0===n&&(n=!0);var r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},n.ɵglobal.getAllAngularTestabilities=function(){return e.getAllTestabilities()},n.ɵglobal.getAllAngularRootElements=function(){return e.getAllRootElements()};n.ɵglobal.frameworkStabilizers||(n.ɵglobal.frameworkStabilizers=[]),n.ɵglobal.frameworkStabilizers.push((function(e){var t=n.ɵglobal.getAllAngularTestabilities(),r=t.length,o=!1,i=function(t){o=o||t,0==--r&&e(o)};t.forEach((function(e){e.whenStable(i)}))}))},e.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var o=e.getTestability(t);return null!=o?o:n?r.ɵgetDOM().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Un(e,t){"undefined"!=typeof COMPILED&&COMPILED||((n.ɵglobal.ng=n.ɵglobal.ng||{})[e]=t)}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var Ln={ApplicationRef:n.ApplicationRef,NgZone:n.NgZone};function Gn(e){return n.ɵgetDebugNodeR2(e)}var Hn=[{provide:n.APP_INITIALIZER,useFactory:function(e){return Un("probe",Gn),Un("coreTokens",Object.assign(Object.assign({},Ln),(e||[]).reduce((function(e,t){return e[t.name]=t.token,e}),{}))),function(){return Gn}},deps:[[n.NgProbeToken,new n.Optional]],multi:!0}],zn=new n.InjectionToken("EventManagerPlugins"),qn=function(){function e(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach((function(e){return e.manager=n})),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},e.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},e}();qn.decorators=[{type:n.Injectable}],qn.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Inject,args:[zn]}]},{type:n.NgZone}]};var Bn=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,t,n){var o=r.ɵgetDOM().getGlobalEventTarget(this._doc,e);if(!o)throw new Error("Unsupported event target "+o+" for event "+t);return this.addEventListener(o,t,n)},e}(),Wn=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */Wn.decorators=[{type:n.Injectable}];var Zn=function(e){function n(t){var n=e.call(this)||this;return n._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return t.__extends(n,e),n.prototype._addStylesToHost=function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))},n.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},n.prototype.removeHost=function(e){this._hostNodes.delete(e)},n.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))},n.prototype.ngOnDestroy=function(){this._styleNodes.forEach((function(e){return r.ɵgetDOM().remove(e)}))},n}(Wn);Zn.decorators=[{type:n.Injectable}],Zn.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Xn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qn=/%COMP%/g,$n="undefined"==typeof ngDevMode||!!ngDevMode,Kn="_nghost-%COMP%",Yn="_ngcontent-%COMP%";function Jn(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?Jn(e,o,n):(o=o.replace(Qn,e),n.push(o))}return n}function er(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var tr=!1,nr=function(){function e(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rr(e)}return e.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case n.ViewEncapsulation.Emulated:var r=this.rendererByCompId.get(t.id);return r||(r=new sr(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,r)),r.applyToHost(e),r;case 1:case n.ViewEncapsulation.ShadowDom:return"undefined"!=typeof ngDevMode&&!ngDevMode||tr||1!==t.encapsulation||(tr=!0,console.warn("ViewEncapsulation.Native is no longer supported. Falling back to ViewEncapsulation.ShadowDom. The fallback will be removed in v12.")),new ar(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var o=Jn(t.id,t.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}();nr.decorators=[{type:n.Injectable}],nr.ctorParameters=function(){return[{type:qn},{type:Zn},{type:String,decorators:[{type:n.Inject,args:[n.APP_ID]}]}]};var rr=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,t){return t?document.createElementNS(Xn[t]||t,e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,t){e.appendChild(t)},e.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},e.prototype.removeChild=function(e,t){e&&e.removeChild(t)},e.prototype.selectRootElement=function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'+e+'" did not match any elements');return t||(n.textContent=""),n},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,t,n,r){if(r){t=r+":"+t;var o=Xn[r];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},e.prototype.removeAttribute=function(e,t,n){if(n){var r=Xn[n];r?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},e.prototype.addClass=function(e,t){e.classList.add(t)},e.prototype.removeClass=function(e,t){e.classList.remove(t)},e.prototype.setStyle=function(e,t,r,o){o&(n.RendererStyleFlags2.DashCase|n.RendererStyleFlags2.Important)?e.style.setProperty(t,r,o&n.RendererStyleFlags2.Important?"important":""):e.style[t]=r},e.prototype.removeStyle=function(e,t,r){r&n.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},e.prototype.setProperty=function(e,t,n){$n&&ir(t,"property"),e[t]=n},e.prototype.setValue=function(e,t){e.nodeValue=t},e.prototype.listen=function(e,t,n){return $n&&ir(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,er(n)):this.eventManager.addEventListener(e,t,er(n))},e}(),or="@".charCodeAt(0);function ir(e,t){if(e.charCodeAt(0)===or)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var sr=function(e){function n(t,n,r,o){var i=e.call(this,t)||this;i.component=r;var s,a=Jn(o+"-"+r.id,r.styles,[]);return n.addStyles(a),i.contentAttr=(s=o+"-"+r.id,Yn.replace(Qn,s)),i.hostAttr=function(e){return Kn.replace(Qn,e)}(o+"-"+r.id),i}return t.__extends(n,e),n.prototype.applyToHost=function(t){e.prototype.setAttribute.call(this,t,this.hostAttr,"")},n.prototype.createElement=function(t,n){var r=e.prototype.createElement.call(this,t,n);return e.prototype.setAttribute.call(this,r,this.contentAttr,""),r},n}(rr),ar=function(e){function n(t,n,r,o){var i=e.call(this,t)||this;i.sharedStylesHost=n,i.hostEl=r,i.shadowRoot=r.attachShadow({mode:"open"}),i.sharedStylesHost.addHost(i.shadowRoot);for(var s=Jn(o.id,o.styles,[]),a=0;a<s.length;a++){var u=document.createElement("style");u.textContent=s[a],i.shadowRoot.appendChild(u)}return i}return t.__extends(n,e),n.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},n.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},n.prototype.appendChild=function(t,n){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(t),n)},n.prototype.insertBefore=function(t,n,r){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(t),n,r)},n.prototype.removeChild=function(t,n){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(t),n)},n.prototype.parentNode=function(t){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(t)))},n}(rr),ur=function(e){function n(t){return e.call(this,t)||this}return t.__extends(n,e),n.prototype.supports=function(e){return!0},n.prototype.addEventListener=function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}},n.prototype.removeEventListener=function(e,t,n){return e.removeEventListener(t,n)},n}(Bn);ur.decorators=[{type:n.Injectable}],ur.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var lr={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},cr=new n.InjectionToken("HammerGestureConfig"),pr=new n.InjectionToken("HammerLoader"),dr=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},e}();dr.decorators=[{type:n.Injectable}];var hr=function(e){function n(t,n,r,o){var i=e.call(this,t)||this;return i._config=n,i.console=r,i.loader=o,i}return t.__extends(n,e),n.prototype.supports=function(e){return!(!lr.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))&&(!(!window.Hammer&&!this.loader)||(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),!1))},n.prototype.addEventListener=function(e,t,n){var r=this,o=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var i=!1,s=function(){i=!0};return this.loader().then((function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(s=function(){});i||(s=r.addEventListener(e,t,n))})).catch((function(){r.console.warn('The "'+t+'" event cannot be bound because the custom Hammer.JS loader failed.'),s=function(){}})),function(){s()}}return o.runOutsideAngular((function(){var i=r._config.buildHammer(e),s=function(e){o.runGuarded((function(){n(e)}))};return i.on(t,s),function(){i.off(t,s),"function"==typeof i.destroy&&i.destroy()}}))},n.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},n}(Bn);hr.decorators=[{type:n.Injectable}],hr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]},{type:dr,decorators:[{type:n.Inject,args:[cr]}]},{type:n.ɵConsole},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[pr]}]}]};var fr=[{provide:zn,useClass:hr,multi:!0,deps:[r.DOCUMENT,cr,n.ɵConsole,[new n.Optional,pr]]},{provide:cr,useClass:dr,deps:[]}],yr=fr;n.NgModule;
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var vr=["alt","control","meta","shift"],mr={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"},br={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},_r=function(e){function n(t){return e.call(this,t)||this}return t.__extends(n,e),n.prototype.supports=function(e){return null!=n.parseEventName(e)},n.prototype.addEventListener=function(e,t,o){var i=n.parseEventName(t),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return r.ɵgetDOM().onAndCancel(e,i.domEventName,s)}))},n.parseEventName=function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var o=n._normalizeKey(t.pop()),i="";if(vr.forEach((function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),i+=e+".")})),i+=o,0!=t.length||0===o.length)return null;var s={};return s.domEventName=r,s.fullKey=i,s},n.getEventFullKey=function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&gr.hasOwnProperty(t)&&(t=gr[t]))}return mr[t]||t}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),vr.forEach((function(r){r!=n&&((0,br[r])(e)&&(t+=r+"."))})),t+=n},n.eventCallback=function(e,t,r){return function(o){n.getEventFullKey(o)===e&&r.runGuarded((function(){return t(o)}))}},n._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},n}(Bn);_r.decorators=[{type:n.Injectable}],_r.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};var wr=function(){};function Er(e){return new xr(e.get(r.DOCUMENT))}wr.ɵprov=n.ɵɵdefineInjectable({factory:function(){return n.ɵɵinject(xr)},token:wr,providedIn:"root"}),wr.decorators=[{type:n.Injectable,args:[{providedIn:"root",useExisting:n.forwardRef((function(){return xr}))}]}];var xr=function(e){function r(t){var n=e.call(this)||this;return n._doc=t,n}return t.__extends(r,e),r.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case n.SecurityContext.NONE:return t;case n.SecurityContext.HTML:return n.ɵallowSanitizationBypassAndThrow(t,"HTML")?n.ɵunwrapSafeValue(t):n.ɵ_sanitizeHtml(this._doc,String(t));case n.SecurityContext.STYLE:return n.ɵallowSanitizationBypassAndThrow(t,"Style")?n.ɵunwrapSafeValue(t):t;case n.SecurityContext.SCRIPT:if(n.ɵallowSanitizationBypassAndThrow(t,"Script"))return n.ɵunwrapSafeValue(t);throw new Error("unsafe value used in a script context");case n.SecurityContext.URL:n.ɵgetSanitizationBypassType(t);return n.ɵallowSanitizationBypassAndThrow(t,"URL")?n.ɵunwrapSafeValue(t):n.ɵ_sanitizeUrl(String(t));case n.SecurityContext.RESOURCE_URL:if(n.ɵallowSanitizationBypassAndThrow(t,"ResourceURL"))return n.ɵunwrapSafeValue(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see https://g.co/ng/security#xss)")}},r.prototype.bypassSecurityTrustHtml=function(e){return n.ɵbypassSanitizationTrustHtml(e)},r.prototype.bypassSecurityTrustStyle=function(e){return n.ɵbypassSanitizationTrustStyle(e)},r.prototype.bypassSecurityTrustScript=function(e){return n.ɵbypassSanitizationTrustScript(e)},r.prototype.bypassSecurityTrustUrl=function(e){return n.ɵbypassSanitizationTrustUrl(e)},r.prototype.bypassSecurityTrustResourceUrl=function(e){return n.ɵbypassSanitizationTrustResourceUrl(e)},r}(wr);xr.ɵprov=n.ɵɵdefineInjectable({factory:function(){return Er(n.ɵɵinject(n.INJECTOR))},token:xr,providedIn:"root"}),xr.decorators=[{type:n.Injectable,args:[{providedIn:"root",useFactory:Er,deps:[n.Injector]}]}],xr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};var Cr=r.ɵPLATFORM_BROWSER_ID,Sr=[{provide:n.PLATFORM_ID,useValue:Cr},{provide:n.PLATFORM_INITIALIZER,useValue:
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function(){Nn.makeCurrent(),Fn.init()},multi:!0},{provide:r.DOCUMENT,useFactory:function(){return n.ɵsetDocument(document),document},deps:[]}],Or=[{provide:n.Sanitizer,useExisting:wr},{provide:wr,useClass:xr,deps:[r.DOCUMENT]}],Ar=(n.createPlatformFactory(n.platformCore,"browser",Sr),[Or,{provide:n.ɵINJECTOR_SCOPE,useValue:"root"},{provide:n.ErrorHandler,useFactory:function(){return new n.ErrorHandler},deps:[]},{provide:zn,useClass:ur,multi:!0,deps:[r.DOCUMENT,n.NgZone,n.PLATFORM_ID]},{provide:zn,useClass:_r,multi:!0,deps:[r.DOCUMENT]},yr,{provide:nr,useClass:nr,deps:[qn,Zn,n.APP_ID]},{provide:n.RendererFactory2,useExisting:nr},{provide:Wn,useExisting:Zn},{provide:Zn,useClass:Zn,deps:[r.DOCUMENT]},{provide:n.Testability,useClass:n.Testability,deps:[n.NgZone]},{provide:qn,useClass:qn,deps:[zn,n.NgZone]},Hn]),Ir=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return e.withServerTransition=function(t){return{ngModule:e,providers:[{provide:n.APP_ID,useValue:t.appId},{provide:jn,useExisting:n.APP_ID},Rn]}},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function Vr(){return new Dr(n.ɵɵinject(r.DOCUMENT))}Ir.decorators=[{type:n.NgModule,args:[{providers:Ar,exports:[r.CommonModule,n.ApplicationModule]}]}],Ir.ctorParameters=function(){return[{type:Ir,decorators:[{type:n.Optional},{type:n.SkipSelf},{type:n.Inject,args:[Ir]}]}]};var Dr=function(){function e(e){this._doc=e,this._dom=r.ɵgetDOM()}return e.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},e.prototype.addTags=function(e,t){var n=this;return void 0===t&&(t=!1),e?e.reduce((function(e,r){return r&&e.push(n._getOrCreateElement(r,t)),e}),[]):[]},e.prototype.getTag=function(e){return e&&this._doc.querySelector("meta["+e+"]")||null},e.prototype.getTags=function(e){if(!e)return[];var t=this._doc.querySelectorAll("meta["+e+"]");return t?[].slice.call(t):[]},e.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);var n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)},e.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},e.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},e.prototype._getOrCreateElement=function(e,t){if(void 0===t&&(t=!1),!t){var n=this._parseSelector(e),r=this.getTag(n);if(r&&this._containsAttributes(e,r))return r}var o=this._dom.createElement("meta");return this._setMetaElementAttributes(e,o),this._doc.getElementsByTagName("head")[0].appendChild(o),o},e.prototype._setMetaElementAttributes=function(e,t){var n=this;return Object.keys(e).forEach((function(r){return t.setAttribute(n._getMetaKeyMap(r),e[r])})),t},e.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},e.prototype._containsAttributes=function(e,t){var n=this;return Object.keys(e).every((function(r){return t.getAttribute(n._getMetaKeyMap(r))===e[r]}))},e.prototype._getMetaKeyMap=function(e){return Pr[e]||e},e}();Dr.ɵprov=n.ɵɵdefineInjectable({factory:Vr,token:Dr,providedIn:"root"}),Dr.decorators=[{type:n.Injectable,args:[{providedIn:"root",useFactory:Vr,deps:[]}]}],Dr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};var Pr={httpEquiv:"http-equiv"};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function Mr(){return new Tr(n.ɵɵinject(r.DOCUMENT))}var Tr=function(){function e(e){this._doc=e}return e.prototype.getTitle=function(){return this._doc.title},e.prototype.setTitle=function(e){this._doc.title=e||""},e}();Tr.ɵprov=n.ɵɵdefineInjectable({factory:Mr,token:Tr,providedIn:"root"}),Tr.decorators=[{type:n.Injectable,args:[{providedIn:"root",useFactory:Mr,deps:[]}]}],Tr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var Nr="undefined"!=typeof window&&window||{},kr=function(e,t){this.msPerTick=e,this.numTicks=t};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */!function(){function e(e){this.appRef=e.injector.get(n.ApplicationRef)}e.prototype.timeChangeDetection=function(e){var t=e&&e.record,n="Change Detection",o=null!=Nr.console.profile;t&&o&&Nr.console.profile(n);for(var i=r.ɵgetDOM().performanceNow(),s=0;s<5||r.ɵgetDOM().performanceNow()-i<500;)this.appRef.tick(),s++;var a=r.ɵgetDOM().performanceNow();t&&o&&Nr.console.profileEnd(n);var u=(a-i)/s;return Nr.console.log("ran "+s+" change detection cycles"),Nr.console.log(u.toFixed(2)+" ms per check"),new kr(u,s)}}();var jr=function(){function e(){this.store={},this.onSerializeCallbacks={}}return e.init=function(t){var n=new e;return n.store=t,n},e.prototype.get=function(e,t){return void 0!==this.store[e]?this.store[e]:t},e.prototype.set=function(e,t){this.store[e]=t},e.prototype.remove=function(e){delete this.store[e]},e.prototype.hasKey=function(e){return this.store.hasOwnProperty(e)},e.prototype.onSerialize=function(e,t){this.onSerializeCallbacks[e]=t},e.prototype.toJson=function(){for(var e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)},e}();jr.decorators=[{type:n.Injectable}],n.NgModule,r.DOCUMENT,n.APP_ID;
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
!function(){function e(){}e.all=function(){return function(){return!0}},e.css=function(e){return function(t){return null!=t.nativeElement&&function(e,t){if(r.ɵgetDOM().isElementNode(e))return e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t);return!1}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(t.nativeElement,e)}},e.directive=function(e){return function(t){return-1!==t.providerTokens.indexOf(e)}}}();new n.Version("11.0.9");
/**
     * @license Angular v11.0.9
     * (c) 2010-2020 Google LLC. https://angular.io/
     * License: MIT
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var Rr=function(e){function r(t,r){var o=e.call(this)||this;o._nextAnimationId=0;var i={id:"0",encapsulation:n.ViewEncapsulation.None,styles:[],data:{animation:[]}};return o._renderer=t.createRenderer(r.body,i),o}return t.__extends(r,e),r.prototype.build=function(e){var t=this._nextAnimationId.toString();this._nextAnimationId++;var n=Array.isArray(e)?i.sequence(e):e;return Lr(this._renderer,null,t,"register",[n]),new Fr(t,this._renderer)},r}(i.AnimationBuilder);Rr.decorators=[{type:n.Injectable}],Rr.ctorParameters=function(){return[{type:n.RendererFactory2},{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]}]};var Fr=function(e){function n(t,n){var r=e.call(this)||this;return r._id=t,r._renderer=n,r}return t.__extends(n,e),n.prototype.create=function(e,t){return new Ur(this._id,e,t||{},this._renderer)},n}(i.AnimationFactory),Ur=function(){function e(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}return e.prototype._listen=function(e,t){return this._renderer.listen(this.element,"@@"+this.id+":"+e,t)},e.prototype._command=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Lr(this._renderer,this.element,this.id,e,t)},e.prototype.onDone=function(e){this._listen("done",e)},e.prototype.onStart=function(e){this._listen("start",e)},e.prototype.onDestroy=function(e){this._listen("destroy",e)},e.prototype.init=function(){this._command("init")},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this._command("play"),this._started=!0},e.prototype.pause=function(){this._command("pause")},e.prototype.restart=function(){this._command("restart")},e.prototype.finish=function(){this._command("finish")},e.prototype.destroy=function(){this._command("destroy")},e.prototype.reset=function(){this._command("reset")},e.prototype.setPosition=function(e){this._command("setPosition",e)},e.prototype.getPosition=function(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0},e}();function Lr(e,t,n,r,o){return e.setProperty(t,"@@"+n+":"+r,o)}var Gr="@",Hr="@.disabled",zr=function(){function e(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=function(e,t){t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}return e.prototype.createRenderer=function(e,t){var n=this,r=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){var o=this._rendererCache.get(r);return o||(o=new qr("",r,this.engine),this._rendererCache.set(r,o)),o}var i=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);var a=function(t){Array.isArray(t)?t.forEach(a):n.engine.registerTrigger(i,s,e,t.name,t)};return t.data.animation.forEach(a),new Br(this,s,r,this.engine)},e.prototype.begin=function(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()},e.prototype._scheduleCountTask=function(){var e=this;this.promise.then((function(){e._microtaskId++}))},e.prototype.scheduleListenerCallback=function(e,n,r){var o=this;e>=0&&e<this._microtaskId?this._zone.run((function(){return n(r)})):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then((function(){o._zone.run((function(){o._animationCallbacksBuffer.forEach((function(e){var n=t.__read(e,2);(0,n[0])(n[1])})),o._animationCallbacksBuffer=[]}))})),this._animationCallbacksBuffer.push([n,r]))},e.prototype.end=function(){var e=this;this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular((function(){e._scheduleCountTask(),e.engine.flush(e._microtaskId)})),this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.engine.whenRenderingDone()},e}();zr.decorators=[{type:n.Injectable}],zr.ctorParameters=function(){return[{type:n.RendererFactory2},{type:s.ɵAnimationEngine},{type:n.NgZone}]};var qr=function(){function e(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?function(e){return t.destroyNode(e)}:null}return Object.defineProperty(e.prototype,"data",{get:function(){return this.delegate.data},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()},e.prototype.createElement=function(e,t){return this.delegate.createElement(e,t)},e.prototype.createComment=function(e){return this.delegate.createComment(e)},e.prototype.createText=function(e){return this.delegate.createText(e)},e.prototype.appendChild=function(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)},e.prototype.insertBefore=function(e,t,n,r){void 0===r&&(r=!0),this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)},e.prototype.removeChild=function(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)},e.prototype.selectRootElement=function(e,t){return this.delegate.selectRootElement(e,t)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setAttribute=function(e,t,n,r){this.delegate.setAttribute(e,t,n,r)},e.prototype.removeAttribute=function(e,t,n){this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,r){this.delegate.setStyle(e,t,n,r)},e.prototype.removeStyle=function(e,t,n){this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){t.charAt(0)==Gr&&t==Hr?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)},e.prototype.setValue=function(e,t){this.delegate.setValue(e,t)},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.disableAnimations=function(e,t){this.engine.disableAnimations(e,t)},e}(),Br=function(e){function n(t,n,r,o){var i=e.call(this,n,r,o)||this;return i.factory=t,i.namespaceId=n,i}return t.__extends(n,e),n.prototype.setProperty=function(e,t,n){t.charAt(0)==Gr?"."==t.charAt(1)&&t==Hr?(n=void 0===n||!!n,this.disableAnimations(e,n)):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)},n.prototype.listen=function(e,n,r){var o,i=this;if(n.charAt(0)==Gr){var s=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e),a=n.substr(1),u="";return a.charAt(0)!=Gr&&(a=(o=t.__read(function(e){var t=e.indexOf("."),n=e.substring(0,t),r=e.substr(t+1);return[n,r]}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */(a),2))[0],u=o[1]),this.engine.listen(this.namespaceId,s,a,u,(function(e){var t=e._data||-1;i.factory.scheduleListenerCallback(t,r,e)}))}return this.delegate.listen(e,n,r)},n}(qr);var Wr=function(e){function n(t,n,r){return e.call(this,t.body,n,r)||this}return t.__extends(n,e),n}(s.ɵAnimationEngine);Wr.decorators=[{type:n.Injectable}],Wr.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[r.DOCUMENT]}]},{type:s.AnimationDriver},{type:s.ɵAnimationStyleNormalizer}]};var Zr=new n.InjectionToken("AnimationModuleType"),Xr=[{provide:i.AnimationBuilder,useClass:Rr},{provide:s.ɵAnimationStyleNormalizer,useFactory:function(){return new s.ɵWebAnimationsStyleNormalizer}},{provide:s.ɵAnimationEngine,useClass:Wr},{provide:n.RendererFactory2,useFactory:function(e,t,n){return new zr(e,t,n)},deps:[nr,s.ɵAnimationEngine,n.NgZone]}],Qr=t.__spread([{provide:s.AnimationDriver,useFactory:function(){return s.ɵsupportsWebAnimations()?new s.ɵWebAnimationsDriver:new s.ɵCssKeyframesDriver}},{provide:Zr,useValue:"BrowserAnimations"}],Xr),$r=(t.__spread([{provide:s.AnimationDriver,useClass:s.ɵNoopAnimationDriver},{provide:Zr,useValue:"NoopAnimations"}],Xr),function(){});$r.decorators=[{type:n.NgModule,args:[{exports:[Ir],providers:Qr}]}],n.NgModule;var Kr=function(){function e(e){this.ruleEditorService=e,this.lhcStyle={},this.export=new n.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.onCloseClick=function(){this.ruleEditorService.toggleMightBeScore()},e.prototype.onExportClick=function(){this.export.emit()},e}();function Yr(e,t){return function(e,t){for(var n=e.length,r="",o=0;o<n;o++)if(/[a-zA-Z0-9.,\s()\\-]/.test(e[o]))if(r.length>0){if(!Jr.includes(r))return!1;for(var i=!0,s=o-r.length-1;i;)if(/[\s]/.test(e[s]))s-=1;else{if(!/[a-zA-Z0-9.,)\\-]/.test(e[s]))return!1;i=!1}var a=!0,u=o;if(u>n-1)return!1;for(;a;)if(/[\s]/.test(e[u]))u+=1;else{if(!/[a-zA-Z0-9.(\\-]/.test(e[u]))return!1;a=!1}r=""}else r="";else if(r+=e[o],o==n-1||0==o)return!1;for(var l=0,c=0,p="",d=0;d<n;d++){if("("==e[d]&&(l+=1),")"==e[d]&&(c+=1),c>l)return!1;if(/[a-zA-Z0-9]/.test(e[d])&&(p+=e[d]),null==e[d+1]||!/[[a-zA-Z0-9]/.test(e[d+1]))if(eo.includes(p)&&"("==e[d+1]||""==p)p="";else{if(!t.includes(p)&&!Jr.includes(p)&&isNaN(p))return!1;p=""}}return l==c}(e,t)?function(e,t){var n=!1,r=0,o=0,i="";for(;!n;)null==e[r]?n=!0:(/[a-zA-Z0-9]/.test(e[r])?i+=e[r]:(o=r-i.length,t.includes(i)&&(e=e.slice(0,o)+"%"+e.slice(o),r+=1),i=""),null==e[r+1]&&(o=r-i.length+1,t.includes(i)&&(e=e.slice(0,o)+"%"+e.slice(o),r+=1)),r+=1);return e}(no(e),t):null}Kr.decorators=[{type:n.Component,args:[{selector:"lhc-calculate-sum-prompt",template:'<div class="score-modal">\n  <p [style]="lhcStyle.description">It looks like this might be a score calculation.</p>\n\n  <p [style]="lhcStyle.description">Would you like to calculate the sum of scores?</p>\n\n  <button class="primary" (click)="onExportClick()" [style]="lhcStyle.buttonPrimary" id="export-score">Yes</button>\n  <button (click)="onCloseClick()" [style]="lhcStyle.buttonSecondary" id="skip-export-score">No</button>\n</div>\n',styles:["*{font-size:1rem}.score-modal{text-align:center}button{margin:0 .5em}"]}]}],Kr.ctorParameters=function(){return[{type:fe}]},Kr.propDecorators={lhcStyle:[{type:n.Input}],export:[{type:n.Output}]};var Jr=["+","-","*","/","^","**","||","&&","<",">","=","!=","!~",">=","<=","xor","XOR","implies","IMPLIES","and","or","AND","OR"],eo=["CEILING","FLOOR","ABS","TRUNCATE","EXP","SQRT","LN","LOG","ceiling","floor","abs","truncate","exp","sqrt","ln","log","NOT","not"],to=["CEILING","FLOOR","ABS","TRUNCATE","EXP","SQRT","LN","NOT","ceiling","floor","abs","truncate","exp","sqrt","ln","not"];function no(e){var t=0;if(e.includes("^")){var n=e.indexOf("^"),r=io(e,n),o=so(e,n);e=e.slice(0,n-r.length)+r.trim()+".power("+o.trim()+")"+e.slice(n+o.length+1),t+=1}if(e.includes("**")){n=e.indexOf("**"),r=io(e,n),o=so(e,n+1);e=e.slice(0,n-r.length)+r.trim()+".power("+o.trim()+")"+e.slice(n+o.length+2),t+=1}for(var i=0;i<to.length;i++)e.includes(to[i])&&"."!=e[e.indexOf(to[i])-1]&&(e=ro(e,to[i]),t+=1);return e.includes("LOG")&&(e=oo(e,"LOG"),t+=1),e.includes("log")&&"."!=e[e.indexOf("log")-1]&&(e=oo(e,"log"),t+=1),e.includes("OR")&&(e=e.replace("OR","or"),t+=1),e.includes("AND")&&(e=e.replace("AND","and"),t+=1),e.includes("||")&&(e=e.replace("||","or"),t+=1),e.includes("&&")&&(e=e.replace("&&","and"),t+=1),0!=t?no(e):e}function ro(e,t){for(var n=e.indexOf(t),r=n+t.length,o=r,i=!1,s=0,a=0;!i;)"("==e[o]&&(s+=1),")"==e[o]&&(a+=1),s==a?i=!0:o+=1;return e.slice(0,n).trim()+e.slice(r,o+1).trim()+"."+t.toLowerCase()+"()"+e.slice(o+1).trim()}function oo(e,t){for(var n=e.indexOf(t),r=n+3,o=r,i=-1,s=!1,a=0,u=0;!s;)"("==e[o]&&(a+=1),")"==e[o]&&(u+=1),a==u+1&&o!=r&&","==e[o]&&(i=o),a==u?s=!0:o+=1;return e.slice(0,n).trim()+"("+e.slice(i+1,o).trim()+").log("+e.slice(r+1,i).trim()+")"+e.slice(o+1).trim()}function io(e,t){if(")"!=e[t-1]){for(var n=!0,r="";n;)t<2&&(n=!1),/[a-zA-Z0-9.-\s]/.test(e[t-1])?(r=e[t-1]+r,t-=1):n=!1;return r}for(var o=!1,i=0,s=0,a=t-1;!o;)"("==e[a]&&(i+=1),")"==e[a]&&(s+=1),i==s?o=!0:a-=1;return e.slice(a,t)}function so(e,t){if("("!=e[t+1]){for(var n=!0,r="";n;)null==e[t+2]&&(n=!1),/[a-zA-Z0-9.\s()\\-]/.test(e[t+1])?(r+=e[t+1],t+=1):n=!1;return r}return e.slice(t+1,e.slice(t).indexOf(")")+t+1)}var ao=function(){function e(){}return e.prototype.transform=function(e,t){if(void 0!==e){var n=Yr(e,t);if(null!==n)return n}return"Not valid"},e}();ao.decorators=[{type:n.Pipe,args:[{name:"mathToFhirpath"}]}];var uo=function(){function e(){this.lhcStyle={},this.expressionChange=new n.EventEmitter,this.jsToFhirPathPipe=new ao}return e.prototype.ngOnChanges=function(){""!==this.expression&&this.onExpressionChange(this.expression)},e.prototype.onExpressionChange=function(e){var t=this.jsToFhirPathPipe.transform(e,this.variables);this.fhirPathExpression=t,this.expressionChange.emit(t)},e}();uo.decorators=[{type:n.Component,args:[{selector:"lhc-syntax-converter",template:'<input [(ngModel)]="expression" (ngModelChange)="onExpressionChange($event)" id="simple-expression"\n       aria-label="Simple Expression" [style]="lhcStyle.input" />\n<lhc-syntax-preview [syntax]="fhirPathExpression"></lhc-syntax-preview>\n',styles:[":host{width:100%}input,select{height:2rem;font-size:1rem;width:100%;margin-bottom:.5rem;box-sizing:border-box;border:1px solid #999;background-color:#fff;border-radius:4px;padding:0 .5em}"]}]}],uo.ctorParameters=function(){return[]},uo.propDecorators={expression:[{type:n.Input}],variables:[{type:n.Input}],lhcStyle:[{type:n.Input}],expressionChange:[{type:n.Output}]};var lo=function(){function e(){this.showWhenEmpty=!1}return e.prototype.ngOnInit=function(){},e}();lo.decorators=[{type:n.Component,args:[{selector:"lhc-syntax-preview",template:'<div class="syntax-preview text-muted" [ngStyle]="lhcStyle" *ngIf="syntax || showWhenEmpty">\n  FHIRPath: <pre class="d-inline text-muted" title="{{syntax}}">{{syntax}}</pre>\n</div>\n',styles:[":host{overflow:hidden}.syntax-preview{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.text-muted{margin:0;color:#555;font-size:.8rem}"]}]}],lo.ctorParameters=function(){return[]},lo.propDecorators={syntax:[{type:n.Input}],lhcStyle:[{type:n.Input}],showWhenEmpty:[{type:n.Input}]};var co=function(){};co.decorators=[{type:n.NgModule,args:[{declarations:[ye,Vn,Dn,Pn,Kr,ao,uo,lo],imports:[In,$r,o.DragDropModule,a.MatRadioModule],exports:[ye]}]}],e.RuleEditorComponent=ye,e.RuleEditorModule=co,e.RuleEditorService=fe,e.ɵa=Vn,e.ɵb=Dn,e.ɵc=Pn,e.ɵd=Kr,e.ɵe=ao,e.ɵf=uo,e.ɵg=lo,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-rule-editor.umd.min.js.map